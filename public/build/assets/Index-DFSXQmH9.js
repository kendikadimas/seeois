import{c as i,o,a as s,b as f,j as p,i as e,d as b,l as g,A as w,r as y,f as h,t as c,F as x,y as $}from"./app-CR2mpfjv.js";import{s as v}from"./index-B1mkpeUi.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"internship-layout"},D={class:"navbar navbar-expand-lg navbar-dark bg-dark"},A={class:"container-fluid"},C={class:"collapse navbar-collapse",id:"navbarNav"},E={class:"navbar-nav ms-auto"},N={class:"nav-item"},S={class:"nav-item"},I={class:"nav-item"},U={class:"py-4"},O={__name:"InternLayout",setup(m){return(r,a)=>(o(),i("div",L,[s("nav",D,[s("div",A,[f(b(g),{href:"/",class:"navbar-brand fw-bold"},{default:p(()=>[...a[0]||(a[0]=[s("i",{class:"bi bi-mortarboard"},null,-1),e(" SEEO Internship ",-1)])]),_:1}),a[4]||(a[4]=s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[s("span",{class:"navbar-toggler-icon"})],-1)),s("div",C,[s("ul",E,[s("li",N,[f(b(g),{href:"/internship/certificates",class:"nav-link"},{default:p(()=>[...a[1]||(a[1]=[s("i",{class:"bi bi-file-pdf"},null,-1),e(" Sertifikat ",-1)])]),_:1})]),s("li",S,[f(b(g),{href:b(v)("profile.edit"),class:"nav-link"},{default:p(()=>[...a[2]||(a[2]=[s("i",{class:"bi bi-person"},null,-1),e(" Profil ",-1)])]),_:1},8,["href"])]),s("li",I,[f(b(g),{href:b(v)("logout"),method:"post",as:"button",class:"nav-link btn"},{default:p(()=>[...a[3]||(a[3]=[s("i",{class:"bi bi-box-arrow-right"},null,-1),e(" Keluar ",-1)])]),_:1},8,["href"])])])])])]),s("main",U,[w(r.$slots,"default",{},void 0,!0)]),a[5]||(a[5]=s("footer",{class:"bg-light text-center py-3 mt-4 border-top"},[s("p",{class:"text-muted mb-0"},"Â© 2024 SEEO Platform. All rights reserved.")],-1))]))}},R=k(O,[["__scopeId","data-v-94cffa3a"]]),V={class:"container mt-4 mb-4"},j={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},B={key:1,class:"alert alert-danger alert-dismissible fade show",role:"alert"},F={key:2,class:"alert alert-info",role:"alert"},T={key:3,class:"card border-0 shadow-sm"},M={class:"table-responsive"},P={class:"table table-hover mb-0"},G={class:"text-dark fw-500"},K={class:"d-flex align-items-center gap-2"},q={class:"text-dark"},z={class:"badge bg-light text-dark"},H={class:"text-center"},J=["onClick","disabled"],Q={key:0,class:"bi bi-download"},W={key:1,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},X={__name:"Index",props:{certs:Array},setup(m){const r=y(null),a=l=>l?new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-",_=async l=>{r.value=l;try{const t=await fetch(v("certificate.download",l));if(!t.ok)throw new Error("Failed to download");const n=await t.blob(),u=window.URL.createObjectURL(n),d=document.createElement("a");d.href=u,d.download=`sertifikat-${l}.pdf`,document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(u),document.body.removeChild(d)}catch(t){console.error("Download error:",t),alert("Gagal mengunduh sertifikat")}finally{r.value=null}};return(l,t)=>(o(),i("div",V,[f(R,null,{default:p(()=>[t[8]||(t[8]=s("div",{class:"row mb-4"},[s("div",{class:"col-12"},[s("h1",{class:"h3 fw-bold text-dark"},[s("i",{class:"bi bi-file-pdf"}),e(" Sertifikat Magang ")]),s("p",{class:"text-muted"},"Lihat dan unduh sertifikat magang Anda di sini.")])],-1)),l.$page.props.flash.success?(o(),i("div",j,[t[0]||(t[0]=s("i",{class:"bi bi-check-circle"},null,-1)),e(" "+c(l.$page.props.flash.success)+" ",1),t[1]||(t[1]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert"},null,-1))])):h("",!0),l.$page.props.flash.error?(o(),i("div",B,[t[2]||(t[2]=s("i",{class:"bi bi-exclamation-circle"},null,-1)),e(" "+c(l.$page.props.flash.error)+" ",1),t[3]||(t[3]=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert"},null,-1))])):h("",!0),!m.certs||m.certs.length===0?(o(),i("div",F,[...t[4]||(t[4]=[s("i",{class:"bi bi-info-circle"},null,-1),e(" Anda belum memiliki sertifikat magang yang dipublikasikan. ",-1)])])):(o(),i("div",T,[s("div",M,[s("table",P,[t[7]||(t[7]=s("thead",{class:"table-light"},[s("tr",null,[s("th",{class:"fw-bold text-dark"},[s("i",{class:"bi bi-calendar"}),e(" Tanggal Terbit ")]),s("th",{class:"fw-bold text-dark"},[s("i",{class:"bi bi-person"}),e(" Diterbitkan Oleh ")]),s("th",{class:"fw-bold text-dark"},[s("i",{class:"bi bi-download"}),e(" Unduhan ")]),s("th",{class:"fw-bold text-dark text-center"},"Aksi")])],-1)),s("tbody",null,[(o(!0),i(x,null,$(m.certs,n=>{var u;return o(),i("tr",{key:n.id,class:"align-middle"},[s("td",null,[s("span",G,c(a(n.issued_at)),1)]),s("td",null,[s("div",K,[t[5]||(t[5]=s("i",{class:"bi bi-person-badge text-primary"},null,-1)),s("span",q,c(((u=n.issuer)==null?void 0:u.name)||"N/A"),1)])]),s("td",null,[s("span",z,[t[6]||(t[6]=s("i",{class:"bi bi-download"},null,-1)),e(" "+c(n.download_count||0)+" kali ",1)])]),s("td",H,[s("button",{onClick:d=>_(n.id),disabled:r.value===n.id,class:"btn btn-sm btn-primary"},[r.value!==n.id?(o(),i("i",Q)):(o(),i("span",W)),e(" "+c(r.value===n.id?"Mengunduh...":"Unduh"),1)],8,J)])])}),128))])])])]))]),_:1})]))}},ts=k(X,[["__scopeId","data-v-c68a7db2"]]);export{ts as default};
