import{s as at,r as _,m as nt,u as Z,C as it,q as ss,c,o as u,b as C,g as f,k as Ls,a as s,d as o,h as dt,j as p,t as e,n as g,F as z,y as O,w as ts,f as T,i as H,A as rt,e as ct,p as Ws}from"./app-CjkTfAbl.js";import{S as ut}from"./StaffLayout-rnZudT8v.js";import{_ as es}from"./InputError-91VUPa06.js";import{_ as mt}from"./Notif-bk3Hff9l.js";import{_ as pt}from"./ModalConfirmation-B5c1ThWe.js";import{M as bt}from"./ModalAlertNotification-DKli3vSK.js";import{C as vt}from"./vue-select-B7uxHtH9.js";import"./html2canvas.esm-QH1iLAAe.js";import{f as v,b as Gs}from"./utils-Dr-qEmMV.js";import{f as Js}from"./format-DFpGNh8k.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const yt=["href"],_t=["href"],ft={class:"fw-light"},ht={class:"container me-lg-0 mx-auto mb-5"},xt={class:"row gx-4 mt-4"},gt={class:"col-12 col-lg-5"},wt={class:"card bg-white p-3"},kt={class:"d-flex border-bottom border-primary"},Ct={class:"h5 text-primary-emphasis me-auto"},zt={class:"row g-2 mt-1"},Mt={class:"col-6"},Pt={class:"scroll-x-hidden"},St={class:"d-block text-primary-emphasis text-nowrap"},Rt={class:"col-6"},Nt={class:"scroll-x-hidden"},Ot={class:"d-block text-primary-emphasis text-nowrap"},Tt={class:"card my-4 bg-white p-1 d-lg-none"},Vt={class:"d-flex"},Dt={key:0,class:"card bg-white p-3 my-4"},Ut={class:"scroll-container-3 scroll-container-lg-2 pe-1"},It={class:"list-group list-group-flush"},$t={class:"list-group-item list-group-item-light py-1 ps-0 pe-2 mb-0"},At={class:"text-secondary"},jt=["onClick"],Et={class:"d-flex"},qt={class:"rounded-2 text-nowrap"},Yt={class:"scroll-x-hidden ms-2 me-auto my-auto"},Bt={class:"text-nowrap text-primary-emphasis"},Ft={class:"text-nowrap text-secondary"},Ht={class:"text-nowrap my-auto text-primary"},Lt={key:1,class:"card p-3 bg-white mt-4"},Wt={class:"scroll-container-2 scroll-container-lg-2 pe-1"},Gt={class:"d-flex bg-light"},Jt={class:"text-secondary fst-italic mx-auto my-1",style:{"font-size":"0.8rem"}},Kt={class:"list-group list-group-flush"},Qt=["onClick"],Xt={class:"text-secondary ms-auto"},Zt=["onClick"],se={class:"col-12 col-lg-7"},te={class:"card mb-4 bg-white p-1 d-lg-block d-none"},ee={class:"d-flex"},oe={key:0,class:"card bg-white p-3 mb-4"},le={class:"d-flex mt-2 bg-light"},ae={class:"row g-2 mt-1"},ne={class:"col-6 col-lg-4"},ie={class:"scroll-x-hidden"},de={class:"d-block text-primary-emphasis text-nowrap"},re={class:"col-12 col-lg-8"},ce={class:"d-flex"},ue={class:"row"},me={class:"col-12"},pe={class:"border rounded-3",style:{"min-height":"50px"}},be={key:0,class:"text-secondary fst-italic ms-2",style:{"font-size":"0.8rem"}},ve={class:"scroll-container scroll-container-lg pe-1"},ye={key:0,class:"list-group list-group-flush px-2"},_e={class:"list-group-item list-group-item-action mb-0 py-1 px-1"},fe={class:"d-flex"},he=["onClick"],xe={class:"text-secondary mx-1"},ge=["onClick"],we={class:"scroll-x-hidden me-auto"},ke={class:"text-nowrap text-primary-emphasis"},Ce={class:"ms-2 text-secondary"},ze={class:"row justify-content-end g-2 mt-2"},Me={class:"col-6 col-lg-4"},Pe={class:"scroll-x-hidden"},Se={class:"d-block text-primary-emphasis text-nowrap"},Re={class:"col-lg-4 col-6"},Ne={class:"input-group input-group-sm bg-light"},Oe={class:"col-6 col-lg-4"},Te={class:"d-flex"},Ve={class:"scroll-x-hidden w-100"},De={class:"d-block text-primary text-nowrap"},Ue={class:"row justify-content-end g-2 mt-2"},Ie={class:"col-6 col-lg-4"},$e={class:"input-group input-group-sm bg-light"},Ae=["value"],je={class:"col-lg-4 col-6"},Ee={class:"input-group input-group-sm bg-light"},qe={class:"btn-group"},Ye={class:"dropdown-menu dropdown-menu-end"},Be=["onClick"],Fe={class:"col-lg-4 col-6"},He={class:"scroll-x-hidden w-100"},Le={class:"d-block text-secondary text-nowrap"},We={class:"d-flex mt-3 bg-primary bg-opacity-10"},Ge={key:1,class:"card p-3 my-4"},Je={class:"row g-3 mt-0"},Ke={class:"col-lg-4 col-6"},Qe={class:""},Xe=["href"],Ze={class:"col-lg-4 col-6"},so={class:""},to={class:"col-lg-4 col-6"},eo={class:""},oo={class:"scroll-container scroll-container-lg pe-1"},lo={class:"list-group list-group-flush"},ao={class:"list-group-item list-group-item-action mb-0 py-1"},no={class:"text-secondary d-inline-block",style:{width:"2.7rem"}},io={class:"ms-0"},ro={class:"float-end text-primary-emphasis"},co={class:"row g-3 mt-0"},uo={class:"col-lg-4 col-6"},mo={class:""},po={class:"col-lg-4 col-6"},bo={class:"me-2"},vo={key:0,class:"text-success bg-success bg-opacity-10 px-2 text-nowrap"},yo={class:"col-lg-4 col-6"},_o={class:"text-primary"},fo={class:"col-lg-4 col-6"},ho={class:"d-flex"},xo={class:""},go={key:0,class:"btn btn-sm btn-light py-0 ms-2","data-bs-toggle":"modal","data-bs-target":"#danaReceiptModal"},wo={key:0,class:"bi bi-exclamation text-danger ms-2"},ko={key:1,class:"bi bi-check2 ms-2 text-success"},Co={class:"col-lg-4 col-6"},zo={class:""},Mo={class:"col-lg-4 col-6"},Po={class:""},So={class:"d-flex mt-3 bg-primary bg-opacity-10"},Ro=["disabled"],No=["disabled"],Oo={key:0,class:"modal fade",id:"printReceiptModal",tabindex:"-1","aria-labelledby":"printReceiptModal"},To={class:"modal-dialog modal-dialog-centered"},Vo={class:"modal-content shadow mx-auto"},Do={class:"modal-header py-1 ps-3 pe-2"},Uo={class:"modal-body p-0"},Io={class:"p-3"},$o={class:"row g-3"},Ao={class:"col-6"},jo={class:"d-flex scroll-x-hidden"},Eo={class:"text-nowrap"},qo={class:"col-6"},Yo={class:"d-flex scroll-x-hidden"},Bo={class:"text-nowrap"},Fo={class:"col-6"},Ho={class:"d-flex scroll-x-hidden"},Lo={class:"text-nowrap"},Wo={class:"col-6"},Go={class:"d-flex scroll-x-hidden"},Jo={class:"text-nowrap"},Ko={class:"mt-2"},Qo={class:"mt-2"},Xo={class:"d-flex"},Zo={class:"me-2"},sl={class:"fw-bold me-2"},tl={class:"d-flex"},el={class:"me-auto text-secondary"},ol={class:"ms-2"},ll={class:"mt-2"},al={class:"d-flex"},nl={class:""},il={class:"d-flex scroll-x-hidden"},dl={class:"text-nowrap"},rl={class:"mx-auto"},cl={class:"d-flex scroll-x-hidden"},ul={class:"text-nowrap"},ml={class:""},pl={class:"d-flex scroll-x-hidden"},bl={class:"text-nowrap fw-bold"},vl={class:"mt-2"},yl={class:"d-flex"},_l={class:""},fl={class:"d-flex scroll-x-hidden"},hl={class:"text-nowrap"},xl={class:"mx-auto"},gl={class:"d-flex scroll-x-hidden"},wl={class:"text-nowrap"},kl={class:""},Cl={class:"d-flex scroll-x-hidden"},zl={class:"text-nowrap"},Ml={class:"modal-footer p-1"},Pl={class:"d-flex bg-white"},Sl={class:"d-flex me-3"},Rl={class:"d-flex"},Nl={key:1,class:"modal fade",id:"newCustomerModal",tabindex:"-1","aria-labelledby":"newCustomerModal"},Ol={class:"modal-dialog modal-sm modal-dialog-centered"},Tl={class:"modal-content shadow"},Vl={class:"modal-header py-1 ps-3 pe-2"},Dl={class:"modal-body bg-white"},Ul={key:2,class:"modal fade",id:"danaReceiptModal",tabindex:"-1","aria-labelledby":"danaReceiptModal"},Il={class:"modal-dialog modal-dialog-centered"},$l={class:"modal-content shadow"},Al={class:"modal-header py-1 ps-3 pe-2"},jl={class:"modal-title fs-5 text-primary-emphasis"},El={class:"icon icon-dana d-inline rounded-circle border-primary border",style:{width:"1.5rem",height:"1.5rem",padding:"0.1rem"}},ql={class:"modal-body bg-secondary bg-opacity-50"},Yl={class:"d-flex bg-white p-2 rounded shadow-sm"},Bl=["src"],Fl={class:"d-flex bg-white p-2 rounded shadow-sm mt-3"},Hl={class:"text-primary ms-auto"},Ll={class:"d-flex bg-white p-2 rounded shadow-sm mt-3"},Wl={class:"text-primary ms-auto"},Gl={class:"modal-footer py-1 px-2"},na={__name:"StandCashier",props:{stand:Object,menu_list:Object,customer_list:Array,order_list:Array,payment_method_list:Array,data:Object,notif:Object,errors:Object},setup(y){const L=y,K=at().props.auth.user,os=_("Cashier"),Q=_(null),ls=_(null),W=_(null),G=_(null),M=_(null),Ks=_(null);_(null);const as=_(!0),ns=_(!0),h=_(1),n=_();_("placeholder"),_(new Date);const P=nt(()=>L.stand.cashier.some(d=>d.id==K.id)),V=_({id:null,print:!1}),a=Z({customer:null,customer_id:null,order:[],discount:0,subtotal:0,transaction:0,payment_method_id:1,payment_price:0}),k=Z({name:null,phone:null}),r=_({date:null,customer:null,customer_id:null,order_list:null,discount:null,transaction:null,payment_method_id:null,payment_price:null});function Qs(d){const t=a.order.findIndex(J=>J.menu_id===d.id);t!==-1?(a.order[t].amount+=1,a.order[t].total+=Number(a.order[t].price),a.subtotal+=Number(a.order[t].price)):(a.order.push({menu_id:d.id,name:d.name,price:Number(d.price),amount:1,total:Number(d.price)}),a.subtotal+=Number(d.price))}function Xs(){console.log(a),a.post(route("stand.sale.add",L.stand.id),{onError:d=>{for(const t in d)M.value.showToast("warning",d[t])}})}function Zs(){k.post(route("sale.customer.add",L.stand.id))}function st(d){Z({transaction_id:d}).post(route("shop.transaction.finish"))}function X(d){if(W.value==null){const t=document.getElementById("printReceiptModal");W.value=bootstrap.Modal.getOrCreateInstance(t)}d?W.value.show():W.value.hide()}function is(d){if(G.value==null){const t=document.getElementById("newCustomerModal");G.value=bootstrap.Modal.getOrCreateInstance(t)}d?G.value.show():G.value.hide()}function tt(){a.customer=null,a.customer_id=null,a.discount=null,a.order=[],a.transaction=null,a.subtotal=null,a.payment_method_id=1,a.payment_price=0}function et(d){d!==""&&(k.phone=d)}const ot=()=>{k.name=a.customer};function lt(d,t){Q.value?Q.value.showModal(d,t):console.error("modalConfirmationRef is null")}function D(d){ls.value.showModal(d)}return it(()=>{}),ss(()=>L.notif,d=>{const t=d;M.value.showToast(t.type,t.message)}),ss(()=>a.discount,d=>{const t=Number(d);a.transaction=a.subtotal-t}),ss(()=>a.subtotal,d=>{const t=Number(d);a.transaction=t-a.discount}),(d,t)=>{var J,ds,rs,cs,us,ms,ps,bs,vs,ys,_s,fs,hs,xs;return u(),c(z,null,[C(ut,null,{header:Ls(()=>[s("a",{href:d.route("food.stand"),class:"bg-opacity-0 text-decoration-none text-primary-emphasis"},[...t[26]||(t[26]=[s("span",{class:"fw-light"},e("Stand"),-1)])],8,yt),t[27]||(t[27]=s("span",{class:"mx-2"},e("/"),-1)),s("a",{href:d.route("food.stand.detail",y.stand.id),class:"bg-opacity-0 text-decoration-none text-primary-emphasis"},[s("span",ft,e(y.stand.name),1)],8,_t),t[28]||(t[28]=s("span",{class:"mx-2"},e("/"),-1)),p(" "+e(os.value),1)]),default:Ls(()=>{var i,x,S,R,U,I,$,A,gs,ws,ks,Cs,zs,Ms,Ps,Ss,Rs,Ns,Os,Ts,Vs,Ds,Us,Is,$s,As,js,Es,qs,Ys,Bs,Fs;return[C(o(dt),{title:os.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),C(pt,{ref_key:"modalConfirmationRef",ref:Q},null,512),C(bt,{ref_key:"modalAlertNotificationRef",ref:ls},null,512),s("div",ht,[s("div",xt,[s("div",gt,[s("div",wt,[s("div",kt,[s("span",Ct,[t[29]||(t[29]=s("i",{class:"bi bi-shop me-2"},null,-1)),p(e("Stand "+y.stand.name),1)])]),s("div",zt,[s("div",Mt,[t[30]||(t[30]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("In Charge"),-1)),s("div",Pt,[s("span",St,e(y.stand.pic.name),1)])]),s("div",Rt,[t[31]||(t[31]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Place"),-1)),s("div",Nt,[s("span",Ot,e(y.stand.place),1)])])])]),s("div",Tt,[s("div",Vt,[s("button",{class:g("btn btn-sm btn-outline-primary border-0 w-50 "+(h.value==1?"active":"")),onClick:t[0]||(t[0]=l=>h.value=1)},[...t[32]||(t[32]=[s("i",{class:"fa-solid fa-cash-register me-2"},null,-1),p(" "+e("Cashier"),-1)])],2),s("button",{class:g("btn btn-sm btn-outline-primary border-0 w-50 "+(h.value==2?"active":"")),onClick:t[1]||(t[1]=l=>h.value=2)},[...t[33]||(t[33]=[s("i",{class:"fa-solid fa-user-group me-2"},null,-1),p(" "+e("Self-Order"),-1)])],2)])]),h.value==1?(u(),c("div",Dt,[t[37]||(t[37]=s("div",{class:"d-flex"},[s("span",{class:"text-primary h6 mb-0 me-auto"},[s("i",{class:"bi bi-list-ul me-2"}),p(e("Menu"))]),s("span",{class:"text-secondary fst-italic ms-2",style:{"font-size":"0.8rem"}},e("Click on the menu, to add customer order."))],-1)),s("div",Ut,[(u(!0),c(z,null,O(y.menu_list,(l,b)=>(u(),c("li",It,[s("ul",$t,[s("span",At,e(b),1)]),(u(!0),c(z,null,O(l,m=>(u(),c("ul",{onClick:w=>Qs(m),class:"list-group-item list-group-item-action py-1 ps-0 pe-2 mb-0"},[s("div",Et,[s("span",qt,[t[34]||(t[34]=p(e("(")+" ",-1)),s("span",{class:g("text-nowrap text-"+(m.stock-m.sale==0?"danger":m.stock-m.sale<=5?"warning":"dark"))},e(m.sale),3),t[35]||(t[35]=p(" "+e("/")+" ",-1)),s("span",{class:g("text-nowrap text-"+(m.stock==0?"danger":"dark"))},e(m.stock),3),t[36]||(t[36]=p(" "+e(")"),-1))]),s("span",Yt,[s("span",Bt,e(m.name),1),s("span",Ft,e((m.volume||m.mass?" - ":"")+(m.volume?m.volume+m.volume_unit:"")+(m.mass?m.mass+m.mass_unit:"")),1)]),s("span",Ht,e(o(v)(m.price)),1)])],8,jt))),256))]))),256))])])):f("",!0),h.value==2?(u(),c("div",Lt,[t[38]||(t[38]=s("div",{class:"d-flex border-primary border-bottom border-1 pb-2"},[s("span",{class:"h6 mb-0 text-primary-emphasis"},[s("i",{class:"fa-solid fa-user-group me-2"}),p(e("Order List"))]),s("span",{class:"text-secondary"})],-1)),s("div",Wt,[s("div",Gt,[s("span",Jt,e(y.order_list.length==0?"Nothing":"Click to see detail"),1)]),s("li",Kt,[(u(!0),c(z,null,O(y.order_list,l=>{var b,m;return u(),c("ul",{class:g("list-group-item list-group-item-action mb-0 px-0 d-flex "+(((b=n.value)==null?void 0:b.id)==l.id?"bg-primary bg-opacity-10":"")),onClick:()=>{var w;P.value?(n.value=l,n.value.dana_receipt_validate=!1):D("You are not Cashier. This feature only available for listed cashier in Stand "+((w=y.stand)==null?void 0:w.name))}},[p(e((m=l==null?void 0:l.customer)==null?void 0:m.name)+" ",1),s("span",Xt,e(o(Gs)(l==null?void 0:l.created_at)),1),s("i",{onClick:ts(w=>{var N;return lt(d.route("shop.transaction.cancel",l.id),"Confirm to cancel tranasction order from "+((N=l==null?void 0:l.customer)==null?void 0:N.name)+"?")},["prevent"]),class:"bi bi-x-lg btn btn-sm btn-light ms-2"},null,8,Zt)],10,Qt)}),256))])])])):f("",!0)]),s("div",se,[s("div",te,[s("div",ee,[s("button",{class:g("btn btn-sm btn-outline-primary border-0 w-50 "+(h.value==1?"active":"")),onClick:t[2]||(t[2]=l=>h.value=1)},[...t[39]||(t[39]=[s("i",{class:"fa-solid fa-cash-register me-2"},null,-1),p(" "+e("Cashier"),-1)])],2),s("button",{class:g("btn btn-sm btn-outline-primary border-0 w-50 "+(h.value==2?"active":"")),onClick:t[3]||(t[3]=l=>h.value=2)},[...t[40]||(t[40]=[s("i",{class:"fa-solid fa-user-group me-2"},null,-1),p(" "+e("Self-Order"),-1)])],2)])]),h.value==1?(u(),c("div",oe,[t[56]||(t[56]=s("div",{class:"d-flex"},[s("span",{class:"h6 mb-0 text-primary"},e("Point Of Sales"))],-1)),s("div",le,[s("button",{onClick:t[4]||(t[4]=l=>tt()),class:"btn-outline-secondary btn py-1 rounded-0 w-100 border-0"},e("New Transaction"))]),s("div",ae,[s("div",ne,[t[41]||(t[41]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Cashier"),-1)),s("div",ie,[s("span",de,e(o(K).name),1)])]),s("div",re,[t[43]||(t[43]=s("label",{for:"customer",class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Customer"),-1)),s("div",ce,[T(s("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>o(a).customer=l),class:"form-control form-control-sm py-0 w-50 me-2",placeholder:"ex: Timothy",onInput:ot},null,544),[[H,o(a).customer]]),C(o(vt),{class:"bg-white text-nowrap w-100 me-2",options:y.customer_list,label:"phone",reduce:l=>l.id,modelValue:o(a).customer_id,"onUpdate:modelValue":t[6]||(t[6]=l=>o(a).customer_id=l),placeholder:"08xxxxxx",onSearch:et,"onOption:selected":t[7]||(t[7]=()=>{o(a).customer=y.customer_list.find(l=>l.id==o(a).customer_id).name})},null,8,["options","reduce","modelValue"]),s("button",{class:"btn btn-sm btn-outline-primary",onClick:t[8]||(t[8]=()=>{P.value?is(!0):D("You are not listed as Cashier in Stand "+y.stand.name+". Only cashier can add customer.")})},[...t[42]||(t[42]=[s("i",{class:"bi bi-plus-lg"},null,-1)])])]),C(es,{message:o(a).errors.customer_id,class:"mt-2"},null,8,["message"])])]),s("div",ue,[s("div",me,[t[45]||(t[45]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Order"),-1)),s("div",pe,[((i=o(a).order)==null?void 0:i.length)==0?(u(),c("span",be,e("Add an order from menu list."))):f("",!0),s("div",ve,[((x=o(a).order)==null?void 0:x.length)>0?(u(),c("li",ye,[(u(!0),c(z,null,O(o(a).order,(l,b)=>(u(),c("ul",_e,[s("div",fe,[s("button",{onClick:()=>{l.amount>1?(o(a).order[b].amount-=1,o(a).order[b].total=l.price*l.amount):o(a).order.splice(b,1),o(a).subtotal-=l.price},class:"btn btn-sm btn-outline-primary border-0 py-0"},[s("i",{class:g("bi bi-"+(l.amount>1?"dash-lg":"trash3")),style:{"font-size":"0.8rem"}},null,2)],8,he),s("span",xe,e(l.amount),1),s("button",{onClick:()=>{o(a).order[b].amount+=1,o(a).order[b].total=l.price*l.amount,o(a).subtotal+=l.price},class:"btn btn-sm btn-outline-primary border-0 py-0"},[...t[44]||(t[44]=[s("i",{class:"bi bi-plus-lg",style:{"font-size":"0.8rem"}},null,-1)])],8,ge),s("span",we,[s("span",ke,e(l.name),1)]),s("span",Ce,e(o(v)(l.total)),1)])]))),256))])):f("",!0)])])])]),s("div",ze,[s("div",Me,[t[46]||(t[46]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Subtotal"),-1)),s("div",Pe,[s("span",Se,e(o(v)(o(a).subtotal)),1)])]),s("div",Re,[t[48]||(t[48]=s("label",{for:"discount",class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Discount"),-1)),s("div",Ne,[t[47]||(t[47]=s("label",{for:"discount",class:"text-secondary my-auto mx-1"},e("Rp"),-1)),T(s("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=l=>o(a).discount=l),id:"discount",class:"form-control form-control-sm py-0 rounded-2",placeholder:"ex: 2000"},null,512),[[H,o(a).discount]])])]),s("div",Oe,[t[49]||(t[49]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Total Transaction"),-1)),s("div",Te,[s("div",Ve,[s("span",De,e(o(v)(o(a).transaction)),1)])])])]),s("div",Ue,[s("div",Ie,[t[50]||(t[50]=s("label",{for:"payment_method_id",class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Payment Method"),-1)),s("div",$e,[T(s("select",{"onUpdate:modelValue":t[10]||(t[10]=l=>o(a).payment_method_id=l),required:"",id:"payment_method_id",class:"form-select"},[(u(!0),c(z,null,O(y.payment_method_list,l=>(u(),c("option",{value:l.id},e(l.name),9,Ae))),256))],512),[[rt,o(a).payment_method_id]])])]),s("div",je,[t[53]||(t[53]=s("label",{for:"payment_price",class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Payment Price"),-1)),s("div",Ee,[t[52]||(t[52]=s("label",{for:"payment_price",class:"text-secondary my-auto mx-1"},e("Rp"),-1)),T(s("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=l=>o(a).payment_price=l),id:"payment_price",class:"form-control form-control-sm py-0 rounded-2 rounded-end-0",placeholder:"ex: 2000"},null,512),[[H,o(a).payment_price]]),s("div",qe,[t[51]||(t[51]=s("button",{type:"button",class:"btn btn-outline-secondary border-0 px-2 dropdown-toggle rounded-start-0","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),s("ul",Ye,[s("li",{class:"dropdown-item",onClick:t[12]||(t[12]=()=>{o(a).payment_price=o(a).transaction})},e(o(v)(o(a).transaction)),1),(u(),c(z,null,O([5e3,1e4,2e4,5e4,1e5],l=>s("li",{class:"dropdown-item",onClick:()=>{o(a).payment_price=l}},e(o(v)(l)),9,Be)),64))])])])]),s("div",Fe,[t[54]||(t[54]=s("label",{for:"payment_price",class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Payment Change"),-1)),s("div",He,[s("span",Le,e(o(v)(o(a).payment_price-o(a).transaction)),1)])])]),s("div",We,[s("button",{onClick:Xs,class:"btn btn-outline-primary w-50 border-0 rounded-0"},e("Submit")),s("button",{class:"btn btn-sm btn-outline-primary w-50 rounded-0 border-0",onClick:t[13]||(t[13]=()=>{var l,b,m,w,N,j,E,q,Y,B,F;P.value?(r.value.date=o(Js)(new Date,"EE, dd/MM/yy-HH:ii"),r.value.customer=(l=o(a))==null?void 0:l.customer,r.value.customer_id=(b=o(a))==null?void 0:b.customer_id,r.value.order_list=(m=o(a))==null?void 0:m.order,r.value.subtotal=((w=o(a))==null?void 0:w.transaction)+((N=o(a))==null?void 0:N.discount),r.value.discount=(j=o(a))==null?void 0:j.discount,r.value.transaction=(E=o(a))==null?void 0:E.transaction,r.value.payment_method_id=(q=o(a))==null?void 0:q.payment_method_id,r.value.payment_price=(Y=o(a))==null?void 0:Y.payment_price,r.value.payment_change=((B=o(a))==null?void 0:B.payment_price)-((F=o(a))==null?void 0:F.transaction),X(!0)):D("You are not listed as Cashier in Stand "+y.stand.name+". Only cashier can add transaction.")})},[...t[55]||(t[55]=[s("i",{class:"bi bi-receipt-cutoff me-2"},null,-1),p(" "+e("Receipt"),-1)])])])])):f("",!0),h.value==2?(u(),c("div",Ge,[t[70]||(t[70]=s("div",{class:"d-flex pb-2 border-bottom border-primary"},[s("span",{class:"text-primary-emphasis h6 mb-0"},[s("i",{class:"bi bi-info-circle-fill me-1"}),p(" "+e("Order Detail"))])],-1)),s("div",Je,[s("div",Ke,[t[58]||(t[58]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},[s("i",{class:"bi bi-person-fill me-1"}),p(" "+e("Customer"))],-1)),s("div",null,[s("span",Qe,e(((R=(S=n.value)==null?void 0:S.customer)==null?void 0:R.name)??"Unselected"),1),s("a",{target:"_blank",href:"https://wa.me/62"+((I=(U=n.value)==null?void 0:U.customer)!=null&&I.phone.startsWith("0")?(A=($=n.value)==null?void 0:$.customer)==null?void 0:A.phone.slice(1):(ws=(gs=n.value)==null?void 0:gs.customer)==null?void 0:ws.phone)},[...t[57]||(t[57]=[s("i",{class:"bi bi-chat-dots card-bg-hover text-primary px-2"},null,-1)])],8,Xe)])]),s("div",Ze,[t[59]||(t[59]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},[s("i",{class:"bi bi-calendar2-check me-1"}),p(" "+e("Order Date"))],-1)),s("div",null,[s("span",so,e(o(Gs)(((ks=n.value)==null?void 0:ks.created_at)??new Date)),1)])]),s("div",to,[t[60]||(t[60]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},[s("i",{class:"bi bi-calendar2-check me-1"}),p(" "+e("Send Option"))],-1)),s("div",null,[s("span",eo,e(((Cs=n.value)==null?void 0:Cs.send_option)=="delivery"?"Delivery":"Pick Up"),1)])])]),t[71]||(t[71]=s("div",{class:"d-flex mt-3"},[s("span",{class:"text-secondary",style:{"font-size":"0.8rem"}},[s("i",{class:"fa-solid fa-utensils me-1"}),p(" "+e("Menu List"))])],-1)),s("div",oo,[s("li",lo,[(u(!0),c(z,null,O((zs=n.value)==null?void 0:zs.order,l=>{var b;return u(),c("ul",ao,[s("span",no,e("( "+(l==null?void 0:l.amount)+" )"),1),s("span",io,e((b=l==null?void 0:l.menu)==null?void 0:b.name),1),s("span",ro,e(o(v)(l.menu.price)),1)])}),256))])]),s("div",co,[s("div",uo,[t[61]||(t[61]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Subtotal"),-1)),s("div",null,[s("span",mo,e(o(v)((((Ms=n.value)==null?void 0:Ms.transaction)??0)+(((Ps=n.value)==null?void 0:Ps.discount)??0))),1)])]),s("div",po,[t[63]||(t[63]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Discount"),-1)),s("div",null,[s("span",bo,e(o(v)(((Ss=n.value)==null?void 0:Ss.discount)??0)),1),((Rs=n.value)==null?void 0:Rs.voucher_id)>0?(u(),c("span",vo,[t[62]||(t[62]=s("i",{class:"fa-solid fa-ticket me-1"},null,-1)),p(e(((Os=(Ns=n.value)==null?void 0:Ns.voucher)==null?void 0:Os.code)??0),1)])):f("",!0)])]),s("div",yo,[t[64]||(t[64]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Total Transaction"),-1)),s("div",null,[s("span",_o,e(o(v)(((Ts=n.value)==null?void 0:Ts.transaction)??0)),1)])]),s("div",fo,[t[66]||(t[66]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Payment Method"),-1)),s("div",ho,[s("span",xo,e(((Vs=y.payment_method_list.find(l=>{var b;return l.id==((b=n.value)==null?void 0:b.payment_method_id)}))==null?void 0:Vs.name)??"Unset"),1),((Ds=n.value)==null?void 0:Ds.payment_method_id)==2?(u(),c("button",go,[t[65]||(t[65]=s("i",{class:"bi bi-image"},null,-1)),((Us=n.value)==null?void 0:Us.dana_receipt_validate)==!1?(u(),c("i",wo)):f("",!0),((Is=n.value)==null?void 0:Is.dana_receipt_validate)==!0?(u(),c("i",ko)):f("",!0)])):f("",!0)])]),s("div",Co,[t[67]||(t[67]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Payment Price"),-1)),s("div",null,[s("span",zo,e(o(v)((($s=n.value)==null?void 0:$s.payment_price)??0)),1)])]),s("div",Mo,[t[68]||(t[68]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Payment Change"),-1)),s("div",null,[s("span",Po,e(o(v)((((As=n.value)==null?void 0:As.payment_price)??0)-(((js=n.value)==null?void 0:js.transaction)??0))),1)])])]),s("div",So,[s("div",{class:"w-50 p-0 m-0",onClick:t[15]||(t[15]=()=>{var l,b;(l=V.value)!=null&&l.print||D("Please print the receipt first before submit the transaction. After transaction submit, you can not print the receipt in this page and must go to Stand "+((b=y.stand)==null?void 0:b.name)+" page.")})},[s("button",{disabled:!((Es=V.value)!=null&&Es.print),class:"btn btn-sm btn-outline-primary w-100 rounded-0 border-0",onClick:t[14]||(t[14]=ts(()=>{var l;P.value?(st((l=n.value)==null?void 0:l.id),n.value=null):D("You are not listed as Cashier in Stand "+y.stand.name+". Only cashier can add transaction.")},["prevent"]))},e("Submit"),8,Ro)]),s("div",{class:"w-50 p-0 m-0",onClick:t[17]||(t[17]=()=>{var l;(l=n.value)!=null&&l.id||M.value.showToast("warning","Please select order to print the receipt.")})},[s("button",{disabled:!((qs=n.value)!=null&&qs.id),class:"btn btn-sm btn-outline-primary w-100 rounded-0 border-0",onClick:t[16]||(t[16]=ts(()=>{var l,b,m,w,N,j,E,q,Y,B,F,Hs;P.value?(r.value.date=o(Js)(new Date((l=n.value)==null?void 0:l.created_at),"EE, dd/MM/yy-HH:ii"),r.value.customer=(b=n.value)==null?void 0:b.customer.name,r.value.customer_id=(m=n.value)==null?void 0:m.customer_id,r.value.order_list=(w=n.value)==null?void 0:w.order,r.value.subtotal=((N=n.value)==null?void 0:N.transaction)+((j=n.value)==null?void 0:j.discount),r.value.discount=(E=n.value)==null?void 0:E.discount,r.value.transaction=(q=n.value)==null?void 0:q.transaction,r.value.payment_method_id=(Y=n.value)==null?void 0:Y.payment_method_id,r.value.payment_price=(B=n.value)==null?void 0:B.payment_price,r.value.payment_change=((F=n.value)==null?void 0:F.payment_price)-((Hs=n.value)==null?void 0:Hs.transaction),X(!0)):D("You are not listed as Cashier in Stand "+y.stand.name+". Only cashier can add transaction.")},["prevent"]))},[s("i",{class:g("bi me-2 bi-"+(((Ys=V.value)==null?void 0:Ys.id)==((Bs=n.value)==null?void 0:Bs.id)&&((Fs=V.value)!=null&&Fs.print)?"check2-square":"square"))},null,2),t[69]||(t[69]=p(" "+e("Receipt"),-1))],8,No)])])])):f("",!0)])])])]}),_:1}),P.value?(u(),c("div",Oo,[s("div",To,[s("div",Vo,[s("div",Do,[t[73]||(t[73]=s("span",{class:"modal-title fs-5 text-primary-emphasis"},[s("i",{class:"bi bi-receipt-cutoff pe-2"}),p(" "+e("Receipt"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:t[18]||(t[18]=i=>X(!1))},[...t[72]||(t[72]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("div",Uo,[s("div",{class:"bg-white watermark-background",ref_key:"receiptContentRef",ref:Ks,style:{background:"url('/storage/local/images/shop/brand/logo_watermark.png')","background-repeat":"repeat","background-size":"25mm"}},[t[90]||(t[90]=ct('<div class="p-3" style="background-color:#412f55;"><div class="d-flex"><div class="mx-auto"><img src="/storage/local/images/shop/brand/blaterian_logo.png" alt="image" class="" style="height:15mm;"><img src="/storage/local/images/shop/brand/blaterian_text.png" alt="image" class="" style="height:15mm;"></div></div></div>',1)),s("div",Io,[s("div",$o,[s("div",Ao,[t[74]||(t[74]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Date-Time"),-1)),s("div",jo,[s("span",Eo,e((J=r.value)==null?void 0:J.date),1)])]),s("div",qo,[t[75]||(t[75]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Place"),-1)),s("div",Yo,[s("span",Bo,e(y.stand.place),1)])]),s("div",Fo,[t[76]||(t[76]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Customer"),-1)),s("div",Ho,[s("span",Lo,e((ds=r.value)==null?void 0:ds.customer),1)])]),s("div",Wo,[t[77]||(t[77]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Cashier"),-1)),s("div",Go,[s("span",Jo,e(o(K).name),1)])])]),t[87]||(t[87]=s("div",{class:"border-1 border-secondary-subtle mt-3",style:{"border-style":"dashed"}},null,-1)),s("div",Ko,[t[78]||(t[78]=s("span",{class:"d-block h6 text-primary-emphasis"},e("Order Items"),-1)),(u(!0),c(z,null,O((rs=r.value)==null?void 0:rs.order_list,i=>{var x,S,R;return u(),c("div",Qo,[s("div",Xo,[s("span",Zo,e("("+i.amount+")"),1),s("span",sl,e(i!=null&&i.menu?(x=i==null?void 0:i.menu)==null?void 0:x.name:i.name),1)]),s("div",tl,[s("span",el,e(o(v)(i!=null&&i.menu?(S=i==null?void 0:i.menu)==null?void 0:S.price:i.price)),1),s("span",ol,e(o(v)(i!=null&&i.menu?((R=i==null?void 0:i.menu)==null?void 0:R.price)*(i==null?void 0:i.amount):i.total)),1)])])}),256))]),t[88]||(t[88]=s("div",{class:"border-1 border-secondary-subtle mt-3",style:{"border-style":"dashed"}},null,-1)),s("div",ll,[t[82]||(t[82]=s("span",{class:"d-block h6 text-primary-emphasis"},e("Total"),-1)),s("div",al,[s("div",nl,[t[79]||(t[79]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Subtotal"),-1)),s("div",il,[s("span",dl,e(o(v)(((cs=r.value)==null?void 0:cs.subtotal)??0)),1)])]),s("div",rl,[t[80]||(t[80]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Discount"),-1)),s("div",cl,[s("span",ul,e(o(v)(r.value.discount)),1)])]),s("div",ml,[t[81]||(t[81]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Total"),-1)),s("div",pl,[s("span",bl,e(o(v)(r.value.transaction)),1)])])])]),t[89]||(t[89]=s("div",{class:"border-1 border-secondary-subtle mt-3",style:{"border-style":"dashed"}},null,-1)),s("div",vl,[t[86]||(t[86]=s("span",{class:"d-block h6 text-primary-emphasis"},e("Payment"),-1)),s("div",yl,[s("div",_l,[t[83]||(t[83]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Method"),-1)),s("div",fl,[s("span",hl,e((us=y.payment_method_list.find(i=>{var x;return i.id==((x=r.value)==null?void 0:x.payment_method_id)}))==null?void 0:us.name),1)])]),s("div",xl,[t[84]||(t[84]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Price"),-1)),s("div",gl,[s("span",wl,e(o(v)((ms=r.value)==null?void 0:ms.payment_price)),1)])]),s("div",kl,[t[85]||(t[85]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Change"),-1)),s("div",Cl,[s("span",zl,e(o(v)(((ps=r.value)==null?void 0:ps.payment_price)-((bs=r.value)==null?void 0:bs.transaction))),1)])])])])]),t[91]||(t[91]=s("div",{style:{"background-color":"#412f55","border-top-style":"dashed","border-top-color":"#efc55c","border-top-width":"0.1rem"}},[s("div",{class:"d-flex"},[s("span",{class:"mx-auto my-2",style:{"font-size":"0.8rem",color:"#efc55c"}},[s("i",{class:"bi bi-instagram me-2"}),p(" "+e("blaterian.id"))])])],-1))],512)]),s("div",Ml,[s("div",Pl,[s("div",Sl,[T(s("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=i=>as.value=i)},null,512),[[Ws,as.value]]),t[92]||(t[92]=s("div",{class:"d-flex w-100"},[s("span",{class:"ms-2",style:{"font-size":"0.8rem"}},e("Download Receipt")),s("i",{class:"bi bi-download ms-2 text-primary",style:{"font-size":"0.8rem"}})],-1))]),s("div",Rl,[T(s("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=i=>ns.value=i)},null,512),[[Ws,ns.value]]),t[93]||(t[93]=s("div",{class:"d-flex w-100"},[s("span",{class:"ms-2",style:{"font-size":"0.8rem"}},e("Send Whatsapp")),s("i",{class:"bi bi-whatsapp ms-2 text-success",style:{"font-size":"0.8rem"}})],-1))])]),s("button",{type:"submit",class:"btn btn-sm btn-primary w-100",onClick:t[21]||(t[21]=()=>{var i;V.value.id=(i=n.value)==null?void 0:i.id,V.value.print=!0})},[...t[94]||(t[94]=[s("i",{class:"bi bi-printer me-2"},null,-1),p(" "+e("Print Receipt"),-1)])])])])])])):f("",!0),P.value?(u(),c("div",Nl,[s("div",Ol,[s("div",Tl,[s("div",Vl,[t[96]||(t[96]=s("span",{class:"modal-title fs-5 text-primary-emphasis"},[s("i",{class:"bi bi-person-plus pe-2"}),p(" "+e("New Customer"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:t[22]||(t[22]=i=>is(!1))},[...t[95]||(t[95]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("div",Dl,[t[97]||(t[97]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Name"),-1)),T(s("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=i=>o(k).name=i),class:"form-control form-control-sm",placeholder:"ex: Timothy"},null,512),[[H,o(k).name]]),C(es,{message:o(k).errors.name,class:"mt-2"},null,8,["message"]),t[98]||(t[98]=s("span",{class:"text-secondary d-block mt-3",style:{"font-size":"0.8rem"}},e("Phone"),-1)),T(s("input",{type:"tel","onUpdate:modelValue":t[24]||(t[24]=i=>o(k).phone=i),class:"form-control form-control-sm",placeholder:"08xxxxxxx"},null,512),[[H,o(k).phone]]),C(es,{message:o(k).errors.phone,class:"mt-2"},null,8,["message"])]),s("div",{class:"modal-footer py-1 px-2"},[s("button",{class:"btn btn-sm btn-primary w-100",onClick:Zs},e("Add Customer"))])])])])):f("",!0),P.value?(u(),c("div",Ul,[s("div",Il,[s("div",$l,[s("div",Al,[s("span",jl,[(u(),c("svg",El,[...t[99]||(t[99]=[s("use",{href:"/icons.svg#dana"},null,-1)])])),t[100]||(t[100]=p(" "+e("Dana Transfer Receipt"),-1))]),t[101]||(t[101]=s("button",{type:"button",class:"btn btn-sm ms-auto","data-bs-dismiss":"modal"},[s("i",{class:"bi bi-x-lg"})],-1))]),s("div",ql,[s("div",Yl,[s("img",{src:"/storage/images/receipt/stand/income/"+((vs=n.value)==null?void 0:vs.receipt_income),alt:"image",style:{width:"100%","max-height":"80vh"}},null,8,Bl)]),s("div",Fl,[t[102]||(t[102]=s("span",{class:"text-secondary"},e("Customer"),-1)),s("span",Hl,e((_s=(ys=n.value)==null?void 0:ys.customer)==null?void 0:_s.name),1)]),s("div",Ll,[t[103]||(t[103]=s("span",{class:"text-secondary"},e("Payment Price"),-1)),s("span",Wl,e(o(v)((fs=n.value)==null?void 0:fs.payment_price)),1)])]),s("div",Gl,[s("button",{class:g("btn btn-sm w-100 border-0 btn-outline-primary "+((hs=n.value)!=null&&hs.dana_receipt_validate?"active":"")),"data-bs-dismiss":"modal",onClick:t[25]||(t[25]=()=>{var i,x,S,R,U,I,$,A;n.value.dana_receipt_validate=!((i=n.value)!=null&&i.dana_receipt_validate),(x=n.value)!=null&&x.dana_receipt_validate?(M.value.showToast("info","Order from "+((R=(S=n.value)==null?void 0:S.customer)==null?void 0:R.name)+" with Payment Price "+o(v)((U=n.value)==null?void 0:U.transaction)+" is Validated."),M.value.showToast("info","Please continue with the Payment Validation form. ")):(M.value.showToast("warning","Order from "+(($=(I=n.value)==null?void 0:I.customer)==null?void 0:$.name)+" with Payment Price "+o(v)((A=n.value)==null?void 0:A.transaction)+" is Unvalidated."),M.value.showToast("info","You can chat the customer if there is any mistake."))})},[s("i",{class:g("bi me-2 bi-"+((xs=n.value)!=null&&xs.dana_receipt_validate?"check-square ":"square "))},null,2),t[104]||(t[104]=p(" "+e("Validate"),-1))],2)])])])])):f("",!0),C(mt,{ref_key:"toastNotifRef",ref:M},null,512)],64)}}};export{na as default};
