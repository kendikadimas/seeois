import{s as F,r as m,u as V,C as U,G as A,q as B,c as u,o as f,b as i,g as j,k as M,a as e,d as o,h as D,t as a,j as v,n as y,F as S,y as L,w as E,f as g,i as h,A as R}from"./app-CjkTfAbl.js";import{S as T}from"./StaffLayout-rnZudT8v.js";import{_ as b}from"./InputError-91VUPa06.js";import{_ as P}from"./Notif-bk3Hff9l.js";import{_ as I}from"./ModalConfirmation-B5c1ThWe.js";import{C as G}from"./vue-select-B7uxHtH9.js";import{c as W}from"./utils-Dr-qEmMV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-DFpGNh8k.js";const q={class:"container me-lg-0 mx-auto mb-5"},H={class:"row mt-4"},J={class:"col-12"},K={class:"card shadow-sm p-lg-3 p-2"},Q={class:"d-flex"},X={class:"d-flex mx-auto"},Y={class:"row gx-4 mt-4 mt-lg-5"},Z={class:"col-lg-4 col-12"},ee=["href"],te={class:"card card-bg-hover p-3 mb-3 mb-lg-4"},se={class:"d-flex",style:{"font-size":"0.8rem"}},oe={class:"me-auto"},le={class:"h5 text-primary-emphasis me-auto"},ae={key:0,class:"modal fade",id:"newStandModal",tabindex:"-1","aria-labelledby":"newStandModal"},ne={class:"modal-dialog modal-dialog-centered"},ie={class:"modal-content shadow mx-3"},re={class:"modal-header py-1 ps-3 pe-2"},de={class:"modal-body bg-light"},ce={class:"row justify-content-center"},me={class:"col-8 col-lg-7"},ue={class:"row justify-content-center mt-2"},fe={class:"col-8 col-lg-7"},be={class:"row justify-content-center mt-2"},pe={class:"col-8 col-lg-7"},ve={class:"row justify-content-center mt-2"},ye={class:"col-8 col-lg-7"},ge=["value"],we={class:"row justify-content-center mt-2"},_e={class:"col-8 col-lg-7"},Le={__name:"Stand",props:{staff_list:Array,stand_list:Array,filter:Object,notif:Object,errors:Object},setup(n){const d=n,C=F().props.auth.user,N=m("Stand"),$=m(null),w=m(null);m("placeholder");const p=m(null),c=V({category:d.filter.category,order:d.filter.order,active:d.filter.active}),l=V({name:null,pic_id:null,place:null,date:null,type:0});function _(r){r&&(c.order=c.category==r?c.order=="asc"?"desc":"asc":"desc",c.category=r,c.keyword=null),c.post(route("food.stand.filter"))}function x(r){if(p.value==null){const t=document.getElementById("newStandModal");p.value=bootstrap.Modal.getOrCreateInstance(t)}r?p.value.show():p.value.hide()}function O(){l.post(route("food.stand.insert"),{onSuccess:()=>{x(!1),l.reset()}})}const z=m(window.innerWidth>=768),k=()=>{z.value=window.innerWidth>=768,window.addEventListener("resize",k)};return U(()=>{window.addEventListener("resize",k),d.notif&&w.value.showToast(d.notif.type,d.notif.message)}),A(()=>{window.removeEventListener("resize",k)}),B(()=>d.notif,r=>{const t=r;w.value.showToast(t.type,t.message)}),(r,t)=>(f(),u(S,null,[i(T,null,{header:M(()=>[v(a(N.value),1)]),default:M(()=>[i(o(D),{title:N.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),i(I,{ref_key:"modalConfirmationRef",ref:$},null,512),e("div",q,[e("div",H,[e("div",J,[e("div",K,[e("div",Q,[e("div",X,[t[13]||(t[13]=e("span",{class:"text-primary border-end border-secondary-subtle border-3 pe-3 me-3 my-auto"},a("Filter"),-1)),e("button",{onClick:t[0]||(t[0]=s=>_("name")),class:"btn text-nowrap btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0"},[t[11]||(t[11]=v(a("Name")+" ",-1)),e("i",{class:y("bi bi-arrow-"+(n.filter.category=="name"?n.filter.order=="asc"?"up":"down":"up"))},null,2)]),e("button",{onClick:t[1]||(t[1]=s=>_("date")),class:"btn text-nowrap btn-sm btn-outline-secondary ms-2 border-1 rounded-2 border-secondary-subtle py-0"},[t[12]||(t[12]=v(a("Date")+" ",-1)),e("i",{class:y("bi bi-arrow-"+(n.filter.category=="date"?n.filter.order=="asc"?"up":"down":"up"))},null,2)]),e("button",{onClick:t[2]||(t[2]=()=>{o(c).active=!n.filter.active,_()}),class:y("btn text-nowrap btn-sm ms-2 border-1 rounded-2 border-secondary-subtle py-0 btn-outline-success "+(n.filter.active==!0?"active":""))},a(n.filter.active==!0?"Active":"All Status"),3)]),o(C).roles_id==3?(f(),u("button",{key:0,class:"btn btn-sm btn-outline-primary border-0 py-0",onClick:t[3]||(t[3]=s=>x(!0))},[...t[14]||(t[14]=[e("i",{class:"bi bi-plus-lg d-lg-none"},null,-1),e("span",{class:"d-none d-lg-block"},a("New Stand"),-1)])])):j("",!0)])])])]),e("div",Y,[(f(!0),u(S,null,L(n.stand_list,s=>(f(),u("div",Z,[e("a",{href:r.route("food.stand.detail",s.id),class:"text-decoration-none"},[e("div",te,[e("div",se,[e("span",oe,a(o(W)(s.date)),1),e("span",{class:y("d-block "+(s.menu_lock>0&&s.sale_validation==0?"text-success":"text-secondary"))},a(s.menu_lock>0&&s.sale_validation==0?"active":"inactive"),3)]),e("span",le,a("Stand "+s.name),1)])],8,ee)]))),256))])])]),_:1}),o(C).roles_id==3?(f(),u("div",ae,[e("div",ne,[e("div",ie,[e("div",re,[t[16]||(t[16]=e("span",{class:"modal-title fs-5 text-primary-emphasis"},[e("i",{class:"bi bi-shop pe-2"}),v(" "+a("New Stand"))],-1)),e("button",{type:"button",class:"btn btn-sm ms-auto",onClick:t[4]||(t[4]=s=>x(!1))},[...t[15]||(t[15]=[e("i",{class:"bi bi-x-lg"},null,-1)])])]),e("form",{onSubmit:t[10]||(t[10]=E(s=>O(),["prevent"]))},[e("div",de,[e("div",ce,[t[17]||(t[17]=e("div",{class:"col-4 col-lg-3"},[e("label",{for:"stand_name",class:"form-label d-inline-block"},a("Name"))],-1)),e("div",me,[g(e("input",{type:"text",class:"form-control form-control-sm",id:"stand_name","onUpdate:modelValue":t[5]||(t[5]=s=>o(l).name=s),placeholder:"Blaterian 1"},null,512),[[h,o(l).name]]),i(b,{message:o(l).errors.name,class:"mt-2"},null,8,["message"])])]),e("div",ue,[t[18]||(t[18]=e("div",{class:"col-4 col-lg-3"},[e("label",{for:"stand_place",class:"form-label d-inline-block"},a("Place"))],-1)),e("div",fe,[g(e("input",{type:"text",class:"form-control form-control-sm",id:"stand_place","onUpdate:modelValue":t[6]||(t[6]=s=>o(l).place=s),placeholder:"Gedung F"},null,512),[[h,o(l).place]]),i(b,{message:o(l).errors.place,class:"mt-2"},null,8,["message"])])]),e("div",be,[t[19]||(t[19]=e("div",{class:"col-4 col-lg-3"},[e("label",{for:"stand_date",class:"form-label d-inline-block"},a("Date"))],-1)),e("div",pe,[g(e("input",{type:"date",class:"form-control form-control-sm",id:"stand_date","onUpdate:modelValue":t[7]||(t[7]=s=>o(l).date=s)},null,512),[[h,o(l).date]]),i(b,{message:o(l).errors.date,class:"mt-2"},null,8,["message"])])]),e("div",ve,[t[20]||(t[20]=e("div",{class:"col-4 col-lg-3"},[e("label",{for:"stand_type",class:"form-label d-inline-block"},a("Type"))],-1)),e("div",ye,[g(e("select",{id:"stand_type",class:"form-select form-select-sm","onUpdate:modelValue":t[8]||(t[8]=s=>o(l).type=s)},[(f(),u(S,null,L([{value:0,name:"Live"},{value:1,name:"Pre-Order"},{value:2,name:"Live and Pre-Order"}],s=>e("option",{value:s.value},a(s.name),9,ge)),64))],512),[[R,o(l).type]]),i(b,{message:o(l).errors.type,class:"mt-2"},null,8,["message"])])]),e("div",we,[t[21]||(t[21]=e("div",{class:"col-4 col-lg-3"},[e("label",{for:"stand_pic",class:"form-label d-inline-block"},a("In Charge"))],-1)),e("div",_e,[i(o(G),{class:"bg-white text-nowrap",options:n.staff_list,label:"name",reduce:s=>s.id,modelValue:o(l).pic_id,"onUpdate:modelValue":t[9]||(t[9]=s=>o(l).pic_id=s),placeholder:"Select staff"},null,8,["options","reduce","modelValue"]),i(b,{message:o(l).errors.pic_id,class:"mt-2"},null,8,["message"])])])]),t[22]||(t[22]=e("div",{class:"modal-footer p-1"},[e("button",{type:"submit",class:"btn btn-sm btn-primary"},a("Create"))],-1))],32)])])])):j("",!0),i(P,{ref_key:"toastNotifRef",ref:w},null,512)],64))}};export{Le as default};
