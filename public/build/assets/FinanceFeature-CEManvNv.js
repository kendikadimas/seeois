import{Y as jt,m as Nt,r as h,k as lt,u as H,p as Bt,E as Ot,q as Tt,g as o,o as n,a as c,i as a,w as _,b as t,d as l,h as Et,n as R,t as s,T as g,j as w,J as B,X as O,K as ct,F as M,z as D,f as V,B as ot,v as Q,e as ut,l as At,x as Lt}from"./app-DU0LC3y2.js";import{_ as It}from"./StaffLayout-tzEsq15f.js";import{_ as $}from"./InputError-CJjjmRN2.js";import{_ as Wt}from"./Notif-BO8H3HAM.js";import{_ as qt}from"./ModalConfirmation-BX3I8pcX.js";/* empty css            */function Jt(i,f){return jt(i,f==null?void 0:f.in).getMonth()}const Kt={class:"container me-lg-0 mx-auto mb-5"},Xt={class:"row gx-2 mt-4 d-lg-none"},Yt={class:"col-12"},Gt={class:"card p-2 bg-light"},Ht={class:"d-flex"},Qt={class:"row gx-4 mt-4"},Zt={class:"col-12"},te={class:"card p-3 shadow-sm bg-white"},ee={class:"d-flex text-primary-emphasis h5"},se={class:"d-lg-none"},le={key:0},oe={key:0},ne={key:0,class:"mb-2"},ie={key:0},ae={class:"row gx-2"},re={class:"col-lg-10 col-12"},de={class:"row g-2"},ce={class:"col-6 col-lg-3"},ue={class:"text-dark"},me={class:"col-6 col-lg-3"},be={class:"text-dark"},ve={class:"col-6 col-lg-3"},fe={class:"text-dark"},pe={class:"col-6 col-lg-3"},_e=["href"],ye={class:"row"},ge={class:"col"},he={class:"d-flex mt-2 pt-1",style:"font-size: 0.8rem;"},xe={class:"ms-0 my-auto ms-lg-auto me-2 text-secondary"},ke={key:0},we={class:"row gx-2"},Ce={class:"col-12 col-lg-10"},ze={class:"row g-2"},Se={class:"col-12 col-lg-3"},Le={class:"row g-2"},Ue={class:"col-6 col-lg-12"},Me={class:"text-dark"},Ve={class:"col-6 col-lg-12"},Pe=["href"],Re={key:1},De={class:"col-12 col-lg-9"},$e={class:"d-block mb-2"},Fe={class:"text-secondary d-block",style:"font-size: 0.8rem;"},je={class:"row gx-2"},Ne={class:"col-4"},Be={class:"col-4"},Oe={class:"col-4 scroll-x-hidden"},Te={class:"text-nowrap"},Ee={class:"row"},Ae={class:"col"},Ie={class:"d-flex mt-2 pt-1",style:"font-size: 0.8rem;"},We={class:"ms-0 my-auto ms-lg-auto me-lg-2 text-secondary"},qe={class:"card border-top border-0 border-primary rounded-top-0"},Je={class:"row g-2 mt-2"},Ke={class:"col-12 col-lg-3"},Xe=["href"],Ye={class:"text-nowrap"},Ge={key:0,style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},He={class:"col-12 col-lg-9"},Qe={class:"row gx-4"},Ze={key:0,class:"col-12 col-lg-6"},ts={class:"row g-2"},es={class:"col-12"},ss={class:"col-12"},ls={key:0,class:"text-dark d-block"},os={key:1,class:"d-block text-dark fst-italic"},ns={class:"col-12"},is={class:""},as=["onClick"],rs={key:0,class:"bi bi-circle-fill position-absolute top-0 start-100 translate-middle text-danger",style:"font-size: 0.5rem;"},ds={key:1,class:"text-secondary"},cs={key:0,class:"col-12"},us={class:"card mt-2 bg-light"},ms={class:"row mt-2"},bs={class:"col-12 d-flex"},vs=["href"],fs={class:"col-12"},ps={class:"card border-1 m-2"},_s=["src"],ys={key:0,class:"d-flex mb-1"},gs={key:1,class:"d-flex text-center w-100 px-2 mb-1"},hs={class:"fw-light text-secondary",style:"font-size: 0.8rem;"},xs={key:0,class:"scroll-x-hidden"},ks={class:"text-nowrap"},ws={class:"fw-light text-secondary ms-auto",style:"font-size: 0.8rem;"},Cs={key:0,class:"col-12 col-lg-6"},zs={class:"row g-2"},Ss={class:"col-12"},Ls={key:0,class:"mt-1"},Us={key:1,class:"input-group input-group-sm bg-light border rounded-2 mt-1"},Ms=["value"],Vs={class:"col-12"},Ps={key:0,class:"col-12"},Rs={class:"rounded-2 border"},Ds={class:"collapse p-3",id:"batchLevelAssignmentDiv"},$s={class:"mb-3 d-block"},Fs={class:"input-group input-group-sm bg-light border border-1 border-secondary-subtle rounded-2"},js=["value"],Ns={class:"row gx-4 mt-4"},Bs={class:"col-12 col-lg-6"},Os={key:0,class:"card sm p-3"},Ts={class:"d-flex mt-2"},Es={class:"input-group"},As={class:"scroll-container-2 scroll-container-lg-2"},Is={class:"list-group list-group-flush"},Ws={key:0,class:"list-group-item list-group-item-action"},qs=["onClick"],Js={class:"mx-2 d-flex"},Ks=["value"],Xs={key:1,class:"d-flex"},Ys={key:0,class:"text-danger ms-auto border-danger-subtle border px-2 rounded-2 text-nowrap d-flex",style:{"font-size":"0.8rem"}},Gs={key:2,class:"text-secondary ms-2"},Hs={key:0,class:"modal fade",id:"modalSettingContribution",tabindex:"-1","aria-labelledby":"modalSettingContribution"},Qs={class:"modal-dialog modal-dialog-centered"},Zs={class:"modal-content shadow mx-3 text-dark"},tl={class:"modal-body bg-light pt-1"},el={class:"row justify-content-center mb-2"},sl={class:"col-8 col-lg-7"},ll={class:"row justify-content-center mb-2"},ol={class:"col-8 col-lg-7"},nl=["value"],il={class:"row justify-content-center"},al={class:"col-8 col-lg-7"},rl=["value"],dl={key:1,class:"modal fade",id:"modalSettingPayroll",tabindex:"-1","aria-labelledby":"modalSettingPayroll"},cl={class:"modal-dialog modal-lg modal-dialog-centered"},ul={class:"modal-content shadow mx-3 text-dark"},ml={class:"modal-header py-1 ps-3 pe-2"},bl={class:"modal-body bg-light pt-3"},vl={class:"row justify-content-center mb-3"},fl={class:"col-12 col-lg-8"},pl={class:"input-group input-group-sm bg-secondary rounded-2 ps-2"},_l={class:"row justify-content-center mb-3"},yl={class:"col-12 col-lg-8"},gl={key:0,class:"d-flex mb-2"},hl={class:"me-2"},xl={class:"input-group input-group-sm bg-secondary text-white rounded-2 px-2"},kl=["for"],wl=["id","onUpdate:modelValue"],Cl=["id","onUpdate:modelValue"],zl={class:"d-flex"},Sl={class:"w-100"},Ll={class:"w-100"},Ul={class:"d-flex ms-2 my-auto"},Ml={class:"text-nowrap text-primary-emphasis"},Vl=["onClick"],Pl={class:"d-block mt-2"},Rl={key:0,class:"d-flex my-auto text-danger",style:{"font-size":"0.8rem"}},Dl={key:1,class:"d-flex my-auto text-danger",style:{"font-size":"0.8rem"}},Tl={__name:"FinanceFeature",props:{default_contribution_id:Number,contribution_config:Object,contribution_users:Array,payroll_detail:Array,payroll_balance:Object,filter:Object,notif:Object,errors:Object},setup(i){var ht,xt,kt;const f=i,P=Nt().props.auth.user,mt=h("Finance Feature"),nt=h(null),it=h(null);h("placeholder");const bt=new Date,Z=h(null),tt=h(null),T=lt(()=>new Date().getMonth()+1),et=h(!1),vt=lt(()=>et.value?"up":"down"),E=h(!1);h(!1);const x=h(1),st=h(null),m=lt(()=>{var r;return(r=f.contribution_users.find(e=>e.id==j.value))==null?void 0:r.contribution.receipt.find(e=>e.id==st.value)}),j=h(null),b=lt(()=>f.contribution_users.find(r=>r.id==j.value)),C=H({price:((ht=f.contribution_config)==null?void 0:ht.financial_id)>0?f.contribution_config.price:0,start:((xt=f.contribution_config)==null?void 0:xt.financial_id)>0?f.contribution_config.start:new Date().getMonth(),end:((kt=f.contribution_config)==null?void 0:kt.financial_id)>0?f.contribution_config.period+f.contribution_config.start-1:new Date().getMonth()}),at=H({keyword:f.filter.contribution.keyword}),v=H({balance:f.payroll_balance.balance,level_list:f.payroll_detail}),A=H({user_id:null,level:null}),z=H({staff_id_list:[],level:""});function Ut(){C.post(route("contribution.settings"),{onSuccess:()=>{_t(!1),C.reset()},onError:r=>{for(let e in r)it.value.showToast("warning",r[e])}})}function Mt(){v.post(route("payroll.settings"),{onSuccess:()=>{rt(!1)}})}function ft(){A.post(route("payroll.update.single"))}function pt(){z.post(route("payroll.update.batch"))}function _t(r){if(Z.value==null){const e=document.getElementById("modalSettingContribution");Z.value=bootstrap.Modal.getOrCreateInstance(e)}r?Z.value.show():Z.value.hide()}function rt(r){if(tt.value==null){const e=document.getElementById("modalSettingPayroll");tt.value=bootstrap.Modal.getOrCreateInstance(e)}r?tt.value.show():tt.value.hide()}function Vt(r){j.value=r}function yt(r){st.value=r}function Pt(){at.post(route("contribution.filter"))}function Rt(){v.level_list.push({level:f.payroll_detail.length>0?Math.max(...v.level_list.filter(r=>r.deleted_at==null).map(r=>r.level))+1:0,salary:0,deleted_at:null})}function Dt(r){v.level_list[r].id>0?v.level_list[r].deleted_at=bt:v.level_list.splice(r,1)}function $t(){v.reset()}function Ft(r,e){nt.value?nt.value.showModal(r,e):console.error("modalConfirmationRef is null")}const I=h(window.innerWidth>=768),gt=()=>{I.value=window.innerWidth>=768};return Bt(()=>{window.addEventListener("resize",gt)}),Ot(()=>{window.removeEventListener("resize",gt)}),Tt(()=>f.notif,r=>{const e=r;it.value.showToast(e.type,e.message)}),(r,e)=>(n(),o(M,null,[c(It,null,{header:_(()=>[w(s(mt.value),1)]),default:_(()=>{var d,y,N,wt;return[c(l(Et),{title:mt.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),c(qt,{ref_key:"modalConfirmationRef",ref:nt},null,512),t("div",Kt,[t("div",Xt,[t("div",Yt,[t("div",Gt,[t("div",Ht,[t("button",{class:R("btn btn-sm btn-outline-primary border-0 w-50 "+(x.value==1?"active":"")),onClick:e[0]||(e[0]=()=>{x.value=0})},s("Contribution"),2),e[25]||(e[25]=t("div",{class:"mx-1"},null,-1)),t("button",{class:R("btn btn-sm btn-outline-primary border-0 w-50 "+(x.value==2?"active":"")),onClick:e[1]||(e[1]=()=>{x.value=0})},s("Payroll"),2)])])])]),t("div",Qt,[t("div",Zt,[t("div",te,[t("div",ee,[e[26]||(e[26]=t("span",{class:"d-none d-lg-inline"},s("Contribution & Payroll"),-1)),t("div",se,[c(g,{name:"fade-slide-ltr",onAfterLeave:e[2]||(e[2]=()=>{x.value=2})},{default:_(()=>[x.value==1?(n(),o("span",le,s("Contribution"))):a("",!0)]),_:1}),c(g,{name:"fade-slide-rtl",onAfterLeave:e[3]||(e[3]=()=>{x.value=1})},{default:_(()=>[x.value==2?(n(),o("span",oe,s("Payroll"))):a("",!0)]),_:1})]),t("button",{onClick:e[4]||(e[4]=()=>et.value=!et.value),class:"btn btn-sm btn-outline-primary border-0 py-0 ms-auto",style:"font-size: 0.8rem;"},[w(s(vt.value=="up"?"hide":"settings")+" ",1),t("i",{class:R("bi my-auto bi-chevron-"+vt.value),style:"font-size: 0.8rem;"},null,2)])]),c(g,{name:"fade"},{default:_(()=>[et.value?(n(),o("div",ne,[c(g,{name:"fade-slide-ltr"},{default:_(()=>[x.value==1||I.value?(n(),o("div",ie,[t("div",ae,[e[32]||(e[32]=t("div",{class:"col-2 d-none d-lg-block"},[t("div",{class:"d-flex h-100"},[t("span",{class:"text-primary my-auto"},s("Contribution"))])],-1)),t("div",re,[t("div",de,[t("div",ce,[e[27]||(e[27]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Charge"),-1)),t("span",ue,s(l(B)(i.contribution_config.price)),1)]),t("div",me,[e[28]||(e[28]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Period"),-1)),t("span",be,s(l(O)(i.contribution_config.start)+" - "+l(O)(i.contribution_config.start+i.contribution_config.period-1)),1)]),t("div",ve,[e[29]||(e[29]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Total"),-1)),t("span",fe,s(l(B)(i.contribution_config.period*i.contribution_config.price)),1)]),t("div",pe,[e[31]||(e[31]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Set by"),-1)),t("a",{href:r.route("profile.edit",i.contribution_config.financial_id),class:"text-dark text-decoration-none d-flex"},[w(s(i.contribution_config.financial.name)+" ",1),e[30]||(e[30]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},null,-1))],8,_e)])])])]),t("div",ye,[t("div",ge,[t("div",he,[t("span",xe,s(i.contribution_config.financial_id>0?"Set on "+l(ct)(i.contribution_config.updated_at):"Wait for Financial set up"),1),l(P).roles_id==2?(n(),o("button",{key:0,class:"btn btn-sm btn-outline-secondary ms-auto ms-lg-0 py-0 d-flex border-0",onClick:e[5]||(e[5]=u=>_t(!0))},[...e[33]||(e[33]=[t("i",{class:"bi bi-gear my-auto",style:"font-size:0.8rem;"},null,-1)])])):a("",!0)])])])])):a("",!0)]),_:1}),c(g,{name:"fade-slide-rtl"},{default:_(()=>{var u,S,L;return[x.value==2||I.value?(n(),o("div",ke,[t("div",we,[e[37]||(e[37]=t("div",{class:"col-2 d-none d-lg-block"},[t("div",{class:"d-flex h-100"},[t("span",{class:"text-primary mt-2"},s("Payroll"))])],-1)),t("div",Ce,[t("div",ze,[t("div",Se,[t("div",Le,[t("div",Ue,[e[34]||(e[34]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Budget"),-1)),t("span",Me,s(l(B)(i.payroll_balance.balance)),1)]),t("div",Ve,[e[36]||(e[36]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Set by"),-1)),i.payroll_balance.financial_id>0?(n(),o("a",{key:0,href:r.route("profile.edit",(u=i.payroll_balance)==null?void 0:u.financial_id),class:"text-dark text-decoration-none d-flex"},[w(s(((L=(S=i.payroll_balance)==null?void 0:S.financial)==null?void 0:L.name)??"-")+" ",1),e[35]||(e[35]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},null,-1))],8,Pe)):(n(),o("span",Re,s(" - ")))])])]),t("div",De,[(n(!0),o(M,null,D(i.payroll_detail,k=>(n(),o("div",$e,[t("span",Fe,s("Level "+k.level),1),t("div",je,[t("div",Ne,s(k.salary+" percent"),1),t("div",Be,s(k.employee+(k.employee>1?" persons":" person")),1),t("div",Oe,[t("span",Te,s(l(B)(k.salary_idr)+" /person"),1)])])]))),256))])])])]),t("div",Ee,[t("div",Ae,[t("div",Ie,[t("span",We,s(i.payroll_balance.financial_id>0?"Set on "+l(ct)(i.payroll_balance.updated_at):"Wait for Financial set up"),1),l(P).roles_id==2?(n(),o("button",{key:0,class:"ms-auto ms-lg-0 btn btn-sm btn-outline-secondary py-0 d-flex border-0",onClick:e[6]||(e[6]=k=>rt(!0))},[...e[38]||(e[38]=[t("i",{class:"bi bi-gear my-auto",style:"font-size:0.8rem;"},null,-1)])])):a("",!0)])])])])):a("",!0)]}),_:1})])):a("",!0)]),_:1}),t("div",qe,[t("div",Je,[t("div",Ke,[e[39]||(e[39]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Staff"),-1)),t("a",{href:((d=b.value)==null?void 0:d.id)>0?r.route("profile.edit",(y=b.value)==null?void 0:y.id):"",class:"text-dark text-decoration-none d-flex scroll-x-hidden"},[t("span",Ye,s(((N=b.value)==null?void 0:N.id)>0?b.value.name:" - "),1),((wt=b.value)==null?void 0:wt.id)>0?(n(),o("i",Ge)):a("",!0)],8,Xe)]),t("div",He,[t("div",Qe,[c(g,{name:"fade-slide-ltr"},{default:_(()=>{var u,S,L,k,p,W,Ct,zt,St;return[x.value==1||I.value?(n(),o("div",Ze,[t("div",ts,[e[46]||(e[46]=t("div",{class:"col-12 d-lg-block d-none"},[t("div",{class:"d-flex bg-light p-3"},[t("span",{class:"text-primary-emphasis h6 mb-0 text-center"},s("Contribution"))])],-1)),t("div",es,[e[40]||(e[40]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block"},s("Progress "),-1)),(n(!0),o(M,null,D(i.contribution_config.period,U=>{var q,J,K,F,X,Y,G,dt;return n(),o("div",{class:R("btn shadow-sm px-1 py-0 me-2 "+(U+((q=i.contribution_config)==null?void 0:q.start)-1<=T.value&&U>((J=b.value)!=null&&J.contribution?(F=(K=b.value)==null?void 0:K.contribution)==null?void 0:F.months:0)?"bg-danger bg-opacity-25":"")+(U<=((Y=(X=b.value)==null?void 0:X.contribution)==null?void 0:Y.months)?"bg-primary bg-opacity-25":"bg-secondary bg-opacity-25 border-dark-subtle border-1"))},[t("span",{style:"font-size: 0.7rem;",class:R("position-relative "+(U<=((dt=(G=b.value)==null?void 0:G.contribution)==null?void 0:dt.months)?"text-primary":"text-secondary"))},s(l(O)(U+i.contribution_config.start-1,"short")),3)],2)}),256))]),t("div",ss,[e[41]||(e[41]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block mt-2"},s("Status "),-1)),j.value>0?(n(),o("span",ls,s(i.contribution_config.start+((u=b.value)!=null&&u.contribution?b.value.contribution.months-1:0)<=T.value?"Late for "+(T.value-((S=i.contribution_config)==null?void 0:S.start)-((L=b.value)!=null&&L.contribution?((p=(k=b.value)==null?void 0:k.contribution)==null?void 0:p.months)-1:-1)+(T.value-((W=i.contribution_config)==null?void 0:W.start)-((Ct=b.value)!=null&&Ct.contribution?((St=(zt=b.value)==null?void 0:zt.contribution)==null?void 0:St.months)-1:-1)>1?" months":" month")):"On track."),1)):a("",!0),j.value<=0?(n(),o("span",os,s("based on this month ("+l(O)(T.value)+")"),1)):a("",!0)]),t("div",ns,[e[43]||(e[43]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block mt-2"},s("Receipt "),-1)),c(g,{name:"fade",mode:"out-in"},{default:_(()=>{var U,q,J,K;return[t("div",is,[(q=(U=b.value)==null?void 0:U.contribution)!=null&&q.receipt?(n(!0),o(M,{key:0},D((K=(J=b.value)==null?void 0:J.contribution)==null?void 0:K.receipt,F=>{var X,Y,G;return n(),o("button",{class:R("border-1 border-primary-subtle btn btn-sm btn-outline-primary me-2 py-0 position-relative "+(F.id==((X=m.value)==null?void 0:X.id)?"active":"")),key:F.id,onClick:dt=>yt(F.id)},[w(s(((G=(Y=b.value)==null?void 0:Y.contribution)==null?void 0:G.receipt.indexOf(F))+1)+" ",1),e[42]||(e[42]=t("i",{class:"bi bi-receipt ms-0"},null,-1)),F.financial_id==null?(n(),o("i",rs)):a("",!0)],10,as)}),128)):(n(),o("span",ds,s(" - ")))])]}),_:1})]),c(g,{name:"fade"},{default:_(()=>[st.value?(n(),o("div",cs,[t("div",us,[t("div",ms,[t("div",bs,[t("a",{href:"/storage/images/receipt/contribution/"+m.value.receipt,class:"btn btn-sm btn-light border-0 mx-auto",download:""},[w(s(m.value.receipt)+" ",1),e[44]||(e[44]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-download text-primary ms-2 my-auto"},null,-1))],8,vs),t("button",{class:"btn btn-sm btn-light me-2",onClick:e[7]||(e[7]=U=>yt(null))},[...e[45]||(e[45]=[t("i",{class:"bi bi-x-lg"},null,-1)])])]),t("div",fs,[t("div",ps,[c(g,{name:"fade",mode:"out-in"},{default:_(()=>[(n(),o("img",{key:m.value,src:"/storage/images/receipt/contribution/"+m.value.receipt,class:"w-100 rounded",alt:"image"},null,8,_s))]),_:1})]),l(P).roles_id==2?(n(),o("div",ys,[c(g,{name:"fade",mode:"out-in"},{default:_(()=>[t("button",{onClick:e[8]||(e[8]=U=>Ft(r.route("contribution.validation",m.value.id),"Confirm to "+(m.value.financial_id?"unvalidate":"validate")+" "+m.value.receipt+"?")),class:R("mx-2 w-100 btn btn-sm btn-"+(m.value.financial_id?"secondary":"success")),style:"font-size: 0.8rem;"},s(m.value.financial_id?"Unvalid for "+m.value.months+(m.value.months>1?" months":" month"):"Valid for "+m.value.months+(m.value.months>1?" months":" month")),3)]),_:1})])):a("",!0),l(P).roles_id!==2?(n(),o("div",gs,[c(g,{name:"fade",mode:"out-in"},{default:_(()=>[t("span",hs,[w(s(m.value.financial_id?"Valid for "+m.value.months+(m.value.months>1?" months":" month")+" by ":"Unvalid for "+m.value.months+(m.value.months>1?" months":" month"))+" ",1),m.value.financial_id?(n(),o("span",xs,[t("span",ks,s(m.value.financial.name),1)])):a("",!0)])]),_:1}),c(g,{name:"fade",mode:"out-in"},{default:_(()=>[t("span",ws,s(m.value.financial_id?l(ct)(m.value.updated_at):""),1)]),_:1})])):a("",!0)])])])])):a("",!0)]),_:1})])])):a("",!0)]}),_:1}),c(g,{name:"fade-slide-rtl"},{default:_(()=>{var u,S,L,k;return[x.value==2||I.value?(n(),o("div",Cs,[t("div",zs,[e[56]||(e[56]=t("div",{class:"col-12 d-lg-block d-none"},[t("div",{class:"d-flex bg-light p-3"},[t("span",{class:"text-primary-emphasis h6 mb-0 text-center"},s("Payroll"))])],-1)),t("div",Ss,[e[49]||(e[49]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Level"),-1)),l(P).roles_id!==2||!(((u=b.value)==null?void 0:u.id)>0)?(n(),o("span",Ls,s(((S=b.value)==null?void 0:S.level)??" - "),1)):a("",!0),l(P).roles_id==2&&((L=b.value)==null?void 0:L.id)>0?(n(),o("div",Us,[V(t("select",{"onUpdate:modelValue":e[9]||(e[9]=p=>l(A).level=p),class:"form-select border-0"},[e[47]||(e[47]=t("option",{value:"0"},s("Unset"),-1)),(n(!0),o(M,null,D(i.payroll_detail,p=>(n(),o("option",{value:p.level},s("Level "+p.level),9,Ms))),256))],512),[[ot,l(A).level]]),t("button",{onClick:e[10]||(e[10]=(...p)=>ft&&ft(...p)),class:"btn btn-sm btn-outline-primary border-0 py-0"},[...e[48]||(e[48]=[t("i",{class:"bi bi-check-lg"},null,-1)])])])):a("",!0)]),t("div",Vs,[e[50]||(e[50]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Salary (Rp)"),-1)),t("span",null,s(l(B)(((k=i.payroll_detail.find(p=>{var W;return p.level==((W=b.value)==null?void 0:W.level)}))==null?void 0:k.salary_idr)??0)),1)]),l(P).roles_id==2?(n(),o("div",Ps,[t("div",Rs,[t("button",{onClick:e[11]||(e[11]=()=>{E.value=!E.value}),"data-bs-toggle":"collapse","data-bs-target":"#batchLevelAssignmentDiv",class:"btn btn-sm text-primary border-0 w-100 py-2 d-flex"},[...e[51]||(e[51]=[w(s("Batch Level Assignment")+" ",-1),t("i",{class:"bi bi-chevron-down ms-auto"},null,-1)])]),t("div",Ds,[e[54]||(e[54]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Selected staff"),-1)),t("span",$s,s(l(z).staff_id_list.length+(l(z).staff_id_list.length>1?" persons":" person")),1),c($,{message:l(z).errors.staff_id_list},null,8,["message"]),e[55]||(e[55]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Update to"),-1)),t("div",Fs,[e[53]||(e[53]=t("span",{class:"form-label px-2 py-0 my-auto text-secondary",for:"batch_level"},s("Level"),-1)),V(t("select",{id:"batch_level","onUpdate:modelValue":e[12]||(e[12]=p=>l(z).level=p),class:"form-select border-0"},[e[52]||(e[52]=t("option",{value:""},s("Unset"),-1)),(n(!0),o(M,null,D(i.payroll_detail,p=>(n(),o("option",{value:p.level},s("Level "+p.level),9,js))),256))],512),[[ot,l(z).level]])]),c($,{message:l(z).errors.level},null,8,["message"]),t("button",{onClick:e[13]||(e[13]=(...p)=>pt&&pt(...p)),class:"btn btn-sm btn-primary border-0 py-1 mt-3 w-100"},s("Update Level"))])])])):a("",!0)])])):a("",!0)]}),_:1})])])])])])])]),t("div",Ns,[t("div",Bs,[c(g,{name:"fade",mode:"out-in"},{default:_(()=>[st.value==null?(n(),o("div",Os,[e[60]||(e[60]=t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"d-flex border-primary border-bottom pb-2"},[t("span",{class:"text-primary-emphasis me-auto my-auto h6"},[t("i",{class:"bi bi-people me-1"}),w(" "+s("Staff List"))])])])],-1)),t("div",Ts,[l(z).staff_id_list.length>0?(n(),o("button",{key:0,class:"btn btn-sm btn-outline-primary border me-2 text-nowrap",onClick:e[14]||(e[14]=()=>{l(z).staff_id_list=[]})},s("Unselect all"))):a("",!0),t("div",Es,[V(t("input",{type:"text",class:"form-control form-control-sm py-0",placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1","onUpdate:modelValue":e[15]||(e[15]=u=>l(at).keyword=u),onInput:Pt},null,544),[[Q,l(at).keyword]]),e[57]||(e[57]=t("span",{class:"input-group-text py-0",id:"basic-addon1"},[t("i",{class:"bi bi-search",style:"font-size: 0.9rem"})],-1))])]),t("div",As,[t("li",Is,[i.contribution_users.length==0?(n(),o("ul",Ws,[...e[58]||(e[58]=[t("span",{class:"fst-italic text-secondary"},s("No employee found."),-1)])])):a("",!0),i.contribution_users.length>0?(n(!0),o(M,{key:1},D(i.contribution_users,u=>{var S;return n(),o("ul",{class:R("list-group-item list-group-item-action mb-0 py-1 px-0 "+(u.id==j.value?"bg-light":"")),onClick:()=>{Vt(u.id),l(A).level=u.level,l(A).user_id=u.id}},[t("div",Js,[E.value?V((n(),o("input",{key:0,type:"checkbox",class:"form-check-input me-2","onUpdate:modelValue":e[16]||(e[16]=L=>l(z).staff_id_list=L),value:u.id,onClick:e[17]||(e[17]=ut(()=>{},["stop"]))},null,8,Ks)),[[At,l(z).staff_id_list]]):a("",!0),t("span",{class:R("me-auto "+(u.id==j.value?"":"text-secondary"))},s(u.name),3),E.value?a("",!0):(n(),o("div",Xs,[((S=u.contribution)==null?void 0:S.months)+i.contribution_config.start-1<=l(Jt)(l(bt))+1||!u.contribution?(n(),o("span",Ys,[...e[59]||(e[59]=[t("span",{class:"my-auto"},s("Late"),-1),t("i",{class:"bi bi-exclamation my-auto"},null,-1)])])):a("",!0)])),E.value?(n(),o("span",Gs,s(u!=null&&u.level?"Level "+u.level:"Unset"),1)):a("",!0)])],10,qs)}),256)):a("",!0)])])])):a("",!0)]),_:1})])])])]}),_:1}),l(P).roles_id==2?(n(),o("div",Hs,[t("div",Qs,[t("div",Zs,[e[66]||(e[66]=Lt('<div class="modal-header py-1 ps-3 pe-2"><span class="modal-title fs-5 text-primary-emphasis"><i class="bi bi-gear border-secondary border-end me-2 pe-2"></i> Contribution Settings</span><button type="button" class="btn btn-sm ms-auto" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button></div>',1)),t("form",{onSubmit:e[21]||(e[21]=ut(d=>Ut(),["prevent"]))},[t("div",tl,[e[64]||(e[64]=Lt('<div class="row pt-0"><div class="col-12"><div class="d-flex"><i class="bi bi-exclamation-triangle text-danger me-2 ms-auto my-auto pb-2 fs-4"></i><span style="font-size:0.8rem;" class="me-auto text-danger w-50 mb-1">Changing charge price may result in all receipts having to be  <span class="text-decoration-underline">revalidated</span> .</span></div></div></div>',1)),t("div",el,[e[61]||(e[61]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_price",class:"form-label d-inline-block"},s("Charge"))],-1)),t("div",sl,[V(t("input",{type:"number",class:"form-control form-control-sm",id:"contribution_setting_price","onUpdate:modelValue":e[18]||(e[18]=d=>l(C).price=d),placeholder:"Dana Fakultas or etc..."},null,512),[[Q,l(C).price]]),c($,{messages:l(C).errors.price,class:"mt-2"},null,8,["messages"])])]),t("div",ll,[e[62]||(e[62]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_start",class:"form-label d-inline-block"},s("Start Month"))],-1)),t("div",ol,[V(t("select",{class:"form-control form-control-sm form-select",id:"contribution_setting_start","onUpdate:modelValue":e[19]||(e[19]=d=>l(C).start=d)},[(n(),o(M,null,D(12,d=>t("option",{value:d,key:d},s(l(O)(d)),9,nl)),64))],512),[[ot,l(C).start]]),c($,{messages:l(C).errors.start,class:"mt-2"},null,8,["messages"])])]),t("div",il,[e[63]||(e[63]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_end",class:"form-label d-inline-block"},s("End Month"))],-1)),t("div",al,[V(t("select",{class:"form-control form-control-sm form-select",id:"contribution_setting_end","onUpdate:modelValue":e[20]||(e[20]=d=>l(C).end=d)},[(n(),o(M,null,D(12,d=>t("option",{value:d,key:d},s(l(O)(d)),9,rl)),64))],512),[[ot,l(C).end]]),c($,{messages:l(C).errors.end,class:"mt-2"},null,8,["messages"])])])]),e[65]||(e[65]=t("div",{class:"modal-footer p-1"},[t("button",{type:"submit",class:"btn btn-sm btn-primary"},s("Set"))],-1))],32)])])])):a("",!0),l(P).roles_id==2?(n(),o("div",dl,[t("div",cl,[t("div",ul,[t("div",ml,[e[68]||(e[68]=t("span",{class:"modal-title fs-5 text-primary-emphasis"},[t("i",{class:"bi bi-gear border-secondary border-end me-2 pe-2"}),w(" "+s("Payroll Settings"))],-1)),t("button",{type:"button",class:"btn btn-sm ms-auto",onClick:e[22]||(e[22]=d=>rt(!1))},[...e[67]||(e[67]=[t("i",{class:"bi bi-x-lg"},null,-1)])])]),t("form",{onSubmit:e[24]||(e[24]=ut(d=>Mt(),["prevent"]))},[t("div",bl,[t("div",vl,[e[70]||(e[70]=t("div",{class:"col-12 col-lg-2"},[t("label",{for:"payroll_setting_balance",class:"form-label d-inline-block ms-0"},s("Budget"))],-1)),t("div",fl,[t("div",pl,[e[69]||(e[69]=t("label",{for:"payroll_setting_balance",class:"form-label d-inline-block me-2 my-auto text-white"},s("Rp"),-1)),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_balance","onUpdate:modelValue":e[23]||(e[23]=d=>l(v).balance=d),placeholder:"Dana Fakultas or etc..."},null,512),[[Q,l(v).balance]])]),c($,{messages:l(v).errors.balance,class:"mt-2"},null,8,["messages"])])]),t("div",_l,[e[75]||(e[75]=t("div",{class:"col-12 col-lg-2"},[t("label",{class:"form-label d-inline-block ms-0"},s("Level"))],-1)),t("div",yl,[(n(!0),o(M,null,D(l(v).level_list,(d,y)=>(n(),o("div",null,[d.deleted_at==null?(n(),o("div",gl,[t("div",hl,[t("div",xl,[t("label",{for:"payroll_setting_level"+d.id,class:"form-label my-auto me-2"},s("Level"),8,kl),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_level"+d.id,"onUpdate:modelValue":N=>l(v).level_list[y].level=N,placeholder:"ex: 1, 2, ..."},null,8,wl),[[Q,l(v).level_list[y].level]]),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_salary"+d.id,"onUpdate:modelValue":N=>l(v).level_list[y].salary=N,placeholder:"ex: 20, 50, ..."},null,8,Cl),[[Q,l(v).level_list[y].salary]]),e[71]||(e[71]=t("span",{class:"form-label ms-2 my-auto"},s("%"),-1))]),t("div",zl,[t("div",Sl,[c($,{messages:l(v).errors.level_list?l(v).errors.level_list[y].level:null,class:"mt-2"},null,8,["messages"])]),t("div",Ll,[c($,{messages:l(v).errors.level_list?l(v).errors.level_list[y].salary:null,class:"mt-2"},null,8,["messages"])])])]),t("div",Ul,[t("span",Ml,s(l(B)(d.salary*i.payroll_balance.balance*.01)),1)]),t("button",{type:"button",onClick:N=>Dt(y),class:"btn btn-sm btn-outline-secondary border-0 py-0 ms-2"},[...e[72]||(e[72]=[t("i",{class:"bi bi-trash3"},null,-1)])],8,Vl)])):a("",!0)]))),256)),c($,{message:l(v).errors.level_list},null,8,["message"]),t("div",Pl,[l(v).level_list.reduce((d,y)=>d+y.salary,0)>100?(n(),o("span",Rl,[...e[73]||(e[73]=[t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),w(" "+s("Warning! Total salary percentage is can`t be bigger than 100."),-1)])])):a("",!0),l(v).level_list.reduce((d,y)=>d+y.salary,0)<100?(n(),o("span",Dl,[...e[74]||(e[74]=[t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),w(" "+s("Warning! Total salary percentage is less than 100."),-1)])])):a("",!0),t("div",{class:"d-flex w-100"},[t("button",{type:"button",class:"btn btn-sm btn-outline-secondary border-0 py-0 text-nowrap",onClick:$t},s("Reset")),t("button",{type:"button",class:"btn btn-sm btn-outline-primary border-0 py-0 ms-auto text-nowrap",onClick:Rt},s("New Level"))])])])])]),e[76]||(e[76]=t("div",{class:"modal-footer p-1"},[t("button",{type:"submit",class:"btn btn-sm btn-primary w-25"},s("Set"))],-1))],32)])])])):a("",!0),c(Wt,{ref_key:"toastNotifRef",ref:it},null,512)],64))}};export{Tl as default};
