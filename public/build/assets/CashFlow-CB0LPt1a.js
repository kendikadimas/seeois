import{N as E,A as p,B as I,L as T,c as n,o as i,d as b,b as s,l as D,D as r,E as q,t as e,f as m,h as d,p as U,w as V,H as z,q as h,F as N,e as B,M as G}from"./vendor-DX-UyPxd.js";import{S as H}from"./StaffLayout-tuRC_TMq.js";import{_ as j}from"./InputError-2po89HeZ.js";import{_ as J}from"./Notif-CUZ2cLZ_.js";import{_ as K}from"./ModalConfirmation-CA9Q23sM.js";import"./bootstrap-O9kK6gmf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"container me-lg-0 mx-auto mb-5"},W={class:"row gx-lg-4 mt-4"},X={class:"col-12"},Y={class:"row"},Z={class:"col-12"},ss={class:"card p-3"},ts={class:"row gx-2"},os={class:"col-6 col-lg-4"},es={class:"mx-auto mt-2 d-flex"},as={class:"text-dark"},ls={class:"col-6 col-lg-4"},ns={class:"mx-auto mt-2 d-flex"},is={class:"text-dark"},rs={class:"col-6 col-lg-4"},ds={class:"mx-auto mt-2 d-flex"},cs={class:"text-dark"},ms={class:"row gx-4 pb-4"},us={class:"col-12 col-lg-6"},bs={class:"card bg-secondary bg-opacity-25 mt-4"},_s={class:"row"},fs={class:"col-12"},ps={class:"card p-3"},hs={class:"row"},ys={class:"col-12"},vs={class:"d-flex border-primary border-bottom pb-2 px-0"},gs={key:1,class:"modal fade",id:"addCashInModal",tabindex:"-1","aria-labelledby":"newCashInModal"},xs={class:"modal-dialog modal-dialog-centered"},ws={class:"modal-content shadow mx-3"},Cs={class:"modal-header py-1 ps-3 pe-2"},ks={class:"modal-body bg-light"},Is={class:"row justify-content-center"},Ns={class:"col-8 col-lg-7"},js={class:"row mt-2 justify-content-center"},Rs={class:"col-8 col-lg-7"},Ms={class:"row mt-2 justify-content-center"},$s={class:"col-8 col-lg-7"},Fs={class:"d-flex mt-2"},Os={class:"row"},As={class:"col-12"},Ds={class:"scroll-container-2 scroll-container-lg-2 pt-2 mb-1 rounded"},Vs={key:0,class:"row mb-2"},zs={class:"row mb-2"},Bs={class:"col-12"},Ls={class:"card py-2 mx-2 px-1 shadow-sm card-bg-hover text-dark"},Ss={class:"d-block",style:{width:"100%"}},Ps={class:"d-flex border-bottom border-1 mx-2 pb-1"},Es={class:"fw-normal me-auto my-auto scroll-x-hidden"},Ts={class:"text-nowrap text-primary-emphasis"},qs={class:"d-flex ms-2 mb-auto"},Us=["onClick"],Gs={key:1,class:"border-start border-2 border-secondary-subtle my-1 mx-1"},Hs=["onClick"],Js={class:"d-flex mx-0 mt-1"},Ks={class:"mb-0 ms-2"},Qs={key:0},Ws=["onClick"],Xs={key:2},Ys={class:"d-flex mx-0 mt-1"},Zs={class:"ms-2 text-primary"},st={class:"ms-auto me-2 my-auto text-end text-secondary",style:{"font-size":"0.8rem"}},tt={class:"col-12 col-lg-6"},ot={class:"card bg-secondary bg-opacity-25 mt-4"},et={class:"row"},at={class:"col-12"},lt={class:"card shadow-sm p-3"},nt={class:"d-flex mt-2"},it={class:"row mt-0"},rt={class:"col-12"},dt={class:"scroll-container-2 scroll-container-lg-2 pt-2 mb-1 rounded"},ct={key:0,class:"row mb-2"},mt={class:"row mb-2"},ut={class:"col-12"},bt={class:"card py-2 mx-2 px-1 shadow-sm card-bg-hover text-dark"},_t={class:"d-block mx-0"},ft={class:"d-flex mx-2 border-bottom border-1 pb-1"},pt={class:"fw-normal me-auto my-auto text-primary-emphasis"},ht={class:"btn-group btn-group-sm ms-auto"},yt=["href"],vt={class:"d-flex mx-2 mt-1 text-secondary"},gt={class:"d-flex"},xt={class:"ms-2 text-primary"},wt={class:"ms-auto me-2 my-auto text-end text-secondary",style:"font-size: 0.8rem;"},Ct={class:"modal fade",id:"cashInReceiptModal",tabindex:"-1","aria-labelledby":"cashInReceiptModal","aria-hidden":"true"},kt={class:"modal-dialog modal-dialog-centered"},It={class:"modal-content shadow mx-3 mt-5"},Nt={class:"modal-body bg-light p-1 px-3"},jt={class:"row justify-content-center mt-2"},Rt={class:"col-12 d-flex"},Mt=["src"],$t={class:"row justify-content-center"},Ft={class:"col-12 d-flex"},Ot=["href"],At={class:"btn btn-sm btn-light"},Dt={class:"fw-light me-2"},Tt={__name:"CashFlow",props:{default_contribution_id:Number,contribution_config:Object,contribution_users:Array,cash_in_items:Array,cash_out_items:Array,cash_in_total:Number,cash_out_total:Number,filter:Object,notif:Object,errors:Object},setup(l){const u=l,_=E().props.auth.user,R=p("Cash Flow"),g=p(null),y=p(null),x=p(null),v=p(null),c=I({name:null,price:null,receipt:null}),w=I({category:u.filter.cash_in.category,order:u.filter.cash_in.order}),C=I({category:u.filter.cash_out.category,order:u.filter.cash_out.order});function L(){c.post(route("cashIn.add"),{onSuccess:()=>{k(!1),c.reset()},onError:a=>{for(let t in a)x.value.showToast("warning",a[t])}})}function M(a){w.order=u.filter.cash_in.category==a?u.filter.cash_in.order=="asc"?"desc":"asc":"desc",w.category=a,w.post(route("cashIn.filter"))}function $(a){C.order=u.filter.cash_out.category==a?u.filter.cash_out.order=="asc"?"desc":"asc":"desc",C.category=a,C.post(route("cashOut.filter"))}const F=a=>{c.receipt=a.target.files[0]};function k(a){if(y.value==null){const t=document.getElementById("addCashInModal");y.value=bootstrap.Modal.getOrCreateInstance(t)}a?y.value.show():y.value.hide()}function O(a,t){g.value?g.value.showModal(a,t):console.error("modalConfirmationRef is null")}function S(a){utils.showImage(a)}function f(a){return utils.formatIDR(a)}function A(a){return utils.formatDate(a)}return T(()=>u.notif,a=>{const t=a;x.value.showToast(t.type,t.message)}),(a,t)=>(i(),n(N,null,[b(H,null,{header:D(()=>[d(e(R.value),1)]),default:D(()=>[b(r(q),{title:R.value,icon:a.$imageUrl("apps/logo.png")},null,8,["title","icon"]),b(K,{ref_key:"modalConfirmationRef",ref:g},null,512),s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ss,[t[16]||(t[16]=s("div",{class:"d-flex border-bottom border-1 border-primary"},[s("span",{class:"h5 text-primary-emphasis"},e("General Cashflow"))],-1)),s("div",ts,[s("div",os,[s("div",es,[t[11]||(t[11]=s("i",{class:"bi bi-wallet2 me-3 text-primary fs-5 my-auto"},null,-1)),s("div",null,[t[10]||(t[10]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Balance"),-1)),s("span",as,e(f(l.cash_in_total-l.cash_out_total)),1)])])]),s("div",ls,[s("div",ns,[t[13]||(t[13]=s("i",{class:"bi bi-journal-plus me-3 text-primary fs-5 my-auto"},null,-1)),s("div",null,[t[12]||(t[12]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Cash In"),-1)),s("span",is,e(f(l.cash_in_total)),1)])])]),s("div",rs,[s("div",ds,[t[15]||(t[15]=s("i",{class:"bi bi-journal-minus me-3 text-primary fs-5 my-auto"},null,-1)),s("div",null,[t[14]||(t[14]=s("span",{class:"d-block text-secondary",style:{"font-size":"0.8rem"}},e("Cash Out"),-1)),s("span",cs,e(f(l.cash_out_total)),1)])])])])])])]),s("div",ms,[s("div",us,[s("div",bs,[s("div",_s,[s("div",fs,[s("div",ps,[s("div",hs,[s("div",ys,[s("div",vs,[t[24]||(t[24]=s("span",{class:"text-primary-emphasis ms-0 me-auto my-auto h6"},[s("i",{class:"bi bi-journal-plus me-1"}),d(" "+e("Cash In List"))],-1)),r(_).roles_id==2?(i(),n("button",{key:0,class:"btn btn-sm btn-outline-primary border-0 py-0",onClick:t[0]||(t[0]=o=>k(!0))},[...t[17]||(t[17]=[s("i",{class:"bi bi-plus-lg"},null,-1)])])):m("",!0),r(_).roles_id==2?(i(),n("div",gs,[s("div",xs,[s("div",ws,[s("div",Cs,[t[19]||(t[19]=s("span",{class:"modal-title fs-5 text-primary-emphasis",id:"newCashInModal"},[s("i",{class:"bi bi-wallet border-secondary border-end me-2 pe-2"}),d(" "+e("New Cash In"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:t[1]||(t[1]=o=>k(!1))},[...t[18]||(t[18]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("form",{onSubmit:t[5]||(t[5]=U(o=>L(),["prevent"]))},[s("div",ks,[s("div",Is,[t[20]||(t[20]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"cash_in_name",class:"form-label d-inline-block"},e("Name"))],-1)),s("div",Ns,[V(s("input",{type:"text",class:"form-control form-control-sm",id:"cash_in_name","onUpdate:modelValue":t[2]||(t[2]=o=>r(c).name=o),placeholder:"Dana Fakultas or etc..."},null,512),[[z,r(c).name]]),b(j,{messages:r(c).errors.name,class:"mt-2"},null,8,["messages"])])]),s("div",js,[t[21]||(t[21]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"cash_in_price",class:"form-label d-inline-block"},e("Price"))],-1)),s("div",Rs,[V(s("input",{type:"number",name:"cash_in_price",class:"form-control form-control-sm","onUpdate:modelValue":t[3]||(t[3]=o=>r(c).price=o),id:"cash_in_price"},null,512),[[z,r(c).price]]),b(j,{messages:r(c).errors.price,class:"mt-2"},null,8,["messages"])])]),s("div",Ms,[t[22]||(t[22]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"cash_in_receipt",class:"form-label d-inline-block"},e("Receipt"))],-1)),s("div",$s,[s("input",{type:"file",class:"form-control form-control-sm",id:"cash_in_receipt",onChange:t[4]||(t[4]=(...o)=>F&&F(...o)),required:""},null,32),b(j,{messages:r(c).errors.receipt,class:"mt-2"},null,8,["messages"])])])]),t[23]||(t[23]=s("div",{class:"modal-footer p-1"},[s("button",{type:"submit",class:"btn btn-sm btn-primary"},e("Add Cash In"))],-1))],32)])])])):m("",!0)])])]),s("div",Fs,[t[27]||(t[27]=s("span",{class:"text-primary border-end border-secondary-subtle border-3 pe-3 me-3 my-auto"},e("Filter"),-1)),s("button",{onClick:t[6]||(t[6]=o=>M("name")),class:"btn btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0"},[t[25]||(t[25]=d(e("Name")+" ",-1)),s("i",{class:h("bi bi-arrow-"+(l.filter.cash_in.category=="name"?l.filter.cash_in.order=="asc"?"up":"down":"up"))},null,2)]),s("button",{onClick:t[7]||(t[7]=o=>M("price")),class:"btn btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0 ms-2"},[t[26]||(t[26]=d(e("Price")+" ",-1)),s("i",{class:h("bi bi-arrow-"+(l.filter.cash_in.category=="price"?l.filter.cash_in.order=="asc"?"up":"down":"up"))},null,2)])])])])]),s("div",Os,[s("div",As,[s("div",Ds,[l.cash_in_items.length==0?(i(),n("div",Vs,[...t[28]||(t[28]=[s("div",{class:"col"},[s("span",{class:"ms-3 text-secondary"},e("No cash in found."))],-1)])])):m("",!0),(i(!0),n(N,null,B(l.cash_in_items,o=>(i(),n("div",zs,[s("div",Bs,[s("div",Ls,[s("div",Ss,[s("div",Ps,[s("p",Es,[s("span",Ts,e(o.name),1)]),s("div",qs,[o.name!=="Contribution Charge"?(i(),n("button",{key:0,class:"btn btn-sm btn-outline-secondary border-0 my-auto","data-bs-toggle":"modal","data-bs-target":"#cashInReceiptModal",onClick:()=>v.value=o.name!=="Contribution Charge"?o.reciept:""},[...t[29]||(t[29]=[s("i",{class:"bi bi-receipt"},null,-1)])],8,Us)):m("",!0),r(_).roles_id==2&&o.name!=="Contribution Charge"?(i(),n("div",Gs)):m("",!0),r(_).roles_id==2&&o.name!=="Contribution Charge"?(i(),n("button",{key:2,class:"text-decoration-none btn btn-sm btn-outline-secondary border-0 my-auto",onClick:P=>O(a.route("cashIn.delete",o.id),"Please confirm to delete "+o.name+" from Cash In item list.")},[...t[30]||(t[30]=[s("i",{class:"bi bi-trash"},null,-1)])],8,Hs)):m("",!0)])]),s("div",Js,[s("p",Ks,[s("i",{class:h(" me-2 text-secondary bi bi-person"+(o.financial?"":"-exclamation text-danger"))},null,2),o.financial?(i(),n("span",Qs,e(o.financial.name),1)):m("",!0),r(_).roles_id==2&&o.name!=="Contribution Charge"&&!o.financial?(i(),n("button",{key:1,class:"btn btn-sm btn-outline-danger border-0",onClick:P=>O(a.route("cashIn.validate",o.id),"Click the button to confirm that "+o.name+" price is valid for "+f(o.price)+".")},e("Click here to validate"),8,Ws)):m("",!0),r(_).roles_id!==2&&o.name!=="Contribution Charge"&&!o.financial?(i(),n("span",Xs,e("Required validation from Financial Officer."))):m("",!0)])]),s("div",Ys,[s("span",Zs,[t[31]||(t[31]=s("i",{class:"bi bi-journal-plus me-2 text-secondary"},null,-1)),d(" "+e(f(o.price)),1)]),s("span",st,e(A(o.created_at)),1)])])])])]))),256))])])])])]),s("div",tt,[s("div",ot,[s("div",et,[s("div",at,[s("div",lt,[t[35]||(t[35]=s("div",{class:"row px-0"},[s("div",{class:"col-12"},[s("div",{class:"d-flex border-primary border-bottom px-0 pb-2"},[s("span",{class:"text-primary-emphasis ms-0 me-auto my-auto h6"},[s("i",{class:"bi bi-journal-minus me-1"}),d(" "+e("Cash Out List"))])])])],-1)),s("div",nt,[t[34]||(t[34]=s("span",{class:"text-primary border-end border-secondary-subtle border-3 pe-3 me-3 my-auto"},e("Filter"),-1)),s("button",{onClick:t[8]||(t[8]=o=>$("name")),class:"btn btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0"},[t[32]||(t[32]=d(e("Name")+" ",-1)),s("i",{class:h("bi bi-arrow-"+(l.filter.cash_out.category=="name"?l.filter.cash_out.order=="asc"?"up":"down":"up"))},null,2)]),s("button",{onClick:t[9]||(t[9]=o=>$("disbursement")),class:"btn btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0 ms-2"},[t[33]||(t[33]=d(e("Price")+" ",-1)),s("i",{class:h("bi bi-arrow-"+(l.filter.cash_out.category=="disbursement"?l.filter.cash_out.order=="asc"?"up":"down":"up"))},null,2)])])])])]),s("div",it,[s("div",rt,[s("div",dt,[l.cash_out_items.length==0?(i(),n("div",ct,[...t[36]||(t[36]=[s("div",{class:"col"},[s("span",{class:"ms-3 text-secondary"},e("No department found."))],-1)])])):m("",!0),(i(!0),n(N,null,B(l.cash_out_items,o=>(i(),n("div",mt,[s("div",ut,[s("div",bt,[s("div",_t,[s("div",ft,[s("p",pt,e(o.name),1),s("div",ht,[s("a",{class:"btn btn-sm btn-outline-primary border-0 text-decoration-none py-0 d-flex",href:a.route("department",o.department_id)},[...t[37]||(t[37]=[s("i",{class:"bi bi-info-circle my-auto"},null,-1)])],8,yt)])]),s("div",vt,[t[38]||(t[38]=s("i",{class:"bi bi-person me-2"},null,-1)),d(" "+e(o.manager.name),1)]),s("div",gt,[s("span",xt,[t[39]||(t[39]=s("i",{class:"bi bi-journal-minus me-2 text-secondary"},null,-1)),d(" "+e(f(o.disbursement)),1)]),s("span",wt,e(A(o.created_at)),1)])])])])]))),256))])])])])])])])])])]),_:1}),s("div",Ct,[s("div",kt,[s("div",It,[t[41]||(t[41]=G('<div class="modal-header py-1 ps-3 pe-2"><span class="modal-title fs-5 text-primary-emphasis"><i class="bi bi-receipt border-secondary border-end me-2 pe-2"></i> Cash In Receipt</span><button type="button" class="btn btn-sm ms-auto" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button></div>',1)),s("div",Nt,[s("div",jt,[s("div",Rt,[s("img",{src:"/storage/local/images/receipt/cash_in/"+v.value,alt:"image",class:"rounded mx-auto placeholder",onLoad:S,style:{width:"100%",height:"100%","object-fit":"contain","max-height":"320px"}},null,40,Mt)])]),s("div",$t,[s("div",Ft,[s("a",{href:"/storage/local/images/receipt/cash_in/"+v.value,target:"blank",style:{},class:"mx-auto",id:"ci_receipt_download",download:""},[s("button",At,[s("span",Dt,e(v.value),1),t[40]||(t[40]=s("i",{class:"bi bi-download text-primary"},null,-1))])],8,Ot)])])]),t[42]||(t[42]=s("div",{class:"modal-footer p-1"},[s("button",{"data-bs-dismiss":"modal","aria-label":"Close",class:"btn btn-sm btn-secondary"},e("Close"))],-1))])])]),b(J,{ref_key:"toastNotifRef",ref:x},null,512)],64))}};export{Tt as default};
