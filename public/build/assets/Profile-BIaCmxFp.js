import{J as q,N as F,A as m,B as z,V as D,Y as O,L as T,c as W,o as A,d as r,b as s,l as G,D as l,E as H,q as J,Z as Y,t,h as f,p as N,w as p,H as u,F as Z}from"./vendor-DX-UyPxd.js";import{_ as K}from"./Notif-CUZ2cLZ_.js";import{G as Q}from"./GuestLayout-CfIwBXlt.js";import{_ as X}from"./ModalConfirmation-CA9Q23sM.js";import{_ as c}from"./InputError-2po89HeZ.js";import{s as h}from"./utils-C_0HOUGI.js";import"./bootstrap-O9kK6gmf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ss={class:"bg-warning shadow-lg mx-auto px-3 py-3"},os={class:"d-flex text-primary-emphasis"},ts={class:"card bg-white shadow p-3 mx-auto"},ls={class:"d-flex"},es={class:"container mt-5"},is={class:"row g-4"},ns={class:"col-12 col-xl-7"},as={class:"card bg-white shadow-sm p-3"},ds={class:"d-block position-relative"},rs={class:"dropdown"},ms={class:"dropdown-menu dropdown-menu-end p-0 shadow border"},ps={class:"list-group list-group-flush"},us={class:"rounded d-xl-inline-block d-block mx-auto mx-xl-0 float-xl-start position-relative",style:{width:"40%"}},cs=["src"],fs={class:"d-xl-inline-block d-lg-block ps-3 float-xl-end",style:{width:"60%"}},bs={class:"d-flex mt-3 mt-xl-0"},vs={class:""},gs={class:"text-secondary-emphasis mb-0"},ws={class:"d-flex mt-3"},ys={class:""},xs={class:"text-secondary-emphasis mb-0"},_s={class:"d-flex mt-3"},hs={class:""},ks={class:"text-secondary-emphasis mb-0"},Ps={class:"d-flex mt-3"},Us={class:""},Cs={class:"text-secondary-emphasis mb-0"},$s={class:"d-flex mt-3"},js={class:""},Rs={class:"text-secondary-emphasis mb-0"},zs={class:"modal-dialog modal-dialog-centered px-3 px-lg-0"},Ns={class:"modal-content shadow mt-5"},Vs={class:"modal-header py-1 ps-3 pe-2"},Es={class:"modal-body bg-light"},Ss={class:"row justify-content-center"},Bs={class:"col-8 col-lg-7"},Is={class:"row justify-content-center mt-2"},Ls={class:"col-8 col-lg-7"},Ms={class:"row justify-content-center mt-2"},qs={class:"col-8 col-lg-7"},Fs={class:"row justify-content-center mt-2"},Ds={class:"col-8 col-lg-7"},Os={class:"modal-dialog modal-dialog-centered px-3 px-lg-0"},Ts={class:"modal-content shadow mt-5"},Ws={class:"modal-header py-1 ps-3 pe-2"},As={class:"modal-body bg-light"},Gs={class:"row justify-content-center mt-3"},Hs={class:"col-7 col-lg-6"},Js={class:"input-group input-group-sm"},Ys={class:"row justify-content-center mt-3"},Zs={class:"col-7 col-lg-6"},Ks={class:"input-group input-group-sm"},Qs={class:"row justify-content-center mt-3"},Xs={class:"col-7 col-lg-6"},so={class:"input-group input-group-sm"},mo={__name:"Profile",props:{notif:Object},setup(V){var j;const E=V,n=q(()=>F().props.auth.user),S=m("Profile"),b=m(null),B=m(null),k=m(null),v=m(null),P=m(null),g=m(null),U=m(null),C=m(window.innerWidth>=1200),a=z({name:n.value.name,phone:n.value.phone,profile_image:n.value.profile_image,location:((j=n.value)==null?void 0:j.location)??null}),d=z({old_password:null,password:null,password_confirmation:null});function I(){U.value.click()}function $(){a.post(route("profile.update"),{onSuccess:()=>{w(!1)},onError:i=>{var o;((o=i.profile_image)==null?void 0:o.length)>0&&b.value.showToast("warning",i.profile_image)}})}const L=i=>{a.profile_image=i.target.files[0],$()};function M(){d.post(route("password.change"),{onSuccess:()=>{y(!1),d.reset()}})}function w(i){v.value=bootstrap.Modal.getOrCreateInstance(k.value),i?v.value.show():v.value.hide()}function y(i){g.value=bootstrap.Modal.getOrCreateInstance(P.value),i?g.value.show():g.value.hide()}const x=()=>{C.value=window.innerWidth>=768,window.addEventListener("resize",x)};return D(()=>{window.addEventListener("resize",x)}),O(()=>{window.removeEventListener("resize",x)}),T(()=>E.notif,i=>{const o=i;b.value.showToast(o.type,o.message)}),(i,o)=>(A(),W(Z,null,[r(Q,null,{default:G(()=>{var e,R;return[r(l(H),{title:S.value},null,8,["title"]),r(X,{ref_key:"modalConfirmationRef",ref:B},null,512),r(K,{ref_key:"toastNotifRef",ref:b},null,512),s("div",{class:J((C.value,"bg-light")),style:{"min-height":"100vh","min-width":"100vw"}},[s("div",ss,[s("div",os,[s("div",ts,[s("div",ls,[s("button",{class:"btn btn-sm btn-light text-primary",onClick:o[0]||(o[0]=_=>l(Y).visit(i.route("shop")))},[...o[17]||(o[17]=[s("i",{class:"bi bi-chevron-left"},null,-1),s("span",{class:"ms-2"},t("Back"),-1)])]),o[18]||(o[18]=s("div",{class:"border-start border-primary border-2 mx-3 my-1"},null,-1)),o[19]||(o[19]=s("span",{class:"h4 text-warning my-auto"},[s("i",{class:"bi bi-person-fill"}),f(" "+t("Profile"))],-1))])])])]),s("div",es,[s("div",is,[s("div",ns,[s("div",as,[s("div",ds,[s("div",rs,[o[22]||(o[22]=s("button",{"data-bs-toggle":"dropdown","aria-expanded":"false",class:"btn btn-sm btn-outline-secondary end-0 top-0 position-absolute mt-1 me-1 border-0"},[s("i",{class:"bi bi-gear-fill"})],-1)),s("div",ms,[s("ul",ps,[s("li",{class:"list-group-item list-group-item-action p-2 d-flex rounded-top",onClick:o[1]||(o[1]=_=>w(!0))},[...o[20]||(o[20]=[s("i",{class:"bi bi-person-vcard text-secondary me-2"},null,-1),f(t("Profile"),-1)])]),s("li",{class:"list-group-item list-group-item-action p-2 d-flex rounded-bottom",onClick:o[2]||(o[2]=_=>y(!0))},[...o[21]||(o[21]=[s("i",{class:"bi bi-key text-secondary me-2"},null,-1),f(t("Password"),-1)])])])])]),s("div",us,[s("img",{src:"/storage/images/profile/"+(((e=n.value)==null?void 0:e.profile_image)??"example.png"),alt:"image",class:"w-100 rounded",style:{"aspect-ratio":"1","object-fit":"cover",width:"40%"}},null,8,cs),s("button",{onClick:o[3]||(o[3]=_=>I()),class:"btn btn-sm btn-primary border-0 shadow rounded-5 position-absolute end-0 bottom-0 me-2 mb-2"},[...o[23]||(o[23]=[s("i",{class:"bi bi-camera"},null,-1)])]),s("input",{ref_key:"inputProfileImageRef",ref:U,type:"file",class:"d-none",onChange:L},null,544)]),s("div",fs,[s("div",bs,[o[25]||(o[25]=s("i",{class:"bi bi-person text-secondary fs-5 me-3 my-auto"},null,-1)),s("div",vs,[o[24]||(o[24]=s("p",{class:"text-secondary mb-0",style:{"font-size":"0.8rem"}},t("Name"),-1)),s("p",gs,t(n.value.name),1)])]),s("div",ws,[o[27]||(o[27]=s("i",{class:"bi bi-envelope-at text-secondary fs-5 me-3 my-auto"},null,-1)),s("div",ys,[o[26]||(o[26]=s("p",{class:"text-secondary mb-0",style:{"font-size":"0.8rem"}},t("Email"),-1)),s("p",xs,t(n.value.email),1)])]),s("div",_s,[o[29]||(o[29]=s("i",{class:"bi bi-whatsapp text-secondary fs-5 me-3 my-auto"},null,-1)),s("div",hs,[o[28]||(o[28]=s("p",{class:"text-secondary mb-0",style:{"font-size":"0.8rem"}},t("Whatsapp / Phone"),-1)),s("p",ks,t(n.value.phone),1)])]),s("div",Ps,[o[31]||(o[31]=s("i",{class:"bi bi-cake2 text-secondary fs-5 me-3 my-auto"},null,-1)),s("div",Us,[o[30]||(o[30]=s("p",{class:"text-secondary mb-0",style:{"font-size":"0.8rem"}},t("Birth Date"),-1)),s("p",Cs,t(n.value.phone),1)])]),s("div",$s,[o[33]||(o[33]=s("i",{class:"bi bi-geo-alt text-secondary fs-5 me-3 my-auto"},null,-1)),s("div",js,[o[32]||(o[32]=s("p",{class:"text-secondary mb-0",style:{"font-size":"0.8rem"}},t("Address"),-1)),s("p",Rs,t(((R=n.value)==null?void 0:R.location)??"Not set"),1)])])])])])])])])],2)]}),_:1}),s("div",{class:"modal fade",ref_key:"modalUpdateProfileRef",ref:k,tabindex:"-1"},[s("div",zs,[s("div",Ns,[s("div",Vs,[o[35]||(o[35]=s("span",{class:"modal-title fs-5 text-primary-emphasis"},[s("i",{class:"bi bi-person-vcard border-secondary-subtle border-2 border-end pe-2"}),f(" "+t("Update Profile"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:o[4]||(o[4]=e=>w(!1))},[...o[34]||(o[34]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("form",{method:"post",onSubmit:o[8]||(o[8]=N(e=>$(),["prevent"]))},[s("div",Es,[s("div",Ss,[o[36]||(o[36]=s("div",{class:"col-4 col-lg-3 d-flex"},[s("label",{class:"form-label d-inline-block my-auto"},t("Email"))],-1)),s("div",Bs,[s("span",null,t(n.value.email),1)])]),s("div",Is,[o[37]||(o[37]=s("div",{class:"col-4 col-lg-3 d-flex"},[s("label",{for:"profile_name",class:"form-label d-inline-block my-auto"},t("Name"))],-1)),s("div",Ls,[p(s("input",{id:"profile_name",type:"text",class:"form-control form-control-sm d-inline-block","onUpdate:modelValue":o[5]||(o[5]=e=>l(a).name=e),required:""},null,512),[[u,l(a).name]]),r(c,{message:l(a).errors.name},null,8,["message"])])]),s("div",Ms,[o[38]||(o[38]=s("div",{class:"col-4 col-lg-3 d-flex"},[s("label",{for:"profile_phone",class:"form-label d-inline-block my-auto"},t("Whatsapp/Phone"))],-1)),s("div",qs,[p(s("input",{id:"profile_phone",type:"tel",class:"form-control form-control-sm d-inline-block","onUpdate:modelValue":o[6]||(o[6]=e=>l(a).phone=e),required:""},null,512),[[u,l(a).phone]]),r(c,{message:l(a).errors.phone},null,8,["message"])])]),s("div",Fs,[o[39]||(o[39]=s("div",{class:"col-4 col-lg-3 d-flex"},[s("label",{for:"profile_location",class:"form-label d-inline-block my-auto"},t("Location"))],-1)),s("div",Ds,[p(s("input",{id:"profile_location",type:"text",class:"form-control form-control-sm d-inline-block","onUpdate:modelValue":o[7]||(o[7]=e=>l(a).location=e)},null,512),[[u,l(a).location]]),r(c,{message:l(a).errors.location},null,8,["message"])])])]),o[40]||(o[40]=s("div",{class:"modal-footer p-1"},[s("button",{type:"submit",class:"btn btn-sm btn-primary"},t("Update"))],-1))],32)])])],512),s("div",{class:"modal fade",ref_key:"modalUpdatePasswordRef",ref:P,tabindex:"-1"},[s("div",Os,[s("div",Ts,[s("div",Ws,[o[42]||(o[42]=s("span",{class:"modal-title fs-5 text-primary-emphasis"},[s("i",{class:"bi bi-key border-secondary-subtle border-2 border-end pe-2"}),f(" "+t("Update Password"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:o[9]||(o[9]=e=>y(!1))},[...o[41]||(o[41]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("form",{method:"post",onSubmit:o[16]||(o[16]=N(e=>M(),["prevent"]))},[s("div",As,[o[49]||(o[49]=s("div",{class:"row justify-content-center"},[s("div",{class:"col-10"},[s("span",{class:"text-secondary d-block",style:{"text-align":"justify"}},t("Be caution, you will update your password account. If you are forget, you can choose 'forget password' in the login or register page."))])],-1)),s("div",Gs,[o[44]||(o[44]=s("div",{class:"col-5 col-lg-4"},[s("label",{for:"old_password",class:"form-label my-1"},"Old Password")],-1)),s("div",Hs,[s("div",Js,[p(s("input",{type:"password",class:"form-control form-control-sm",id:"old_password","onUpdate:modelValue":o[10]||(o[10]=e=>l(d).old_password=e),autocomplete:"password",required:""},null,512),[[u,l(d).old_password]]),s("button",{type:"button",class:"btn bg-light text-secondary",onClick:o[11]||(o[11]=e=>l(h)("old_password","old_password_icon"))},[...o[43]||(o[43]=[s("i",{class:"bi bi-eye-slash-fill",id:"old_password_icon"},null,-1)])])]),r(c,{message:l(d).errors.old_password},null,8,["message"])])]),s("div",Ys,[o[46]||(o[46]=s("div",{class:"col-5 col-lg-4"},[s("label",{for:"password",class:"form-label my-1"},"New Password")],-1)),s("div",Zs,[s("div",Ks,[p(s("input",{type:"password",class:"form-control form-control-sm",id:"password","onUpdate:modelValue":o[12]||(o[12]=e=>l(d).password=e),required:""},null,512),[[u,l(d).password]]),s("button",{type:"button",class:"btn bg-light text-secondary",onClick:o[13]||(o[13]=e=>l(h)("password","password_icon"))},[...o[45]||(o[45]=[s("i",{class:"bi bi-eye-slash-fill",id:"password_icon"},null,-1)])])]),r(c,{message:l(d).errors.password},null,8,["message"])])]),s("div",Qs,[o[48]||(o[48]=s("div",{class:"col-5 col-lg-4"},[s("label",{for:"password_confirmation",class:"form-label my-1"},"Confirm Password")],-1)),s("div",Xs,[s("div",so,[p(s("input",{type:"password",class:"form-control form-control-sm",id:"password_confirmation","onUpdate:modelValue":o[14]||(o[14]=e=>l(d).password_confirmation=e),required:""},null,512),[[u,l(d).password_confirmation]]),s("button",{type:"button",class:"btn bg-light text-secondary",onClick:o[15]||(o[15]=e=>l(h)("password_confirmation","password_confirmation_icon"))},[...o[47]||(o[47]=[s("i",{class:"bi bi-eye-slash-fill",id:"password_confirmation_icon"},null,-1)])])]),r(c,{message:l(d).errors.password_confirmation},null,8,["message"])])])]),o[50]||(o[50]=s("div",{class:"modal-footer p-1"},[s("button",{type:"submit",class:"btn btn-sm btn-primary"},t("Update"))],-1))],32)])])],512)],64))}};export{mo as default};
