import{s as T,r as v,m as y,C as W,L as M,q as N,c as l,o as r,b as j,a as e,k as U,d as V,h as J,F as p,y as _,g as x,z,t as c,w as q,n as u}from"./app-qYO7Mt8R.js";import{_ as H}from"./ModalConfirmation-YmeXL9iw.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"d-flex vh-100 overflow-hidden"},Y={class:"sidebar-desktop d-none d-lg-flex flex-column flex-shrink-0 bg-gradient-custom text-white"},Z={class:"sidebar-content-inner p-3"},K={class:"sidebar-logo mb-4"},ee={class:"d-flex align-items-center p-2 rounded bg-white bg-opacity-10"},te={class:"navigation-menu flex-grow-1"},se=["data-bs-target","onClick"],oe=["id"],ae={class:"fw-semibold"},ne=["id"],ie={class:"nav-items pt-1 ps-3"},le=["href","onClick"],re=["id"],de={class:"fw-medium"},ce=["id"],ue=["href"],fe=["href"],be={class:"offcanvas-header border-bottom border-white border-opacity-25"},me={class:"d-flex align-items-center"},pe={class:"offcanvas-body sidebar-content-inner p-3"},ge={class:"navigation-menu flex-grow-1"},he=["data-bs-target","onClick"],ve=["id"],_e={class:"fw-semibold"},we=["id"],Se={class:"nav-items pt-1 ps-3"},xe=["href","onClick"],ke=["id"],Ee={class:"fw-medium"},Ce=["id"],Oe=["href"],ye=["href"],Be={class:"main-content-wrapper flex-grow-1 d-flex flex-column overflow-hidden"},$e={key:0,class:"top-header bg-white border-bottom shadow-sm px-2 px-lg-3 py-2"},Ie={class:"d-flex justify-content-between align-items-center"},Le={class:"page-title me-auto"},De={class:"mb-0 fs-5 fw-semibold"},Fe={class:"page-meta small text-muted"},Ae={class:"d-none d-md-inline"},Re={class:"user-profile dropdown"},je={class:"profile-btn btn d-flex align-items-center dropdown-toggle border-0",type:"button",id:"profileDropdownMenu","data-bs-toggle":"dropdown","aria-expanded":"false"},ze=["src"],Pe={class:"profile-info d-none d-lg-block lh-sm text-start"},Ge={class:"mb-0 small fw-medium text-dark text-truncate",style:{"max-width":"150px"}},Te={class:"text-muted d-block text-truncate",style:{"max-width":"150px"}},We={class:"dropdown-menu dropdown-menu-end shadow border-0 mt-2","aria-labelledby":"profileDropdownMenu"},Me=["href"],Ne={class:"content-container flex-grow-1 overflow-auto p-2 p-lg-3"},Ue={__name:"StaffLayout",setup(Ve){const w=T(),B=v(null);v(null);const S=v(null),$=y(()=>w.props.auth.user),n=(s,t={})=>{const g={dashboard:"/seeo/dashboard",role:"/seeo/user",structural:"/seeo/structural",department:"/seeo/department",program:"/seeo/program",finance:"/seeo/finance","finance.feature":"/seeo/finance_feature","blaterian.insight":"/blaterian/insight","blaterian.insight.cashflow":"/blaterian/insight/cashflow","blaterian.insight.customer":"/blaterian/insight/customer","food.stand":"/blaterian/foods/stand","food.stand.detail":"/blaterian/foods/stand_detail","food.stand.cashier":"/blaterian/foods/cashier","profile.edit":"/profile",logout:"/logout",intro:"/intro","billboard.remove":"/billboard/delete","attachment.remove":"/attachment/remove","post.remove":"/dashboard/post/remove","billboard.add":"/billboard/add","attachment.add":"/attachment/add","post.add":"/dashboard/post/add"};if(g[s]){let a=g[s];if(t&&Object.keys(t).length>0){for(const m in t){let h=a.replace(`{${m}}`,t[m]);h===a&&(h=a.replace(`{${m}?}`,t[m])),a=h}a=a.replace(/\{\w+\?\}/g,""),a.endsWith("/")&&a.length>1&&(a=a.slice(0,-1))}else t&&t.id&&!a.includes("{id}")&&!a.includes("{id?}")&&(a=`${a}/${t.id}`);return a}return console.warn(`Route "${s}" not found.`),"#"};n.current=s=>{const t=w.component;if(!s)return t;const a={"Staff/SEEO/Dashboard":"dashboard","Staff/SEEO/UserController":"role","Staff/SEEO/DepartmentController":"structural","Staff/SEEO/Department":"department","Staff/SEEO/Program":"program","Staff/SEEO/CashFlow":"finance","Staff/SEEO/CashFlowFeature":"finance.feature","Staff/Business/Insight":"blaterian.insight","Staff/Business/InsightCashflow":"blaterian.insight.cashflow","Staff/Business/InsightCustomer":"blaterian.insight.customer","Staff/Business/Stand":"food.stand","Staff/Business/StandDetail":"food.stand.detail","Staff/Business/StandCashier":"food.stand.cashier","Staff/Business/GoodBalance":"good.balance","Staff/Business/GoodProduct":"good.product"}[t];return a?a===s||a.startsWith(s+"."):!1};const F=v(""),I=v(null),k=v({}),E=y(()=>{const s=w.component;return s.startsWith("Staff/SEEO")?"Organization":s.startsWith("Staff/Business")?"Business":"Organization"}),C=y(()=>{const s=w.component;return s.includes("Finance")||s.includes("CashFlow")?"Finance":s.includes("Foods")||s.includes("Stand")?"Foods":s.includes("Goods")||s.includes("Good")?"Goods":null});function A(){F.value=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}const P=y(()=>new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));function G(s,t){I.value?I.value.showModal(s,t):console.error("modalConfirmationRef is null")}function O(s){const t=document.getElementById(s);t&&(t.classList.toggle("bi-chevron-up"),t.classList.toggle("bi-chevron-down"))}function R(){k.value={Organization:{Dashboard:{route:n("dashboard"),active:n.current("dashboard"),title:"Dashboard"},User:{route:n("role"),active:n.current("role"),title:"User"},Structural:{route:n("structural"),active:n.current("structural")||n.current("department")||n.current("program"),title:"Structural"},Finance:[{route:n("finance"),active:n.current("finance"),title:"Cashflow"},{route:n("finance.feature"),active:n.current("finance.feature"),title:"Feature"}]},Business:{Insight:{route:n("blaterian.insight"),active:n.current("blaterian.insight"),title:"Insight"},Foods:[{route:n("food.stand"),active:n.current("food.stand"),title:"Stand"}],Goods:[{route:n("good.product"),active:n.current("good"),title:"Product (Coming Soon)"}]}},console.log("Nav list updated:",JSON.parse(JSON.stringify(k.value)))}let L=null;return W(async()=>{if(A(),L=setInterval(A,1e3),await M(),typeof window.bootstrap<"u"){if(B.value)try{S.value=window.bootstrap.Offcanvas.getOrCreateInstance(B.value),console.log("Bootstrap Offcanvas initialized."),window.addEventListener("resize",()=>{window.innerWidth>=992&&S.value&&S.value.hide()})}catch(s){console.error("Error initializing Offcanvas:",s)}else console.warn("Sidebar element not found.");R()}else console.error("window.bootstrap is undefined. Check app.js.");return()=>{L&&clearInterval(L)}}),N(()=>w.component,()=>{R(),window.innerWidth<992&&S.value&&S.value.hide()}),(s,t)=>{var g,a,m,h;return r(),l(p,null,[j(V(J),null,{default:U(()=>[...t[4]||(t[4]=[e("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),e("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),e("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap",rel:"stylesheet"},null,-1),e("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css",rel:"stylesheet"},null,-1),e("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css",rel:"stylesheet"},null,-1)])]),_:1}),e("div",X,[e("div",Y,[e("div",Z,[e("div",K,[e("div",ee,[e("img",{src:"/storage/local/images/apps/logo.png",alt:"SEEO Logo",class:"sidebar-logo-img me-2",onError:t[0]||(t[0]=f=>f.target.src="/storage/local/images/compro/logo.png")},null,32),t[5]||(t[5]=e("div",{class:"lh-sm"},[e("h5",{class:"sidebar-logo-title mb-0"},"SEEO"),e("span",{class:"sidebar-logo-subtitle d-block"},"Information System"),e("small",{class:"sidebar-logo-version text-warning"},"v2.0")],-1))])]),e("div",te,[(r(!0),l(p,null,_(k.value,(f,o)=>(r(),l("div",{key:o,class:"nav-section mb-2"},[e("button",{type:"button",class:u(["nav-header btn w-100 text-start d-flex align-items-center",{"active-section":E.value==o}]),"data-bs-toggle":"collapse","data-bs-target":"#nav_section_desktop_"+o.replace(/\s+/g,""),onClick:i=>O("icon_nav_section_desktop_"+o.replace(/\s+/g,""))},[e("i",{id:"icon_nav_section_desktop_"+o.replace(/\s+/g,""),class:u(["bi","me-2",E.value==o?"bi-chevron-up":"bi-chevron-down"])},null,10,oe),e("span",ae,c(o),1)],10,se),e("div",{class:"collapse",id:"nav_section_desktop_"+o.replace(/\s+/g,"")},[e("div",ie,[(r(!0),l(p,null,_(f,(i,d)=>(r(),l("div",{key:d,class:"mb-1"},[Array.isArray(i)?(r(),l("a",{key:0,class:u(["nav-item nav-group d-flex align-items-center btn text-start w-100",{"active-group":C.value==d}]),"data-bs-toggle":"collapse",href:"#nav_group_desktop_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""),role:"button",onClick:b=>O("icon_nav_group_desktop_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""))},[e("i",{id:"icon_nav_group_desktop_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""),class:u(["bi","me-2","nav-group-icon",C.value==d?"bi-chevron-up":"bi-chevron-down"])},null,10,re),e("span",de,c(d),1)],10,le)):x("",!0),Array.isArray(i)?(r(),l("div",{key:1,class:"collapse",id:"nav_group_desktop_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,"")},[(r(!0),l(p,null,_(i,(b,D)=>(r(),l("a",{key:`${o}-${d}-${D}`,href:b.route,class:u(["nav-item","sub-item","d-block",b.active?"active":""])},c(b.title),11,ue))),128))],8,ce)):typeof i=="object"&&i!==null&&i.route!==void 0?(r(),l("a",{key:2,href:i.route,class:u(["nav-item","d-block",i.active?"active":""])},c(i.title),11,fe)):x("",!0)]))),128))])],8,ne)]))),128))])])]),e("div",{class:"offcanvas offcanvas-start bg-gradient-custom text-white sidebar-mobile",tabindex:"-1",id:"sidebarOffcanvas","aria-labelledby":"sidebarOffcanvasLabel",ref_key:"sidebarRef",ref:B},[e("div",be,[e("div",me,[e("img",{src:"/storage/local/images/apps/logo.png",alt:"SEEO Logo",class:"sidebar-logo-img me-2",onError:t[1]||(t[1]=f=>f.target.src="/storage/local/images/compro/logo.png")},null,32),t[6]||(t[6]=e("div",{class:"lh-sm"},[e("h5",{class:"sidebar-logo-title mb-0",id:"sidebarOffcanvasLabel"},"SEEO"),e("span",{class:"sidebar-logo-subtitle d-block"},"Information System")],-1))]),t[7]||(t[7]=e("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1))]),e("div",pe,[e("div",ge,[(r(!0),l(p,null,_(k.value,(f,o)=>(r(),l("div",{key:o+"-mobile",class:"nav-section mb-2"},[e("button",{type:"button",class:u(["nav-header btn w-100 text-start d-flex align-items-center",{"active-section":E.value==o}]),"data-bs-toggle":"collapse","data-bs-target":"#nav_section_mobile_"+o.replace(/\s+/g,""),onClick:i=>O("icon_nav_section_mobile_"+o.replace(/\s+/g,""))},[e("i",{id:"icon_nav_section_mobile_"+o.replace(/\s+/g,""),class:u(["bi","me-2",E.value==o?"bi-chevron-up":"bi-chevron-down"])},null,10,ve),e("span",_e,c(o),1)],10,he),e("div",{class:"collapse",id:"nav_section_mobile_"+o.replace(/\s+/g,"")},[e("div",Se,[(r(!0),l(p,null,_(f,(i,d)=>(r(),l("div",{key:d+"-mobile",class:"mb-1"},[Array.isArray(i)?(r(),l("a",{key:0,class:u(["nav-item nav-group d-flex align-items-center btn text-start w-100",{"active-group":C.value==d}]),"data-bs-toggle":"collapse",href:"#nav_group_mobile_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""),role:"button",onClick:b=>O("icon_nav_group_mobile_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""))},[e("i",{id:"icon_nav_group_mobile_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,""),class:u(["bi","me-2","nav-group-icon",C.value==d?"bi-chevron-up":"bi-chevron-down"])},null,10,ke),e("span",Ee,c(d),1)],10,xe)):x("",!0),Array.isArray(i)?(r(),l("div",{key:1,class:"collapse",id:"nav_group_mobile_"+o.replace(/\s+/g,"")+"_"+d.replace(/\s+/g,"")},[(r(!0),l(p,null,_(i,(b,D)=>(r(),l("a",{key:`${o}-${d}-${D}-mobile`,href:b.route,class:u(["nav-item","sub-item","d-block",b.active?"active":""])},c(b.title),11,Oe))),128))],8,Ce)):typeof i=="object"&&i!==null&&i.route!==void 0?(r(),l("a",{key:2,href:i.route,class:u(["nav-item","d-block",i.active?"active":""])},c(i.title),11,ye)):x("",!0)]))),128))])],8,we)]))),128))])])],512),e("div",Be,[s.$slots.header?(r(),l("header",$e,[e("div",Ie,[t[12]||(t[12]=e("button",{class:"btn border-0 d-lg-none p-1 me-2",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebarOffcanvas","aria-controls":"sidebarOffcanvas"},[e("i",{class:"bi bi-list fs-3"})],-1)),e("div",Le,[e("h4",De,[z(s.$slots,"header",{},void 0,!0)]),e("div",Fe,[e("span",null,c(P.value),1),t[8]||(t[8]=e("span",{class:"mx-1 d-none d-md-inline"},"â€¢",-1)),e("span",Ae,c(F.value),1)])]),e("div",Re,[e("button",je,[e("img",{src:"/storage/images/profile/"+(((g=$.value)==null?void 0:g.profile_image)??"example.png"),alt:"Profile",class:"profile-img rounded-circle me-2",onError:t[2]||(t[2]=f=>f.target.src="/storage/local/images/compro/logo.png"),style:{width:"40px",height:"40px","object-fit":"cover"}},null,40,ze),e("div",Pe,[e("h6",Ge,c((a=$.value)==null?void 0:a.name),1),e("small",Te,c(((h=(m=$.value)==null?void 0:m.roles)==null?void 0:h.name)||"Staff"),1)])]),e("ul",We,[e("li",null,[e("a",{href:n("profile.edit"),class:"dropdown-item small"},[...t[9]||(t[9]=[e("i",{class:"bi bi-person-circle me-2"},null,-1),e("span",null,"Profile",-1)])],8,Me)]),t[11]||(t[11]=e("li",null,[e("hr",{class:"dropdown-divider my-1"})],-1)),e("li",null,[e("a",{class:"dropdown-item text-danger small",href:"#",onClick:t[3]||(t[3]=q(f=>G(n("logout"),"Are you sure want to logout?"),["prevent"]))},[...t[10]||(t[10]=[e("i",{class:"bi bi-box-arrow-right me-2"},null,-1),e("span",null,"Logout",-1)])])])])])])])):x("",!0),e("main",Ne,[z(s.$slots,"default",{},void 0,!0)])]),j(H,{ref_key:"modalConfirmationRef",ref:I},null,512)])],64)}}},Qe=Q(Ue,[["__scopeId","data-v-0ced97b6"]]);export{Qe as S};
