import{s as E,r as f,u as A,D as L,p as O,c as d,o as i,b as c,f as r,j as z,a as s,d as a,h as T,i as u,t as e,F as S,y as B,w as y,q as F,x as U,e as q,g as G}from"./app-CR2mpfjv.js";import{S as H}from"./StaffLayout-BXjUpHW-.js";import{_ as N}from"./InputError-DP-jnoxf.js";import{_ as J}from"./Notif-BJpCZgA4.js";import{_ as K}from"./ModalConfirmation-aFADB0PC.js";import{C as j}from"./vue-select-C8qRtjQL.js";import{f as M}from"./utils-Dr-qEmMV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-DFpGNh8k.js";const Q=["href"],W={class:"container me-lg-0 mx-auto mb-5"},X={class:"row mt-4"},Y={class:"col-12"},Z={class:"card p-3"},ss={class:"d-flex border-bottom border-primary pb-1"},ts={class:"h5 text-primary-emphasis"},es={class:"row g-2 mt-0 mt-lg-2"},os={class:"col-6 col-lg-3"},ls={class:"d-flex"},as={class:"scroll-x-hidden"},ns={class:"text-dark text-nowrap"},is={class:"col-6 col-lg-3"},ds={class:"d-flex"},rs={class:"scroll-x-hidden"},ms={class:"text-dark text-nowrap"},cs={class:"col-6 col-lg-3"},us={class:"d-flex"},fs={class:"scroll-x-hidden"},ps={class:"text-dark text-nowrap"},bs={class:"row g-2 mt-lg-2 mt-0"},gs={class:"col-6 col-lg-3"},vs={class:"d-flex"},ys={class:"scroll-x-hidden"},xs={class:"text-dark text-nowrap"},hs={class:"col-6 col-lg-3"},_s={class:"d-flex"},ws={class:"scroll-x-hidden"},ks={class:"text-dark text-nowrap"},Cs={class:"col-6 col-lg-3"},Ss={class:"d-flex"},Ns={class:"scroll-x-hidden"},Ms={class:"text-dark text-nowrap"},Ps={class:"row g-4 mt-0"},Ds={class:"col-12 col-lg-6"},Vs={class:"card sm p-3"},$s={class:"row"},As={class:"col-12"},zs={class:"d-flex border-primary border-bottom pb-2"},Bs={class:"scroll-container-2 scroll-container-lg-2"},js={class:"list-group list-group-flush"},Is={key:0,class:"list-group-item list-group-item-action"},Rs=["onClick"],Es=["id","href"],Ls={class:"d-flex"},Os={class:"text-secondary border-end border-2 pe-2 me-2"},Ts={class:"text-dark d-flex"},Fs=["onClick"],Us={class:"col-12 col-lg-6"},qs={class:"card sm p-3"},Gs={class:"row"},Hs={class:"col-12"},Js={class:"d-flex border-primary border-bottom pb-2"},Ks={class:"scroll-container-2 scroll-container-lg-2"},Qs={class:"list-group list-group-flush"},Ws={key:0,class:"list-group-item list-group-item-action"},Xs=["onClick"],Ys=["id","href"],Zs={class:"d-flex"},st={class:"text-secondary border-end border-2 pe-2 me-2"},tt={class:"text-dark d-flex"},et=["onClick"],ot={key:0,class:"modal fade",id:"addStaffModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},lt={class:"modal-dialog modal-dialog-centered"},at={class:"modal-content shadow mx-3"},nt={class:"modal-body bg-light"},it={class:"row mt-2 justify-content-center"},dt={class:"col-8 col-lg-7"},rt={key:1,class:"fst-italic fw-light"},mt={key:1,class:"modal fade",id:"newProgramModal",tabindex:"-1","aria-labelledby":"newProgramModal"},ct={class:"modal-dialog modal-dialog-centered"},ut={class:"modal-content shadow mx-3"},ft={class:"modal-header py-1 ps-3 pe-2"},pt={class:"modal-body bg-light"},bt={class:"row justify-content-center"},gt={class:"col-8 col-lg-7"},vt={class:"input-group input-group-sm bg-secondary bg-opacity-10 border-dark"},yt={class:"row justify-content-center mt-2"},xt={class:"col-8 col-lg-7"},Dt={__name:"Department",props:{staff_list:Array,staff_list_2:Array,department:Object,notif:Object,errors:Object},setup(l){const x=l,b=E().props.auth.user,P=f("Department"),h=f(null),_=f(null);f("placeholder");const g=f(null),v=f(null),p=A({staff_id:null}),m=A({name:null,pic_id:null});function D(n){document.getElementById(n).click()}function I(){p.post(route("department.staff.add",x.department.id),{onSuccess:()=>{V(!1),p.reset()},onError:n=>{for(let t in n)_.value.showToast("warning",n[t])}})}function R(){m.post(route("program.add",x.department.id),{onSuccess:()=>{w(!1),m.reset()}})}function V(n){if(g.value==null){const t=document.getElementById("addStaffModal");g.value=bootstrap.Modal.getOrCreateInstance(t)}n?g.value.show():g.value.hide()}function w(n){if(v.value==null){const t=document.getElementById("newProgramModal");v.value=bootstrap.Modal.getOrCreateInstance(t)}n?v.value.show():v.value.hide()}function $(n,t){h.value?h.value.showModal(n,t):console.error("modalConfirmationRef is null")}return L(()=>{}),O(()=>x.notif,n=>{const t=n;_.value.showToast(t.type,t.message)}),(n,t)=>(i(),d(S,null,[c(H,null,{header:z(()=>[s("a",{href:n.route("structural"),class:"bg-opacity-0 text-decoration-none text-primary-emphasis"},[...t[8]||(t[8]=[s("span",{class:"fw-light"},e("Structural"),-1)])],8,Q),t[9]||(t[9]=s("span",{class:"ms-2"},e("/"),-1)),u(" "+e(P.value),1)]),default:z(()=>[c(a(T),{title:P.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),c(K,{ref_key:"modalConfirmationRef",ref:h},null,512),s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ss,[s("span",ts,[t[10]||(t[10]=s("i",{class:"bi bi-building me-2"},null,-1)),u(" "+e("Department "+l.department.name),1)])]),t[25]||(t[25]=s("div",{class:"d-flex mt-2 d-lg-none"},[s("span",{class:"text-secondary"},e("Detail"))],-1)),s("div",es,[t[17]||(t[17]=s("div",{class:"col-lg-1 d-none d-lg-block"},[s("div",{class:"d-flex w-100 h-100"},[s("span",{class:"text-secondary my-auto"},e("Detail"))])],-1)),s("div",os,[s("div",ls,[t[12]||(t[12]=s("i",{class:"bi bi-person text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[11]||(t[11]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Manager"),-1)),s("div",as,[s("span",ns,e(l.department.manager.name),1)])])])]),s("div",is,[s("div",ds,[t[14]||(t[14]=s("i",{class:"bi bi-people text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[13]||(t[13]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Staff"),-1)),s("div",rs,[s("span",ms,e(l.department.staff.length+(l.department.staff.length>1?" persons":" person")),1)])])])]),s("div",cs,[s("div",us,[t[16]||(t[16]=s("i",{class:"bi bi-grid text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[15]||(t[15]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Program"),-1)),s("div",fs,[s("span",ps,e(l.department.program.length+(l.department.program.length>1?" programs":" program")),1)])])])])]),t[26]||(t[26]=s("div",{class:"d-flex mt-2 d-lg-none"},[s("span",{class:"text-secondary"},e("Cashflow"))],-1)),s("div",bs,[t[24]||(t[24]=s("div",{class:"col-lg-1 d-none d-lg-block"},[s("div",{class:"d-flex w-100 h-100"},[s("span",{class:"text-secondary my-auto"},e("Cashflow"))])],-1)),s("div",gs,[s("div",vs,[t[19]||(t[19]=s("i",{class:"bi bi-list-columns-reverse text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[18]||(t[18]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Budget"),-1)),s("div",ys,[s("span",xs,e(a(M)(l.department.budget)),1)])])])]),s("div",hs,[s("div",_s,[t[21]||(t[21]=s("i",{class:"bi bi-box-arrow-in-down text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[20]||(t[20]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Disbursement"),-1)),s("div",ws,[s("span",ks,e(a(M)(l.department.disbursement)),1)])])])]),s("div",Cs,[s("div",Ss,[t[23]||(t[23]=s("i",{class:"bi bi-box-arrow-up text-primary fs-5 my-auto me-2"},null,-1)),s("div",null,[t[22]||(t[22]=s("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},e("Expense"),-1)),s("div",Ns,[s("span",Ms,e(a(M)(l.department.expense)),1)])])])])])])])]),s("div",Ps,[s("div",Ds,[s("div",Vs,[s("div",$s,[s("div",As,[s("div",zs,[t[28]||(t[28]=s("span",{class:"text-primary-emphasis me-auto my-auto h6"},[s("i",{class:"bi bi-people me-1"}),u(" "+e("Staff List"))],-1)),a(b).id==l.department.manager_id?(i(),d("button",{key:0,onClick:t[0]||(t[0]=o=>V(!0)),class:"btn btn-sm btn-outline-primary border-0 ms-auto py-0"},[...t[27]||(t[27]=[s("i",{class:"bi bi-plus-lg d-lg-none"},null,-1),s("span",{class:"d-lg-block d-none"},e("New Staff"),-1)])])):r("",!0)])])]),s("div",Bs,[s("li",js,[l.department.staff.length==0?(i(),d("ul",Is,[...t[29]||(t[29]=[s("span",{class:"fst-italic text-secondary"},e("No staff found."),-1)])])):r("",!0),l.department.staff.length>0?(i(!0),d(S,{key:1},B(l.department.staff,(o,k)=>(i(),d("ul",{onClick:C=>D("staff_"+(o.id*7-3)),class:"list-group-item list-group-item-action mb-0 py-2 px-0"},[s("a",{id:"staff_"+(o.id*7-3),href:n.route("profile.edit",o.id)},null,8,Es),s("div",Ls,[s("span",Os,e(k+1),1),s("span",Ts,[u(e(o.name)+" ",1),t[30]||(t[30]=s("i",{class:"bi bi-box-arrow-up-right ms-2 my-auto",style:{"font-size":"0.8rem"}},null,-1))]),s("button",{class:"btn btn-sm btn-outline-secondary border-0 ms-auto py-0",onClick:y(C=>$(n.route("department.staff.remove",o.id),"Are you sure want to remove "+o.name+" from Department "+l.department.name+" staff?"),["stop"])},[...t[31]||(t[31]=[s("i",{class:"bi bi-trash3"},null,-1)])],8,Fs)])],8,Rs))),256)):r("",!0)])])])]),s("div",Us,[s("div",qs,[s("div",Gs,[s("div",Hs,[s("div",Js,[t[33]||(t[33]=s("span",{class:"text-primary-emphasis me-auto my-auto h6"},[s("i",{class:"bi bi-grid me-1"}),u(" "+e("Program List"))],-1)),a(b).id==l.department.manager_id?(i(),d("button",{key:0,onClick:t[1]||(t[1]=o=>w(!0)),class:"btn btn-sm btn-outline-primary border-0 ms-auto py-0"},[...t[32]||(t[32]=[s("i",{class:"bi bi-plus-lg d-lg-none"},null,-1),s("span",{class:"d-lg-block d-none"},e("New Program"),-1)])])):r("",!0)])])]),s("div",Ks,[s("li",Qs,[l.department.program.length==0?(i(),d("ul",Ws,[...t[34]||(t[34]=[s("span",{class:"fst-italic text-secondary"},e("No program found."),-1)])])):r("",!0),l.department.program.length>0?(i(!0),d(S,{key:1},B(l.department.program,(o,k)=>(i(),d("ul",{onClick:C=>D("program_"+(o.id*7-3)),class:"list-group-item list-group-item-action mb-0 py-2 px-0"},[s("a",{id:"program_"+(o.id*7-3),href:n.route("program",o.id)},null,8,Ys),s("div",Zs,[s("span",st,e(k+1),1),s("span",tt,[u(e(o.name)+" ",1),t[35]||(t[35]=s("i",{class:"bi bi-box-arrow-up-right ms-2 my-auto",style:{"font-size":"0.8rem"}},null,-1))]),s("button",{class:"btn btn-sm btn-outline-secondary border-0 ms-auto py-0",onClick:y(C=>$(n.route("program.delete",o.id),"Are you sure want to remove "+o.name+" from Department "+l.department.name+" program?"),["stop"])},[...t[36]||(t[36]=[s("i",{class:"bi bi-trash3"},null,-1)])],8,et)])],8,Xs))),256)):r("",!0)])])])])])])]),_:1}),a(b).id==l.department.manager_id?(i(),d("div",ot,[s("div",lt,[s("div",at,[t[39]||(t[39]=F('<div class="modal-header py-1 ps-3 pe-2"><span class="modal-title fs-5 text-primary-emphasis" id="exampleModalLabel"><i class="bi bi-person-plus border-secondary border-end me-2 pe-2"></i> New Staff</span><button type="button" class="btn btn-sm ms-auto" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button></div>',1)),s("form",{onSubmit:t[3]||(t[3]=y(o=>I(),["prevent"]))},[s("div",nt,[s("div",it,[t[37]||(t[37]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"add_staff",class:"form-label d-inline-block"},e("Staff"))],-1)),s("div",dt,[l.staff_list.length>0?(i(),U(a(j),{key:0,class:"bg-white text-nowrap",options:l.staff_list,label:"name",reduce:o=>o.id,modelValue:a(p).staff_id,"onUpdate:modelValue":t[2]||(t[2]=o=>a(p).staff_id=o),placeholder:"Select staff"},null,8,["options","reduce","modelValue"])):r("",!0),l.staff_list.length==0?(i(),d("span",rt,e("All staf already belongs to department."))):r("",!0),c(N,{messages:a(p).errors.staff_id,class:"mt-2"},null,8,["messages"])])])]),t[38]||(t[38]=s("div",{class:"modal-footer p-1"},[s("button",{type:"submit",class:"btn btn-sm btn-primary"},e("Add"))],-1))],32)])])])):r("",!0),a(b).id==l.department.manager_id?(i(),d("div",mt,[s("div",ct,[s("div",ut,[s("div",ft,[t[41]||(t[41]=s("span",{class:"modal-title fs-5 text-primary-emphasis"},[s("i",{class:"bi bi-app-indicator pe-2"}),u(" "+e("New Program"))],-1)),s("button",{type:"button",class:"btn btn-sm ms-auto",onClick:t[4]||(t[4]=o=>w(!1))},[...t[40]||(t[40]=[s("i",{class:"bi bi-x-lg"},null,-1)])])]),s("form",{onSubmit:t[7]||(t[7]=y(o=>R(),["prevent"]))},[s("div",pt,[s("div",bt,[t[43]||(t[43]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"department_name",class:"form-label d-inline-block"},e("Name"))],-1)),s("div",gt,[s("div",vt,[t[42]||(t[42]=s("label",{class:"form-label text-secondary my-auto px-2",for:"department_name"},e("Program"),-1)),q(s("input",{type:"text",class:"form-control form-control-sm",id:"department_name","onUpdate:modelValue":t[5]||(t[5]=o=>a(m).name=o),placeholder:"Finance"},null,512),[[G,a(m).name]])]),c(N,{message:a(m).errors.name,class:"mt-2"},null,8,["message"])])]),s("div",yt,[t[44]||(t[44]=s("div",{class:"col-4 col-lg-3"},[s("label",{for:"stand_pic",class:"form-label d-inline-block"},e("PIC"))],-1)),s("div",xt,[c(a(j),{class:"bg-white text-nowrap",options:l.staff_list_2,label:"name",reduce:o=>o.id,modelValue:a(m).pic_id,"onUpdate:modelValue":t[6]||(t[6]=o=>a(m).pic_id=o),placeholder:"Select staff"},null,8,["options","reduce","modelValue"]),c(N,{message:a(m).errors.pic_id,class:"mt-2"},null,8,["message"])])])]),t[45]||(t[45]=s("div",{class:"modal-footer p-1"},[s("button",{type:"submit",class:"btn btn-sm btn-primary"},e("Create"))],-1))],32)])])])):r("",!0),c(J,{ref_key:"toastNotifRef",ref:_},null,512)],64))}};export{Dt as default};
