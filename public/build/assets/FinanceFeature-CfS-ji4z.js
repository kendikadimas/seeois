import{N as $t,A as h,J as lt,B as Q,V as jt,Y as Bt,L as Ot,c as o,o as n,d as c,f as i,l as p,b as t,D as l,E as Tt,q as R,t as s,T as g,h as w,F as M,e as D,w as V,U as ot,H as X,p as ct,K as At,a2 as Et,M as Lt}from"./vendor-DX-UyPxd.js";import{S as It}from"./StaffLayout-tuRC_TMq.js";import{_ as F}from"./InputError-2po89HeZ.js";import{_ as Wt}from"./Notif-CUZ2cLZ_.js";import{_ as qt}from"./ModalConfirmation-CA9Q23sM.js";import{f as B,g as O,b as ut}from"./utils-C_0HOUGI.js";import"./bootstrap-O9kK6gmf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ht={class:"container me-lg-0 mx-auto mb-5"},Jt={class:"row gx-2 mt-4 d-lg-none"},Kt={class:"col-12"},Yt={class:"card p-2 bg-light"},Gt={class:"d-flex"},Qt={class:"row gx-4 mt-4"},Xt={class:"col-12"},Zt={class:"card p-3 shadow-sm bg-white"},te={class:"d-flex text-primary-emphasis h5"},ee={class:"d-lg-none"},se={key:0},le={key:0},oe={key:0,class:"mb-2"},ne={key:0},ie={class:"row gx-2"},ae={class:"col-lg-10 col-12"},re={class:"row g-2"},de={class:"col-6 col-lg-3"},ce={class:"text-dark"},ue={class:"col-6 col-lg-3"},me={class:"text-dark"},be={class:"col-6 col-lg-3"},ve={class:"text-dark"},fe={class:"col-6 col-lg-3"},pe=["href"],_e={class:"row"},ye={class:"col"},ge={class:"d-flex mt-2 pt-1",style:"font-size: 0.8rem;"},he={class:"ms-0 my-auto ms-lg-auto me-2 text-secondary"},xe={key:0},ke={class:"row gx-2"},we={class:"col-12 col-lg-10"},Ce={class:"row g-2"},Se={class:"col-12 col-lg-3"},ze={class:"row g-2"},Le={class:"col-6 col-lg-12"},Ue={class:"text-dark"},Me={class:"col-6 col-lg-12"},Ve=["href"],Pe={key:1},Re={class:"col-12 col-lg-9"},De={class:"d-block mb-2"},Fe={class:"text-secondary d-block",style:"font-size: 0.8rem;"},Ne={class:"row gx-2"},$e={class:"col-4"},je={class:"col-4"},Be={class:"col-4 scroll-x-hidden"},Oe={class:"text-nowrap"},Te={class:"row"},Ae={class:"col"},Ee={class:"d-flex mt-2 pt-1",style:"font-size: 0.8rem;"},Ie={class:"ms-0 my-auto ms-lg-auto me-lg-2 text-secondary"},We={class:"card border-top border-0 border-primary rounded-top-0"},qe={class:"row g-2 mt-2"},He={class:"col-12 col-lg-3"},Je=["href"],Ke={class:"text-nowrap"},Ye={key:0,style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},Ge={class:"col-12 col-lg-9"},Qe={class:"row gx-4"},Xe={key:0,class:"col-12 col-lg-6"},Ze={class:"row g-2"},ts={class:"col-12"},es={class:"col-12"},ss={key:0,class:"text-dark d-block"},ls={key:1,class:"d-block text-dark fst-italic"},os={class:"col-12"},ns={class:""},is=["onClick"],as={key:0,class:"bi bi-circle-fill position-absolute top-0 start-100 translate-middle text-danger",style:"font-size: 0.5rem;"},rs={key:1,class:"text-secondary"},ds={key:0,class:"col-12"},cs={class:"card mt-2 bg-light"},us={class:"row mt-2"},ms={class:"col-12 d-flex"},bs=["href"],vs={class:"col-12"},fs={class:"card border-1 m-2"},ps=["src"],_s={key:0,class:"d-flex mb-1"},ys={key:1,class:"d-flex text-center w-100 px-2 mb-1"},gs={class:"fw-light text-secondary",style:"font-size: 0.8rem;"},hs={key:0,class:"scroll-x-hidden"},xs={class:"text-nowrap"},ks={class:"fw-light text-secondary ms-auto",style:"font-size: 0.8rem;"},ws={key:0,class:"col-12 col-lg-6"},Cs={class:"row g-2"},Ss={class:"col-12"},zs={key:0,class:"mt-1"},Ls={key:1,class:"input-group input-group-sm bg-light border rounded-2 mt-1"},Us=["value"],Ms={class:"col-12"},Vs={key:0,class:"col-12"},Ps={class:"rounded-2 border"},Rs={class:"collapse p-3",id:"batchLevelAssignmentDiv"},Ds={class:"mb-3 d-block"},Fs={class:"input-group input-group-sm bg-light border border-1 border-secondary-subtle rounded-2"},Ns=["value"],$s={class:"row gx-4 mt-4"},js={class:"col-12 col-lg-6"},Bs={key:0,class:"card sm p-3"},Os={class:"d-flex mt-2"},Ts={class:"input-group"},As={class:"scroll-container-2 scroll-container-lg-2"},Es={class:"list-group list-group-flush"},Is={key:0,class:"list-group-item list-group-item-action"},Ws=["onClick"],qs={class:"mx-2 d-flex"},Hs=["value"],Js={key:1,class:"d-flex"},Ks={key:0,class:"text-danger ms-auto border-danger-subtle border px-2 rounded-2 text-nowrap d-flex",style:{"font-size":"0.8rem"}},Ys={key:2,class:"text-secondary ms-2"},Gs={key:0,class:"modal fade",id:"modalSettingContribution",tabindex:"-1","aria-labelledby":"modalSettingContribution"},Qs={class:"modal-dialog modal-dialog-centered"},Xs={class:"modal-content shadow mx-3 text-dark"},Zs={class:"modal-body bg-light pt-1"},tl={class:"row justify-content-center mb-2"},el={class:"col-8 col-lg-7"},sl={class:"row justify-content-center mb-2"},ll={class:"col-8 col-lg-7"},ol=["value"],nl={class:"row justify-content-center"},il={class:"col-8 col-lg-7"},al=["value"],rl={key:1,class:"modal fade",id:"modalSettingPayroll",tabindex:"-1","aria-labelledby":"modalSettingPayroll"},dl={class:"modal-dialog modal-lg modal-dialog-centered"},cl={class:"modal-content shadow mx-3 text-dark"},ul={class:"modal-header py-1 ps-3 pe-2"},ml={class:"modal-body bg-light pt-3"},bl={class:"row justify-content-center mb-3"},vl={class:"col-12 col-lg-8"},fl={class:"input-group input-group-sm bg-secondary rounded-2 ps-2"},pl={class:"row justify-content-center mb-3"},_l={class:"col-12 col-lg-8"},yl={key:0,class:"d-flex mb-2"},gl={class:"me-2"},hl={class:"input-group input-group-sm bg-secondary text-white rounded-2 px-2"},xl=["for"],kl=["id","onUpdate:modelValue"],wl=["id","onUpdate:modelValue"],Cl={class:"d-flex"},Sl={class:"w-100"},zl={class:"w-100"},Ll={class:"d-flex ms-2 my-auto"},Ul={class:"text-nowrap text-primary-emphasis"},Ml=["onClick"],Vl={class:"d-block mt-2"},Pl={key:0,class:"d-flex my-auto text-danger",style:{"font-size":"0.8rem"}},Rl={key:1,class:"d-flex my-auto text-danger",style:{"font-size":"0.8rem"}},Al={__name:"FinanceFeature",props:{default_contribution_id:Number,contribution_config:Object,contribution_users:Array,payroll_detail:Array,payroll_balance:Object,filter:Object,notif:Object,errors:Object},setup(a){var ht,xt,kt;const _=a,P=$t().props.auth.user,mt=h("Finance Feature"),nt=h(null),it=h(null);h("placeholder");const bt=new Date,Z=h(null),tt=h(null),T=lt(()=>new Date().getMonth()+1),et=h(!1),vt=lt(()=>et.value?"up":"down"),A=h(!1);h(!1);const x=h(1),st=h(null),m=lt(()=>{var r;return(r=_.contribution_users.find(e=>e.id==$.value))==null?void 0:r.contribution.receipt.find(e=>e.id==st.value)}),$=h(null),b=lt(()=>_.contribution_users.find(r=>r.id==$.value)),C=Q({price:((ht=_.contribution_config)==null?void 0:ht.financial_id)>0?_.contribution_config.price:0,start:((xt=_.contribution_config)==null?void 0:xt.financial_id)>0?_.contribution_config.start:new Date().getMonth(),end:((kt=_.contribution_config)==null?void 0:kt.financial_id)>0?_.contribution_config.period+_.contribution_config.start-1:new Date().getMonth()}),at=Q({keyword:_.filter.contribution.keyword}),v=Q({balance:_.payroll_balance.balance,level_list:_.payroll_detail}),E=Q({user_id:null,level:null}),S=Q({staff_id_list:[],level:""});function Ut(){C.post(route("contribution.settings"),{onSuccess:()=>{_t(!1),C.reset()},onError:r=>{for(let e in r)it.value.showToast("warning",r[e])}})}function Mt(){v.post(route("payroll.settings"),{onSuccess:()=>{rt(!1)}})}function ft(){E.post(route("payroll.update.single"))}function pt(){S.post(route("payroll.update.batch"))}function _t(r){if(Z.value==null){const e=document.getElementById("modalSettingContribution");Z.value=bootstrap.Modal.getOrCreateInstance(e)}r?Z.value.show():Z.value.hide()}function rt(r){if(tt.value==null){const e=document.getElementById("modalSettingPayroll");tt.value=bootstrap.Modal.getOrCreateInstance(e)}r?tt.value.show():tt.value.hide()}function Vt(r){$.value=r}function yt(r){st.value=r}function Pt(){at.post(route("contribution.filter"))}function Rt(){v.level_list.push({level:_.payroll_detail.length>0?Math.max(...v.level_list.filter(r=>r.deleted_at==null).map(r=>r.level))+1:0,salary:0,deleted_at:null})}function Dt(r){v.level_list[r].id>0?v.level_list[r].deleted_at=bt:v.level_list.splice(r,1)}function Ft(){v.reset()}function Nt(r,e){nt.value?nt.value.showModal(r,e):console.error("modalConfirmationRef is null")}const I=h(window.innerWidth>=768),gt=()=>{I.value=window.innerWidth>=768};return jt(()=>{window.addEventListener("resize",gt)}),Bt(()=>{window.removeEventListener("resize",gt)}),Ot(()=>_.notif,r=>{const e=r;it.value.showToast(e.type,e.message)}),(r,e)=>(n(),o(M,null,[c(It,null,{header:p(()=>[w(s(mt.value),1)]),default:p(()=>{var d,y,j,wt;return[c(l(Tt),{title:mt.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),c(qt,{ref_key:"modalConfirmationRef",ref:nt},null,512),t("div",Ht,[t("div",Jt,[t("div",Kt,[t("div",Yt,[t("div",Gt,[t("button",{class:R("btn btn-sm btn-outline-primary border-0 w-50 "+(x.value==1?"active":"")),onClick:e[0]||(e[0]=()=>{x.value=0})},s("Contribution"),2),e[25]||(e[25]=t("div",{class:"mx-1"},null,-1)),t("button",{class:R("btn btn-sm btn-outline-primary border-0 w-50 "+(x.value==2?"active":"")),onClick:e[1]||(e[1]=()=>{x.value=0})},s("Payroll"),2)])])])]),t("div",Qt,[t("div",Xt,[t("div",Zt,[t("div",te,[e[26]||(e[26]=t("span",{class:"d-none d-lg-inline"},s("Contribution & Payroll"),-1)),t("div",ee,[c(g,{name:"fade-slide-ltr",onAfterLeave:e[2]||(e[2]=()=>{x.value=2})},{default:p(()=>[x.value==1?(n(),o("span",se,s("Contribution"))):i("",!0)]),_:1}),c(g,{name:"fade-slide-rtl",onAfterLeave:e[3]||(e[3]=()=>{x.value=1})},{default:p(()=>[x.value==2?(n(),o("span",le,s("Payroll"))):i("",!0)]),_:1})]),t("button",{onClick:e[4]||(e[4]=()=>et.value=!et.value),class:"btn btn-sm btn-outline-primary border-0 py-0 ms-auto",style:"font-size: 0.8rem;"},[w(s(vt.value=="up"?"hide":"settings")+" ",1),t("i",{class:R("bi my-auto bi-chevron-"+vt.value),style:"font-size: 0.8rem;"},null,2)])]),c(g,{name:"fade"},{default:p(()=>[et.value?(n(),o("div",oe,[c(g,{name:"fade-slide-ltr"},{default:p(()=>[x.value==1||I.value?(n(),o("div",ne,[t("div",ie,[e[32]||(e[32]=t("div",{class:"col-2 d-none d-lg-block"},[t("div",{class:"d-flex h-100"},[t("span",{class:"text-primary my-auto"},s("Contribution"))])],-1)),t("div",ae,[t("div",re,[t("div",de,[e[27]||(e[27]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Charge"),-1)),t("span",ce,s(l(B)(a.contribution_config.price)),1)]),t("div",ue,[e[28]||(e[28]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Period"),-1)),t("span",me,s(l(O)(a.contribution_config.start)+" - "+l(O)(a.contribution_config.start+a.contribution_config.period-1)),1)]),t("div",be,[e[29]||(e[29]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Total"),-1)),t("span",ve,s(l(B)(a.contribution_config.period*a.contribution_config.price)),1)]),t("div",fe,[e[31]||(e[31]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Set by"),-1)),t("a",{href:r.route("profile.edit",a.contribution_config.financial_id),class:"text-dark text-decoration-none d-flex"},[w(s(a.contribution_config.financial.name)+" ",1),e[30]||(e[30]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},null,-1))],8,pe)])])])]),t("div",_e,[t("div",ye,[t("div",ge,[t("span",he,s(a.contribution_config.financial_id>0?"Set on "+l(ut)(a.contribution_config.updated_at):"Wait for Financial set up"),1),l(P).roles_id==2?(n(),o("button",{key:0,class:"btn btn-sm btn-outline-secondary ms-auto ms-lg-0 py-0 d-flex border-0",onClick:e[5]||(e[5]=u=>_t(!0))},[...e[33]||(e[33]=[t("i",{class:"bi bi-gear my-auto",style:"font-size:0.8rem;"},null,-1)])])):i("",!0)])])])])):i("",!0)]),_:1}),c(g,{name:"fade-slide-rtl"},{default:p(()=>{var u,z,L;return[x.value==2||I.value?(n(),o("div",xe,[t("div",ke,[e[37]||(e[37]=t("div",{class:"col-2 d-none d-lg-block"},[t("div",{class:"d-flex h-100"},[t("span",{class:"text-primary mt-2"},s("Payroll"))])],-1)),t("div",we,[t("div",Ce,[t("div",Se,[t("div",ze,[t("div",Le,[e[34]||(e[34]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Budget"),-1)),t("span",Ue,s(l(B)(a.payroll_balance.balance)),1)]),t("div",Me,[e[36]||(e[36]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Set by"),-1)),a.payroll_balance.financial_id>0?(n(),o("a",{key:0,href:r.route("profile.edit",(u=a.payroll_balance)==null?void 0:u.financial_id),class:"text-dark text-decoration-none d-flex"},[w(s(((L=(z=a.payroll_balance)==null?void 0:z.financial)==null?void 0:L.name)??"-")+" ",1),e[35]||(e[35]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-box-arrow-up-right my-auto ms-2"},null,-1))],8,Ve)):(n(),o("span",Pe,s(" - ")))])])]),t("div",Re,[(n(!0),o(M,null,D(a.payroll_detail,k=>(n(),o("div",De,[t("span",Fe,s("Level "+k.level),1),t("div",Ne,[t("div",$e,s(k.salary+" percent"),1),t("div",je,s(k.employee+(k.employee>1?" persons":" person")),1),t("div",Be,[t("span",Oe,s(l(B)(k.salary_idr)+" /person"),1)])])]))),256))])])])]),t("div",Te,[t("div",Ae,[t("div",Ee,[t("span",Ie,s(a.payroll_balance.financial_id>0?"Set on "+l(ut)(a.payroll_balance.updated_at):"Wait for Financial set up"),1),l(P).roles_id==2?(n(),o("button",{key:0,class:"ms-auto ms-lg-0 btn btn-sm btn-outline-secondary py-0 d-flex border-0",onClick:e[6]||(e[6]=k=>rt(!0))},[...e[38]||(e[38]=[t("i",{class:"bi bi-gear my-auto",style:"font-size:0.8rem;"},null,-1)])])):i("",!0)])])])])):i("",!0)]}),_:1})])):i("",!0)]),_:1}),t("div",We,[t("div",qe,[t("div",He,[e[39]||(e[39]=t("span",{class:"text-secondary d-block",style:"font-size: 0.8rem;"},s("Staff"),-1)),t("a",{href:((d=b.value)==null?void 0:d.id)>0?r.route("profile.edit",(y=b.value)==null?void 0:y.id):"",class:"text-dark text-decoration-none d-flex scroll-x-hidden"},[t("span",Ke,s(((j=b.value)==null?void 0:j.id)>0?b.value.name:" - "),1),((wt=b.value)==null?void 0:wt.id)>0?(n(),o("i",Ye)):i("",!0)],8,Je)]),t("div",Ge,[t("div",Qe,[c(g,{name:"fade-slide-ltr"},{default:p(()=>{var u,z,L,k,f,W,Ct,St,zt;return[x.value==1||I.value?(n(),o("div",Xe,[t("div",Ze,[e[46]||(e[46]=t("div",{class:"col-12 d-lg-block d-none"},[t("div",{class:"d-flex bg-light p-3"},[t("span",{class:"text-primary-emphasis h6 mb-0 text-center"},s("Contribution"))])],-1)),t("div",ts,[e[40]||(e[40]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block"},s("Progress "),-1)),(n(!0),o(M,null,D(a.contribution_config.period,U=>{var q,H,J,N,K,Y,G,dt;return n(),o("div",{class:R("btn shadow-sm px-1 py-0 me-2 "+(U+((q=a.contribution_config)==null?void 0:q.start)-1<=T.value&&U>((H=b.value)!=null&&H.contribution?(N=(J=b.value)==null?void 0:J.contribution)==null?void 0:N.months:0)?"bg-danger bg-opacity-25":"")+(U<=((Y=(K=b.value)==null?void 0:K.contribution)==null?void 0:Y.months)?"bg-primary bg-opacity-25":"bg-secondary bg-opacity-25 border-dark-subtle border-1"))},[t("span",{style:"font-size: 0.7rem;",class:R("position-relative "+(U<=((dt=(G=b.value)==null?void 0:G.contribution)==null?void 0:dt.months)?"text-primary":"text-secondary"))},s(l(O)(U+a.contribution_config.start-1,"short")),3)],2)}),256))]),t("div",es,[e[41]||(e[41]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block mt-2"},s("Status "),-1)),$.value>0?(n(),o("span",ss,s(a.contribution_config.start+((u=b.value)!=null&&u.contribution?b.value.contribution.months-1:0)<=T.value?"Late for "+(T.value-((z=a.contribution_config)==null?void 0:z.start)-((L=b.value)!=null&&L.contribution?((f=(k=b.value)==null?void 0:k.contribution)==null?void 0:f.months)-1:-1)+(T.value-((W=a.contribution_config)==null?void 0:W.start)-((Ct=b.value)!=null&&Ct.contribution?((zt=(St=b.value)==null?void 0:St.contribution)==null?void 0:zt.months)-1:-1)>1?" months":" month")):"On track."),1)):i("",!0),$.value<=0?(n(),o("span",ls,s("based on this month ("+l(O)(T.value)+")"),1)):i("",!0)]),t("div",os,[e[43]||(e[43]=t("span",{style:"font-size:0.8rem;",class:"text-secondary d-block mt-2"},s("Receipt "),-1)),c(g,{name:"fade",mode:"out-in"},{default:p(()=>{var U,q,H,J;return[t("div",ns,[(q=(U=b.value)==null?void 0:U.contribution)!=null&&q.receipt?(n(!0),o(M,{key:0},D((J=(H=b.value)==null?void 0:H.contribution)==null?void 0:J.receipt,N=>{var K,Y,G;return n(),o("button",{class:R("border-1 border-primary-subtle btn btn-sm btn-outline-primary me-2 py-0 position-relative "+(N.id==((K=m.value)==null?void 0:K.id)?"active":"")),key:N.id,onClick:dt=>yt(N.id)},[w(s(((G=(Y=b.value)==null?void 0:Y.contribution)==null?void 0:G.receipt.indexOf(N))+1)+" ",1),e[42]||(e[42]=t("i",{class:"bi bi-receipt ms-0"},null,-1)),N.financial_id==null?(n(),o("i",as)):i("",!0)],10,is)}),128)):(n(),o("span",rs,s(" - ")))])]}),_:1})]),c(g,{name:"fade"},{default:p(()=>[st.value?(n(),o("div",ds,[t("div",cs,[t("div",us,[t("div",ms,[t("a",{href:"/storage/local/images/receipt/contribution/"+m.value.receipt,class:"btn btn-sm btn-light border-0 mx-auto",download:""},[w(s(m.value.receipt)+" ",1),e[44]||(e[44]=t("i",{style:"font-size: 0.8rem;",class:"bi bi-download text-primary ms-2 my-auto"},null,-1))],8,bs),t("button",{class:"btn btn-sm btn-light me-2",onClick:e[7]||(e[7]=U=>yt(null))},[...e[45]||(e[45]=[t("i",{class:"bi bi-x-lg"},null,-1)])])]),t("div",vs,[t("div",fs,[c(g,{name:"fade",mode:"out-in"},{default:p(()=>[(n(),o("img",{key:m.value,src:"/storage/local/images/receipt/contribution/"+m.value.receipt,class:"w-100 rounded",alt:"image"},null,8,ps))]),_:1})]),l(P).roles_id==2?(n(),o("div",_s,[c(g,{name:"fade",mode:"out-in"},{default:p(()=>[t("button",{onClick:e[8]||(e[8]=U=>Nt(r.route("contribution.validation",m.value.id),"Confirm to "+(m.value.financial_id?"unvalidate":"validate")+" "+m.value.receipt+"?")),class:R("mx-2 w-100 btn btn-sm btn-"+(m.value.financial_id?"secondary":"success")),style:"font-size: 0.8rem;"},s(m.value.financial_id?"Unvalid for "+m.value.months+(m.value.months>1?" months":" month"):"Valid for "+m.value.months+(m.value.months>1?" months":" month")),3)]),_:1})])):i("",!0),l(P).roles_id!==2?(n(),o("div",ys,[c(g,{name:"fade",mode:"out-in"},{default:p(()=>[t("span",gs,[w(s(m.value.financial_id?"Valid for "+m.value.months+(m.value.months>1?" months":" month")+" by ":"Unvalid for "+m.value.months+(m.value.months>1?" months":" month"))+" ",1),m.value.financial_id?(n(),o("span",hs,[t("span",xs,s(m.value.financial.name),1)])):i("",!0)])]),_:1}),c(g,{name:"fade",mode:"out-in"},{default:p(()=>[t("span",ks,s(m.value.financial_id?l(ut)(m.value.updated_at):""),1)]),_:1})])):i("",!0)])])])])):i("",!0)]),_:1})])])):i("",!0)]}),_:1}),c(g,{name:"fade-slide-rtl"},{default:p(()=>{var u,z,L,k;return[x.value==2||I.value?(n(),o("div",ws,[t("div",Cs,[e[56]||(e[56]=t("div",{class:"col-12 d-lg-block d-none"},[t("div",{class:"d-flex bg-light p-3"},[t("span",{class:"text-primary-emphasis h6 mb-0 text-center"},s("Payroll"))])],-1)),t("div",Ss,[e[49]||(e[49]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Level"),-1)),l(P).roles_id!==2||!(((u=b.value)==null?void 0:u.id)>0)?(n(),o("span",zs,s(((z=b.value)==null?void 0:z.level)??" - "),1)):i("",!0),l(P).roles_id==2&&((L=b.value)==null?void 0:L.id)>0?(n(),o("div",Ls,[V(t("select",{"onUpdate:modelValue":e[9]||(e[9]=f=>l(E).level=f),class:"form-select border-0"},[e[47]||(e[47]=t("option",{value:"0"},s("Unset"),-1)),(n(!0),o(M,null,D(a.payroll_detail,f=>(n(),o("option",{value:f.level},s("Level "+f.level),9,Us))),256))],512),[[ot,l(E).level]]),t("button",{onClick:e[10]||(e[10]=(...f)=>ft&&ft(...f)),class:"btn btn-sm btn-outline-primary border-0 py-0"},[...e[48]||(e[48]=[t("i",{class:"bi bi-check-lg"},null,-1)])])])):i("",!0)]),t("div",Ms,[e[50]||(e[50]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Salary (Rp)"),-1)),t("span",null,s(l(B)(((k=a.payroll_detail.find(f=>{var W;return f.level==((W=b.value)==null?void 0:W.level)}))==null?void 0:k.salary_idr)??0)),1)]),l(P).roles_id==2?(n(),o("div",Vs,[t("div",Ps,[t("button",{onClick:e[11]||(e[11]=()=>{A.value=!A.value}),"data-bs-toggle":"collapse","data-bs-target":"#batchLevelAssignmentDiv",class:"btn btn-sm text-primary border-0 w-100 py-2 d-flex"},[...e[51]||(e[51]=[w(s("Batch Level Assignment")+" ",-1),t("i",{class:"bi bi-chevron-down ms-auto"},null,-1)])]),t("div",Rs,[e[54]||(e[54]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Selected staff"),-1)),t("span",Ds,s(l(S).staff_id_list.length+(l(S).staff_id_list.length>1?" persons":" person")),1),c(F,{message:l(S).errors.staff_id_list},null,8,["message"]),e[55]||(e[55]=t("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},s("Update to"),-1)),t("div",Fs,[e[53]||(e[53]=t("span",{class:"form-label px-2 py-0 my-auto text-secondary",for:"batch_level"},s("Level"),-1)),V(t("select",{id:"batch_level","onUpdate:modelValue":e[12]||(e[12]=f=>l(S).level=f),class:"form-select border-0"},[e[52]||(e[52]=t("option",{value:""},s("Unset"),-1)),(n(!0),o(M,null,D(a.payroll_detail,f=>(n(),o("option",{value:f.level},s("Level "+f.level),9,Ns))),256))],512),[[ot,l(S).level]])]),c(F,{message:l(S).errors.level},null,8,["message"]),t("button",{onClick:e[13]||(e[13]=(...f)=>pt&&pt(...f)),class:"btn btn-sm btn-primary border-0 py-1 mt-3 w-100"},s("Update Level"))])])])):i("",!0)])])):i("",!0)]}),_:1})])])])])])])]),t("div",$s,[t("div",js,[c(g,{name:"fade",mode:"out-in"},{default:p(()=>[st.value==null?(n(),o("div",Bs,[e[60]||(e[60]=t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"d-flex border-primary border-bottom pb-2"},[t("span",{class:"text-primary-emphasis me-auto my-auto h6"},[t("i",{class:"bi bi-people me-1"}),w(" "+s("Staff List"))])])])],-1)),t("div",Os,[l(S).staff_id_list.length>0?(n(),o("button",{key:0,class:"btn btn-sm btn-outline-primary border me-2 text-nowrap",onClick:e[14]||(e[14]=()=>{l(S).staff_id_list=[]})},s("Unselect all"))):i("",!0),t("div",Ts,[V(t("input",{type:"text",class:"form-control form-control-sm py-0",placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1","onUpdate:modelValue":e[15]||(e[15]=u=>l(at).keyword=u),onInput:Pt},null,544),[[X,l(at).keyword]]),e[57]||(e[57]=t("span",{class:"input-group-text py-0",id:"basic-addon1"},[t("i",{class:"bi bi-search",style:"font-size: 0.9rem"})],-1))])]),t("div",As,[t("li",Es,[a.contribution_users.length==0?(n(),o("ul",Is,[...e[58]||(e[58]=[t("span",{class:"fst-italic text-secondary"},s("No employee found."),-1)])])):i("",!0),a.contribution_users.length>0?(n(!0),o(M,{key:1},D(a.contribution_users,u=>{var z;return n(),o("ul",{class:R("list-group-item list-group-item-action mb-0 py-1 px-0 "+(u.id==$.value?"bg-light":"")),onClick:()=>{Vt(u.id),l(E).level=u.level,l(E).user_id=u.id}},[t("div",qs,[A.value?V((n(),o("input",{key:0,type:"checkbox",class:"form-check-input me-2","onUpdate:modelValue":e[16]||(e[16]=L=>l(S).staff_id_list=L),value:u.id,onClick:e[17]||(e[17]=ct(()=>{},["stop"]))},null,8,Hs)),[[At,l(S).staff_id_list]]):i("",!0),t("span",{class:R("me-auto "+(u.id==$.value?"":"text-secondary"))},s(u.name),3),A.value?i("",!0):(n(),o("div",Js,[((z=u.contribution)==null?void 0:z.months)+a.contribution_config.start-1<=l(Et)(l(bt))+1||!u.contribution?(n(),o("span",Ks,[...e[59]||(e[59]=[t("span",{class:"my-auto"},s("Late"),-1),t("i",{class:"bi bi-exclamation my-auto"},null,-1)])])):i("",!0)])),A.value?(n(),o("span",Ys,s(u!=null&&u.level?"Level "+u.level:"Unset"),1)):i("",!0)])],10,Ws)}),256)):i("",!0)])])])):i("",!0)]),_:1})])])])]}),_:1}),l(P).roles_id==2?(n(),o("div",Gs,[t("div",Qs,[t("div",Xs,[e[66]||(e[66]=Lt('<div class="modal-header py-1 ps-3 pe-2"><span class="modal-title fs-5 text-primary-emphasis"><i class="bi bi-gear border-secondary border-end me-2 pe-2"></i> Contribution Settings</span><button type="button" class="btn btn-sm ms-auto" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-x-lg"></i></button></div>',1)),t("form",{onSubmit:e[21]||(e[21]=ct(d=>Ut(),["prevent"]))},[t("div",Zs,[e[64]||(e[64]=Lt('<div class="row pt-0"><div class="col-12"><div class="d-flex"><i class="bi bi-exclamation-triangle text-danger me-2 ms-auto my-auto pb-2 fs-4"></i><span style="font-size:0.8rem;" class="me-auto text-danger w-50 mb-1">Changing charge price may result in all receipts having to be  <span class="text-decoration-underline">revalidated</span> .</span></div></div></div>',1)),t("div",tl,[e[61]||(e[61]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_price",class:"form-label d-inline-block"},s("Charge"))],-1)),t("div",el,[V(t("input",{type:"number",class:"form-control form-control-sm",id:"contribution_setting_price","onUpdate:modelValue":e[18]||(e[18]=d=>l(C).price=d),placeholder:"Dana Fakultas or etc..."},null,512),[[X,l(C).price]]),c(F,{messages:l(C).errors.price,class:"mt-2"},null,8,["messages"])])]),t("div",sl,[e[62]||(e[62]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_start",class:"form-label d-inline-block"},s("Start Month"))],-1)),t("div",ll,[V(t("select",{class:"form-control form-control-sm form-select",id:"contribution_setting_start","onUpdate:modelValue":e[19]||(e[19]=d=>l(C).start=d)},[(n(),o(M,null,D(12,d=>t("option",{value:d,key:d},s(l(O)(d)),9,ol)),64))],512),[[ot,l(C).start]]),c(F,{messages:l(C).errors.start,class:"mt-2"},null,8,["messages"])])]),t("div",nl,[e[63]||(e[63]=t("div",{class:"col-4 col-lg-3"},[t("label",{for:"contribution_setting_end",class:"form-label d-inline-block"},s("End Month"))],-1)),t("div",il,[V(t("select",{class:"form-control form-control-sm form-select",id:"contribution_setting_end","onUpdate:modelValue":e[20]||(e[20]=d=>l(C).end=d)},[(n(),o(M,null,D(12,d=>t("option",{value:d,key:d},s(l(O)(d)),9,al)),64))],512),[[ot,l(C).end]]),c(F,{messages:l(C).errors.end,class:"mt-2"},null,8,["messages"])])])]),e[65]||(e[65]=t("div",{class:"modal-footer p-1"},[t("button",{type:"submit",class:"btn btn-sm btn-primary"},s("Set"))],-1))],32)])])])):i("",!0),l(P).roles_id==2?(n(),o("div",rl,[t("div",dl,[t("div",cl,[t("div",ul,[e[68]||(e[68]=t("span",{class:"modal-title fs-5 text-primary-emphasis"},[t("i",{class:"bi bi-gear border-secondary border-end me-2 pe-2"}),w(" "+s("Payroll Settings"))],-1)),t("button",{type:"button",class:"btn btn-sm ms-auto",onClick:e[22]||(e[22]=d=>rt(!1))},[...e[67]||(e[67]=[t("i",{class:"bi bi-x-lg"},null,-1)])])]),t("form",{onSubmit:e[24]||(e[24]=ct(d=>Mt(),["prevent"]))},[t("div",ml,[t("div",bl,[e[70]||(e[70]=t("div",{class:"col-12 col-lg-2"},[t("label",{for:"payroll_setting_balance",class:"form-label d-inline-block ms-0"},s("Budget"))],-1)),t("div",vl,[t("div",fl,[e[69]||(e[69]=t("label",{for:"payroll_setting_balance",class:"form-label d-inline-block me-2 my-auto text-white"},s("Rp"),-1)),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_balance","onUpdate:modelValue":e[23]||(e[23]=d=>l(v).balance=d),placeholder:"Dana Fakultas or etc..."},null,512),[[X,l(v).balance]])]),c(F,{messages:l(v).errors.balance,class:"mt-2"},null,8,["messages"])])]),t("div",pl,[e[75]||(e[75]=t("div",{class:"col-12 col-lg-2"},[t("label",{class:"form-label d-inline-block ms-0"},s("Level"))],-1)),t("div",_l,[(n(!0),o(M,null,D(l(v).level_list,(d,y)=>(n(),o("div",null,[d.deleted_at==null?(n(),o("div",yl,[t("div",gl,[t("div",hl,[t("label",{for:"payroll_setting_level"+d.id,class:"form-label my-auto me-2"},s("Level"),8,xl),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_level"+d.id,"onUpdate:modelValue":j=>l(v).level_list[y].level=j,placeholder:"ex: 1, 2, ..."},null,8,kl),[[X,l(v).level_list[y].level]]),V(t("input",{type:"number",class:"form-control form-control-sm",id:"payroll_setting_salary"+d.id,"onUpdate:modelValue":j=>l(v).level_list[y].salary=j,placeholder:"ex: 20, 50, ..."},null,8,wl),[[X,l(v).level_list[y].salary]]),e[71]||(e[71]=t("span",{class:"form-label ms-2 my-auto"},s("%"),-1))]),t("div",Cl,[t("div",Sl,[c(F,{messages:l(v).errors.level_list?l(v).errors.level_list[y].level:null,class:"mt-2"},null,8,["messages"])]),t("div",zl,[c(F,{messages:l(v).errors.level_list?l(v).errors.level_list[y].salary:null,class:"mt-2"},null,8,["messages"])])])]),t("div",Ll,[t("span",Ul,s(l(B)(d.salary*a.payroll_balance.balance*.01)),1)]),t("button",{type:"button",onClick:j=>Dt(y),class:"btn btn-sm btn-outline-secondary border-0 py-0 ms-2"},[...e[72]||(e[72]=[t("i",{class:"bi bi-trash3"},null,-1)])],8,Ml)])):i("",!0)]))),256)),c(F,{message:l(v).errors.level_list},null,8,["message"]),t("div",Vl,[l(v).level_list.reduce((d,y)=>d+y.salary,0)>100?(n(),o("span",Pl,[...e[73]||(e[73]=[t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),w(" "+s("Warning! Total salary percentage is can`t be bigger than 100."),-1)])])):i("",!0),l(v).level_list.reduce((d,y)=>d+y.salary,0)<100?(n(),o("span",Rl,[...e[74]||(e[74]=[t("i",{class:"bi bi-exclamation-triangle me-2"},null,-1),w(" "+s("Warning! Total salary percentage is less than 100."),-1)])])):i("",!0),t("div",{class:"d-flex w-100"},[t("button",{type:"button",class:"btn btn-sm btn-outline-secondary border-0 py-0 text-nowrap",onClick:Ft},s("Reset")),t("button",{type:"button",class:"btn btn-sm btn-outline-primary border-0 py-0 ms-auto text-nowrap",onClick:Rt},s("New Level"))])])])])]),e[76]||(e[76]=t("div",{class:"modal-footer p-1"},[t("button",{type:"submit",class:"btn btn-sm btn-primary w-25"},s("Set"))],-1))],32)])])])):i("",!0),c(Wt,{ref_key:"toastNotifRef",ref:it},null,512)],64))}};export{Al as default};
