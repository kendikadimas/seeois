import{s as G,r as w,u as N,C as H,G as J,q as K,c as d,o as n,b as m,k,a as e,d as c,h as Q,n as p,t,T as E,g as i,x as X,j as h,f as M,i as D,F as L,y as P}from"./app-UU5vQ_as.js";import{S as Y}from"./StaffLayout-UvpbO_91.js";import{_ as Z}from"./InputError-BczuJaoE.js";import{_ as ee}from"./Notif-Bj-7xZhG.js";import{_ as se}from"./ModalConfirmation-BcAsvzVu.js";import{C as te}from"./vue-select-DoDaMUQe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"container me-lg-0 mx-auto mb-5"},le={class:"row gx-4 mt-4 px-lg-0 px-2"},re={class:"col-lg-5"},ne={class:"row mb-4"},ae={class:"col-12"},de={class:"card shadow-sm border-light border-4"},ie={class:"d-flex"},ce={key:0,class:"row mb-4"},ue={class:"col-12"},me={class:"card border-0 shadow-sm p-3"},pe={class:"row g-2 mt-2"},fe={class:"col-12 col-lg-6"},be=["href"],ve={class:"text-nowrap"},ye={key:0,style:{"font-size":"0.8rem"},class:"bi bi-box-arrow-up-right ms-2 my-auto"},xe={class:"col-12 col-lg-6"},we={class:"text-dark scroll-x-hidden d-block"},_e={class:"text-nowrap"},ge={class:"col-12 col-lg-6"},ke={class:"text-dark"},he={class:"col-12 col-lg-6"},Ce={key:0,class:"d-block"},Se={key:1,class:"d-block"},$e={key:2,class:"d-flex"},Ee={key:0,class:"d-flex mt-2"},ze={key:0,class:"row mb-4"},Ae={class:"col-12"},Ne={class:"card border-0 shadow-sm p-3"},Le={class:"row g-2 mt-2"},Re={class:"col-12 col-lg-6"},Ue={class:"text-dark scroll-x-hidden d-block text-decoration-none"},Ve={class:"text-nowrap"},Fe={class:"col-12 col-lg-6"},Oe={class:"text-dark scroll-x-hidden d-block"},Te={class:"text-nowrap"},je={class:"col-12 col-lg-6"},Be={class:"text-dark"},Me={class:"col-lg-7"},De={key:0,class:"row mb-3"},Pe={class:"col-12"},Ie={class:"card shadow-sm p-3"},We={class:"d-flex mt-2"},qe={class:"input-group ms-2"},Ge={class:"scroll-container-3 scroll-container-lg-3 mt-2"},He={class:"list-group list-group-flush"},Je={key:0,class:"list-group-item"},Ke=["onClick"],Qe={class:"me-2 border-end border-secondary-subtle border-2 text-secondary fw-normal pe-2"},Xe={class:"text-nowrap"},Ye={class:"ms-auto text-secondary scroll-x-hidden"},Ze={class:"text-nowrap"},es={key:0,class:"row mb-3"},ss={class:"col-12"},ts={class:"card shadow-sm p-3"},os={class:"d-flex mt-2"},ls={class:"input-group ms-2"},rs={class:"scroll-container-3 scroll-container-lg-3 mt-2"},ns={class:"list-group list-group-flush"},as={key:0,class:"list-group-item list-group-item-action"},ds=["onClick"],is={class:"d-flex"},cs={class:"mx-2 border-end border-secondary-subtle border-2 text-secondary pe-2"},xs={__name:"Employee",props:{unemployees:Array,employees:Array,filter:Object,roles:Array,level_list:Array,departments:Array,notif:Object,errors:Object},setup(a){const v=a,C=G().props.auth.user,R=w("User Manager"),z=w(null),U=w(null),y=w(1),r=w({id:null,name:"Username",email:"user@mail.com",phone:"08xxxxxxxx",department:{name:" - "},level:" - ",roles_id:0}),I={id:null,name:"User name",email:"user@mail.com",phone:"08xxxxxxxx",department:{name:" - "},level:" - ",roles_id:0},x=N({user_id:null,roles_id:null}),f=N({keyword:v.filter.staff.keyword,category:v.filter.staff.category,order:v.filter.staff.order}),u=w({id:null,name:"Username",email:"user@mail.com",phone:"08xxxxxxxx",roles_id:null}),W={id:null,name:"Username",email:"user@mail.com",phone:"08xxxxxxxx",roles_id:null},b=N({keyword:v.filter.customer.keyword,category:v.filter.customer.category,order:v.filter.customer.order});function _(l){y.value=l}function q(l){r.value=l}function V(){event.preventDefault(),x.user_id=r.value.id,console.log(x),x.post(route("role.update"),{onSuccess:()=>{x.reset()},onError:l=>console.error("update employee failed:",l)})}function A(l=null){l&&(f.order=f.category==l?f.order=="asc"?"desc":"asc":"desc",f.category=l,f.keyword=null),f.post(route("role.filter"))}function F(l=null){l&&(b.order=b.category==l?b.order=="asc"?"desc":"asc":"desc",b.category=l,b.keyword=null),b.post(route("unemployee.filter"))}function O(l,s){z.value?z.value.showModal(l,s):console.error("modalConfirmationRef is null")}const S=w(window.innerWidth>=768),T=()=>{S.value=window.innerWidth>=768};return H(()=>{window.addEventListener("resize",T)}),J(()=>{window.removeEventListener("resize",T)}),K(()=>v.notif,l=>{const s=l;U.value.showToast(s.type,s.message),s.type!=="warning"&&s.type!=="danger"&&(r.value=I,u.value=W)}),(l,s)=>(n(),d(L,null,[m(Y,null,{header:k(()=>[h(t(R.value),1)]),default:k(()=>[m(c(Q),{title:R.value,icon:"/storage/local/images/apps/logo.png"},null,8,["title"]),m(se,{ref_key:"modalConfirmationRef",ref:z},null,512),e("div",oe,[e("div",le,[e("div",re,[e("div",ne,[e("div",ae,[e("div",de,[e("div",ie,[e("button",{class:p("btn btn-sm btn-outline-primary border-0 w-50 text-center me-1 "+(y.value==1?"active ":"")),onClick:s[0]||(s[0]=o=>_(0))},t("Staff"),2),e("button",{class:p("btn btn-sm btn-outline-primary border-0 w-50 text-center "+(y.value==2?"active ":"")),onClick:s[1]||(s[1]=o=>_(0))},t("Customer"),2)])])])]),m(E,{name:S.value?"fade":"fade-slide-ltr",onAfterLeave:s[5]||(s[5]=o=>_(2))},{default:k(()=>{var o,$,j,B;return[y.value==1?(n(),d("div",ce,[e("div",ue,[e("div",me,[s[22]||(s[22]=e("div",{class:"row"},[e("div",{class:"col-12"},[e("div",{class:"card border-0 border-bottom border-primary rounded-0 rounded-top d-flex"},[e("div",{class:"d-flex mb-1"},[e("div",{class:"scroll-x-hidden mx-auto"},[e("span",{class:"h5 text-primary-emphasis text-nowrap"},[e("i",{class:"bi bi-person-vcard me-2"}),e("span",null,t("Staff Contact"))])])])])])],-1)),e("div",pe,[e("div",fe,[s[17]||(s[17]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Name"),-1)),e("a",{href:r.value.id>0?l.route("profile.edit",r.value.id):"",class:"text-dark scroll-x-hidden d-block text-decoration-none"},[e("span",ve,t(r.value.name),1),r.value.id>0?(n(),d("i",ye)):i("",!0)],8,be)]),e("div",xe,[s[18]||(s[18]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Email"),-1)),e("span",we,[e("span",_e,t(r.value.email),1)])]),e("div",ge,[s[19]||(s[19]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Phone"),-1)),e("span",ke,t(r.value.phone),1)]),e("div",he,[s[21]||(s[21]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Role"),-1)),((o=r.value)==null?void 0:o.id)>0?i("",!0):(n(),d("span",Ce,t(" - "))),c(C).roles_id!==1&&(($=r.value)==null?void 0:$.id)>0?(n(),d("span",Se,t(r.value.roles.name),1)):i("",!0),c(C).roles_id==1&&((j=r.value)==null?void 0:j.id)>0?(n(),d("div",$e,[m(c(te),{class:"bg-white text-nowrap w-100",options:a.roles,label:"name",reduce:g=>g.id,modelValue:c(x).roles_id,"onUpdate:modelValue":s[2]||(s[2]=g=>c(x).roles_id=g),placeholder:"Select role"},null,8,["options","reduce","modelValue"]),e("button",{onClick:s[3]||(s[3]=(...g)=>V&&V(...g)),class:"btn btn-outline-primary border-0 py-0"},[...s[20]||(s[20]=[e("i",{class:"bi bi-check-lg"},null,-1)])])])):i("",!0),c(C).roles_id==1&&((B=r.value)==null?void 0:B.id)>0?(n(),X(Z,{key:3,message:c(x).errors.roles_id,class:"mt-2"},null,8,["message"])):i("",!0)])]),c(C).roles_id==1&&r.value.id>0?(n(),d("div",Ee,[e("button",{onClick:s[4]||(s[4]=g=>O(l.route("role.remove",r.value.id),"Are you sure want to remove "+r.value.name+" from SEEO Staff?")),class:"btn btn-sm btn-secondary w-100 text-decoration-none"},t("Remove"))])):i("",!0)])])])):i("",!0)]}),_:1},8,["name"]),m(E,{name:S.value?"fade":"fade-slide-rtl",onAfterLeave:s[7]||(s[7]=o=>_(1))},{default:k(()=>{var o;return[y.value==2?(n(),d("div",ze,[e("div",Ae,[e("div",Ne,[s[26]||(s[26]=e("div",{class:"row"},[e("div",{class:"col-12"},[e("div",{class:"card border-0 border-bottom border-primary rounded-0 rounded-top d-flex"},[e("span",{class:"h5 text-primary-emphasis fw-bold mx-auto"},[e("i",{class:"bi bi-person-vcard me-2"}),e("span",null,t("Customer Contact"))])])])],-1)),e("div",Le,[e("div",Re,[s[23]||(s[23]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Name"),-1)),e("span",Ue,[e("span",Ve,t(u.value.name),1)])]),e("div",Fe,[s[24]||(s[24]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Email"),-1)),e("span",Oe,[e("span",Te,t(u.value.email),1)])]),e("div",je,[s[25]||(s[25]=e("span",{class:"text-secondary d-block",style:{"font-size":"0.8rem"}},t("Phone"),-1)),e("span",Be,t(u.value.phone),1)])]),c(C).roles_id==1&&((o=u.value)==null?void 0:o.id)>0?(n(),d("button",{key:0,onClick:s[6]||(s[6]=$=>O(l.route("employee.add",u.value.id),"Are you sure want to recruit "+u.value.name+" to SEEO Staff?")),class:"btn btn-sm btn-primary w-100 text-decoration-none mt-2"},t("Recruit"))):i("",!0)])])])):i("",!0)]}),_:1},8,["name"])]),e("div",Me,[m(E,{name:S.value?"fade":"fade-slide-ltr",onAfterLeave:s[12]||(s[12]=o=>_(2))},{default:k(()=>[y.value==1?(n(),d("div",De,[e("div",Pe,[e("div",Ie,[s[32]||(s[32]=e("div",{class:"row"},[e("div",{class:"col-12"},[e("div",{class:"d-flex border-primary border-bottom pb-2"},[e("span",{class:"text-primary-emphasis me-auto my-auto h6"},[e("i",{class:"bi bi-people me-1"}),h(" "+t("Staff List"))])])])],-1)),e("div",We,[s[30]||(s[30]=e("span",{class:"text-primary border-end border-secondary-subtle border-3 pe-3 me-3 my-auto"},t("Filter"),-1)),e("button",{onClick:s[8]||(s[8]=o=>A("name")),class:"btn text-nowrap btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0"},[s[27]||(s[27]=h(t("Name")+" ",-1)),e("i",{class:p("bi bi-arrow-"+(a.filter.staff.category=="name"?a.filter.staff.order=="asc"?"up":"down":"up"))},null,2)]),e("button",{onClick:s[9]||(s[9]=o=>A("roles_id")),class:"btn text-nowrap btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0 ms-2"},[s[28]||(s[28]=h(t("Role")+" ",-1)),e("i",{class:p("bi bi-arrow-"+(a.filter.staff.category=="roles_id"?a.filter.staff.order=="asc"?"up":"down":"up"))},null,2)]),e("div",qe,[M(e("input",{type:"text",class:"form-control form-control-sm py-0",placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1","onUpdate:modelValue":s[10]||(s[10]=o=>c(f).keyword=o),onInput:s[11]||(s[11]=o=>A())},null,544),[[D,c(f).keyword]]),s[29]||(s[29]=e("span",{class:"input-group-text py-0",id:"basic-addon1"},[e("i",{class:"bi bi-search",style:"font-size: 0.9rem"})],-1))])]),e("div",Ge,[e("li",He,[a.employees.length==0?(n(),d("ul",Je,[...s[31]||(s[31]=[e("div",{class:"col"},[e("span",{class:"ms-3 text-secondary"},t("No employee found."))],-1)])])):i("",!0),a.employees.length>0?(n(!0),d(L,{key:1},P(a.employees,o=>(n(),d("ul",{class:p("list-group-item list-group-item-action mb-0 py-2 px-0 "+(o.id==r.value.id?"bg-light":"")),key:a.employees.id},[e("span",{class:"d-flex",onClick:$=>q(o)},[e("span",Qe,t(a.employees.indexOf(o)+1),1),e("span",{class:p("scroll-x-hidden me-2 "+(o.id==r.value.id?"text-primary":"text-dark"))},[e("span",Xe,t(o.name),1)],2),e("span",Ye,[e("span",Ze,t(o.roles_id?o.roles.name:""),1)])],8,Ke)],2))),128)):i("",!0)])])])])])):i("",!0)]),_:1},8,["name"]),m(E,{name:S.value?"fade":"fade-slide-rtl",onAfterLeave:s[16]||(s[16]=o=>_(1))},{default:k(()=>[y.value==2?(n(),d("div",es,[e("div",ss,[e("div",ts,[s[37]||(s[37]=e("div",{class:"row"},[e("div",{class:"col-12"},[e("div",{class:"d-flex border-primary border-bottom pb-2"},[e("span",{class:"text-primary-emphasis me-auto my-auto h6"},[e("i",{class:"bi bi-people me-1"}),e("span",{class:"d-none d-lg-inline"},t("Employee ")),h(" "+t("List"))])])])],-1)),e("div",os,[s[35]||(s[35]=e("span",{class:"text-primary border-end border-secondary-subtle border-3 pe-3 me-3 my-auto"},t("Filter"),-1)),e("button",{onClick:s[13]||(s[13]=o=>F("name")),class:"btn text-nowrap btn-sm btn-outline-secondary border-1 rounded-2 border-secondary-subtle py-0"},[s[33]||(s[33]=h(t("Name")+" ",-1)),e("i",{class:p("bi bi-arrow-"+(a.filter.customer.category=="name"?a.filter.customer.order=="asc"?"up":"down":"up"))},null,2)]),e("div",ls,[M(e("input",{type:"text",class:"form-control form-control-sm py-0",placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1","onUpdate:modelValue":s[14]||(s[14]=o=>c(b).keyword=o),onInput:s[15]||(s[15]=o=>F())},null,544),[[D,c(b).keyword]]),s[34]||(s[34]=e("span",{class:"input-group-text py-0",id:"basic-addon1"},[e("i",{class:"bi bi-search",style:"font-size: 0.9rem"})],-1))])]),e("div",rs,[e("li",ns,[a.unemployees.length==0?(n(),d("ul",as,[...s[36]||(s[36]=[e("span",{class:"text-secondary fst-italic"},t("No employee found."),-1)])])):i("",!0),a.unemployees.length>0?(n(!0),d(L,{key:1},P(a.unemployees,o=>(n(),d("ul",{class:p("list-group-item list-group-item-action mb-0 "+(o.id==u.value.id?" bg-light":"")),onClick:()=>{u.value=o}},[e("span",is,[e("span",cs,t(a.unemployees.indexOf(o)+1),1),e("span",{class:p(o.id==u.value.id?"text-primary":"text-secondary")},t(o.name),3)])],10,ds))),256)):i("",!0)])])])])])):i("",!0)]),_:1},8,["name"])])])])]),_:1}),m(ee,{ref_key:"toastNotifRef",ref:U},null,512)],64))}};export{xs as default};
